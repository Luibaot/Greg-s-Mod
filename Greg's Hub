local Material = loadstring(game:HttpGet("https://raw.githubusercontent.com/Kinlei/MaterialLua/master/Module.lua"))()

local UI = Material.Load({
     Title = "Greg's Mod",
     Style = 3,
     SizeX = 400,
     SizeY = 300,
     Theme = "Jester"
})

local Page = UI.New({
    Title = "Scripts"
})

Page.Button({
    Text = "Loop Fling",
    Callback = function()
loadstring(game:HttpGet('https://github.com/DigitalityScripts/roblox-scripts/raw/main/loop%20fling%20all'))()
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "wear any rthro head with R15 and rthro hats for this script to work!"            
            })
        end
        
    }
})

Page.Button({
    Text = "Hathub",
    Callback = function()
loadstring(game:HttpGet("https://pastebin.com/raw/1Cjz1RMH"))()
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "wear hats to execute scripts."            
            })
        end
        
    }
})

Page.Button({
    Text = "Infinite Yield",
    Callback = function()
loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "funny admin commands."            
            })
        end
        
    }
})

Page.Button({
    Text = "Dark Dex",
    Callback = function()
        loadstring(game:HttpGetAsync("https://pastebin.com/raw/fPP8bZ8Z"))()
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "funny map stealer."            
            })
        end
        
    }
})

Page.Button({
    Text = "Table",
    Callback = function()
--made by Creatar#4019
local plr = game.Players.LocalPlayer
game:GetService("RunService").Stepped:Connect(function()
   setsimulationradius(9e9,9e9)
   plr.ReplicationFocus = workspace
   settings().Physics.AllowSleep = false
end)
--- thank you to ou1z to the script above
local runservice=game:service"RunService";
local player=game:service"Players"["LocalPlayer"];
local character=player["Character"];
character["Head"]:FindFirstChildOfClass"SpecialMesh":Destroy();

character["Humanoid"].HipHeight=-2;
character["Left Leg"]:BreakJoints();
character["Right Leg"]:BreakJoints();
character["Left Arm"]:BreakJoints();
character["Right Arm"]:BreakJoints();
while runservice["Heartbeat"]:Wait() do
    character["Left Leg"].CFrame=character["HumanoidRootPart"].CFrame*CFrame.new(-0.5,1.5,1.5) * CFrame.Angles(math.rad(90), 0, 0);
    character["Right Leg"].CFrame=character["HumanoidRootPart"].CFrame*CFrame.new(0.5,1.5,1.5) * CFrame.Angles(math.rad(90), 0, 0);
    character["Left Arm"].CFrame=character["HumanoidRootPart"].CFrame*CFrame.new(-0.5,0,2);
    character["Right Arm"].CFrame=character["HumanoidRootPart"].CFrame*CFrame.new(0.5,0,2);
end
-- made by Creatar aca Robloit aca Creatar#4019--made by Creatar#4019
local plr = game.Players.LocalPlayer
game:GetService("RunService").Stepped:Connect(function()
   setsimulationradius(9e9,9e9)
   plr.ReplicationFocus = workspace
   settings().Physics.AllowSleep = false
end)
--- thank you to ou1z to the script above
local runservice=game:service"RunService";
local player=game:service"Players"["LocalPlayer"];
local character=player["Character"];
character["Head"]:FindFirstChildOfClass"SpecialMesh":Destroy();

character["Humanoid"].HipHeight=-2;
character["Left Leg"]:BreakJoints();
character["Right Leg"]:BreakJoints();
character["Left Arm"]:BreakJoints();
character["Right Arm"]:BreakJoints();
while runservice["Heartbeat"]:Wait() do
    character["Left Leg"].CFrame=character["HumanoidRootPart"].CFrame*CFrame.new(-0.5,1.5,1.5) * CFrame.Angles(math.rad(90), 0, 0);
    character["Right Leg"].CFrame=character["HumanoidRootPart"].CFrame*CFrame.new(0.5,1.5,1.5) * CFrame.Angles(math.rad(90), 0, 0);
    character["Left Arm"].CFrame=character["HumanoidRootPart"].CFrame*CFrame.new(-0.5,0,2);
    character["Right Arm"].CFrame=character["HumanoidRootPart"].CFrame*CFrame.new(0.5,0,2);
end
-- made by Creatar aca Robloit aca Creatar#4019
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "funni."            
            })
        end
        
    }
})

local Page2 = UI.New({
    Title = "Mods"
})

Page.Button({
    Text = "Shotgun",
    Callback = function()
        --hats:
--https://web.roblox.com/catalog/48474313/Red-Roblox-Cap
--https://web.roblox.com/catalog/5134896593/Red-Sci-Fi-Scattergun
setfpscap(60) -- remove if u dont have fast animations problem

sounds = true -- if this is set to false than sounds are off

MadeByScriptVerse = true
local f=string.byte;local F=string.char;local t=string.sub;local R=table.concat;local s=table.insert;local r=math.ldexp;local A=getfenv or function()return _ENV end;local e=setmetatable;local h=select;local i=unpack or table.unpack;local d=tonumber;local function D(i)local l,n,o="","",{}local c=256;local a={}for e=0,c-1 do a[e]=F(e)end;local e=1;local function f()local l=d(t(i,e,e),36)e=e+1;local n=d(t(i,e,e+l-1),36)e=e+l;return n end;l=F(f())o[1]=l;while e<#i do local e=f()if a[e]then n=a[e]else n=l..t(l,1,1)end;a[c]=l..t(n,1,1)o[#o+1],l,c=n,n,c+1 end;return table.concat(o)end;local d=D('24X23R27523P24E27523R25Q26J26J27B27C27E27E27D27C27I27F27C23O27927O23R27N27P24F25J27R27O24Z27U27P23R24L27Y27P26625J23P23M27926R26E26D26J26A23P23L27926C26G26H26C26E26R23P23S27927G25Q28R27F28R28S27V23R26P27224S25I23P24K28P27L29527H29727J27G29928S27M27O1721M21Y28523X27926J26G26E26B26S26R26T26M26H26823P23Q27924Q29V27924O29Z27524N2A223R25F2A528D29W27526C2A526G2A526I2A526V2A526M2A526J2A526B2A525G2A524P2A523X2A525W2A525X2A525Q2A525Z2A525V2A526E2A526S2A528M2AA23R26T2A526H2A529U2BB24V2A52592A525R2A525C2A524G2A526N2A526D2A526O2A52672A524W2A52692A525N2A52712A524U23P24F28P28U2CD27J2CF27D2CD28U23R26X2792A527O24524D2792BB25327O27N23P23R24727O23N27924N27Z28724527529W28F2752D523R2CW23K2D12762DB23R23Z2DB29W27N2BB24524T27Q23R23Y2792452DI27N2DR2D92D52D029J27923U2DP2CW29W29Z2CV2DS2CY27N23W2DS2752EA2EC23R2D023V27Z2E729W2DA27N2E227P2D024J2EF28723T2EF28F2EU2D92752DD28O2EY2DH23R2F123R24528O2DR2CY2F229J2462EF2EB2DA2F62752EI2442EF2E22432EF2EU2422EF28O2412EF2CY2402EF2FD2CB2F22D52FG2F723R2FK2782F22FN2FA2FH23R2FQ2CQ2F22FT2FN2F22FW2G62GA2CB2G227527824C2EF2CQ2G92DA2GP24B2EF2GV2EX2F628O24A23R2GY2DA24923R2H12F224823R2GD2GA2D22H52F224M23R2H92F224L23R2D22F22932HG2F22ER2GV2F224I23R2FZ2GA24H23R2GG2GZ23R24G2802EF24V23R2GJ2DA24U23R2932F22DO2ER2F224S23R2HU2F224R23R2FW2F224Q23R2HY2F224P2I22EF24O23R2I62F22CT2I32DX23R2522I42J22512GB2DS2D52502GA2F62D524Z23R2IA2J224Y23R2DO2J22742IF2752ER2D02742EL2D52872JO2G328F2FT2F22DD2IH2F22DI2GM2DQ23R2JW27529J2IY2GA2EB2IL2F22EI2IP2F22E22K82H22K72FR23R2JZ2I12CY2IC2GA2FD2JH2GA2D52F52DA2FK2KY2752FN2KP2DA2FQ2HK2GE2IB2EF2FW2KK2GL2EF2782IT2D928O2CQ2IN2GA2GP2IR2GA2GV2GP2F22H12FK2F22H52I02DA2H92FQ2F22D22L123R2HG2IJ2GA2HK2L72GA2932IW2LH2KM2M22HU2CT2F22HY2J42F22I32J72F22I62JB2F22IA2MM2GA2DO2LG2GA2IH2KK2IL2JF2IO23R2KE2JD23R2IT2JJ2J22IW2N72N42CT2KB2452D52J42NA2NE23R2J72HS2JP2EG2NJ2DG2NN28728W27528F2CW27P2DD2D02K323R27427P28F2DI27P2872DF27928729W2BB2CR27927V2NV2DP27O21R1R28227925J1P25J23Q2E02IQ2O62DP2OA2EG2MG2OT2OV2O823R2AA29J2OB2NT2P02NP2IQ2LQ2K62E52OY2752DR2P12P52OB28F2PA2792MJ2P527Z2BB23P2EI27529C28T2CF23Q2OE2OU2CO2DO2PW2752PK2BB2Q22CM2PP27A27H2CH2PT2PV2PL2DS2PY2QB2J32OC2D627Z2P02OB2Q12QI2PN2Q52PR2Q827J2PU2CM2PZ2D92QD2QK2QG2QB2BB23O2502R22R324O2OO2OF2NI2QU2QL27Z');local o=bit and bit.bxor or function(e,n)local l,o=1,0 while e>0 and n>0 do local c,t=e%2,n%2 if c~=t then o=o+l end e,n,l=(e-c)/2,(n-t)/2,l*2 end if e<n then e=n end while e>0 do local n=e%2 if n>0 then o=o+l end e,l=(e-n)/2,l*2 end return o end local function n(l,e,n)if n then local e=(l/2^(e-1))%2^((n-1)-(e-1)+1);return e-e%1;else local e=2^(e-1);return(l%(e+e)>=e)and 1 or 0;end;end;local e=1;local function l()local l,n,t,c=f(d,e,e+3);l=o(l,135)n=o(n,135)t=o(t,135)c=o(c,135)e=e+4;return(c*16777216)+(t*65536)+(n*256)+l;end;local function a()local l=o(f(d,e,e),135);e=e+1;return l;end;local function c()local n,l=f(d,e,e+2);n=o(n,135)l=o(l,135)e=e+2;return(l*256)+n;end;local function D()local e=l();local l=l();local t=1;local o=(n(l,1,20)*(2^32))+e;local e=n(l,21,31);local l=((-1)^n(l,32));if(e==0)then if(o==0)then return l*0;else e=1;t=0;end;elseif(e==2047)then return(o==0)and(l*(1/0))or(l*(0/0));end;return r(l,e-1023)*(t+(o/(2^52)));end;local r=l;local function P(l)local n;if(not l)then l=r();if(l==0)then return'';end;end;n=t(d,e,e+l-1);e=e+l;local l={}for e=1,#n do l[e]=F(o(f(t(n,e,e)),135))end return R(l);end;local e=l;local function F(...)return{...},h('#',...)end local function r()local f={};local d={};local e={};local i={f,d,nil,e};local e=l()local t={}for n=1,e do local l=a();local e;if(l==1)then e=(a()~=0);elseif(l==3)then e=D();elseif(l==2)then e=P();end;t[n]=e;end;i[3]=a();for i=1,l()do local e=a();if(n(e,1,1)==0)then local o=n(e,2,3);local a=n(e,4,6);local e={c(),c(),nil,nil};if(o==0)then e[3]=c();e[4]=c();elseif(o==1)then e[3]=l();elseif(o==2)then e[3]=l()-(2^16)elseif(o==3)then e[3]=l()-(2^16)e[4]=c();end;if(n(a,1,1)==1)then e[2]=t[e[2]]end if(n(a,2,2)==1)then e[3]=t[e[3]]end if(n(a,3,3)==1)then e[4]=t[e[4]]end f[i]=e;end end;for e=1,l()do d[e-1]=r();end;return i;end;local function d(e,l,c)local l=e[1];local n=e[2];local e=e[3];return function(...)local o=l;local D=n;local t=e;local F=F local l=1;local a=-1;local r={};local f={...};local h=h('#',...)-1;local e={};local n={};for e=0,h do if(e>=t)then r[e-t]=f[e+1];else n[e]=f[e+1];end;end;local e=h-t+1 local e;local t;while true do e=o[l];t=e[1];if t<=25 then if t<=12 then if t<=5 then if t<=2 then if t<=0 then local f;local d,h;local t;n[e[2]]=n[e[3]];l=l+1;e=o[l];n[e[2]]=n[e[3]];l=l+1;e=o[l];n[e[2]]=c[e[3]];l=l+1;e=o[l];t=e[2]d,h=F(n[t](i(n,t+1,e[3])))a=h+t-1 f=0;for e=t,a do f=f+1;n[e]=d[f];end;l=l+1;e=o[l];t=e[2]n[t]=n[t](i(n,t+1,a))l=l+1;e=o[l];n[e[2]]();l=l+1;e=o[l];do return end;elseif t==1 then n[e[2]]=d(D[e[3]],nil,c);else n[e[2]]=n[e[3]];end;elseif t<=3 then local e=e[2]n[e](n[e+1])elseif t>4 then if(n[e[2]]~=e[4])then l=l+1;else l=e[3];end;else n[e[2]]=n[e[3]];end;elseif t<=8 then if t<=6 then do return n[e[2]]end elseif t==7 then n[e[2]]=e[3]/e[4];else n[e[2]]=c[e[3]];end;elseif t<=10 then if t>9 then n[e[2]]=(e[3]~=0);else if(n[e[2]]~=e[4])then l=l+1;else l=e[3];end;end;elseif t==11 then n[e[2]]=c[e[3]];else n[e[2]]=e[3]+n[e[4]];end;elseif t<=18 then if t<=15 then if t<=13 then local e=e[2]n[e](n[e+1])elseif t>14 then n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];else n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];end;elseif t<=16 then local t;c[e[3]]=n[e[2]];l=l+1;e=o[l];n[e[2]]=c[e[3]];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];t=e[2]n[t](n[t+1])l=l+1;e=o[l];n[e[2]]=c[e[3]];l=l+1;e=o[l];n[e[2]]={};l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];elseif t==17 then n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];else n[e[2]]=e[3];end;elseif t<=21 then if t<=19 then local l=e[2];local o=n[l];for e=l+1,e[3]do s(o,n[e])end;elseif t==20 then n[e[2]]=n[e[3]][e[4]];else do return n[e[2]]end end;elseif t<=23 then if t==22 then local e=e[2]n[e]=n[e](i(n,e+1,a))else n[e[2]]=d(D[e[3]],nil,c);end;elseif t>24 then n[e[2]]=n[e[3]]+e[4];else local e=e[2]n[e]=n[e](i(n,e+1,a))end;elseif t<=38 then if t<=31 then if t<=28 then if t<=26 then c[e[3]]=n[e[2]];l=l+1;e=o[l];n[e[2]]=e[3]/e[4];l=l+1;e=o[l];n[e[2]]=e[3]+n[e[4]];l=l+1;e=o[l];n[e[2]]=n[e[3]]+e[4];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=c[e[3]];l=l+1;e=o[l];n[e[2]]=n[e[3]][e[4]];elseif t>27 then c[e[3]]=n[e[2]];else if(n[e[2]]==e[4])then l=l+1;else l=e[3];end;end;elseif t<=29 then n[e[2]]=e[3];elseif t==30 then n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];else n[e[2]]();end;elseif t<=34 then if t<=32 then n[e[2]]=n[e[3]]+e[4];elseif t==33 then n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];else n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];end;elseif t<=36 then if t>35 then local l=e[2];local o=n[l];for e=l+1,e[3]do s(o,n[e])end;else n[e[2]]=(e[3]~=0);end;elseif t>37 then n[e[2]]=e[3]/e[4];else n[e[2]]={};end;elseif t<=45 then if t<=41 then if t<=39 then do return end;elseif t==40 then local l=e[2]local o,e=F(n[l](i(n,l+1,e[3])))a=e+l-1 local e=0;for l=l,a do e=e+1;n[l]=o[e];end;else n[e[2]]={};end;elseif t<=43 then if t==42 then c[e[3]]=n[e[2]];else local l=e[2]local o,e=F(n[l](i(n,l+1,e[3])))a=e+l-1 local e=0;for l=l,a do e=e+1;n[l]=o[e];end;end;elseif t>44 then n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];else n[e[2]]=n[e[3]][e[4]];end;elseif t<=48 then if t<=46 then if(n[e[2]]==e[4])then l=l+1;else l=e[3];end;elseif t==47 then l=e[3];else l=e[3];end;elseif t<=50 then if t==49 then do return end;else n[e[2]]();end;elseif t==51 then n[e[2]]=e[3]+n[e[4]];else n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];l=l+1;e=o[l];n[e[2]]=e[3];end;l=l+1;end;end;end;return d(r(),{},A())();
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "If fling doesnt work, reset."            
            })
        end
        
    }
})

Page.Button({
    Text = "Gun Turret",
    Callback = function()
        clickfling = true -- set this to false if u dont want click fling or use torso fling

function rmesh(a)
if not (workspace[game.Players.LocalPlayer.Name][a].Handle:FindFirstChild('Mesh') or workspace[game.Players.LocalPlayer.Name][a].Handle:FindFirstChild('SpecialMesh')) then return end
old=game.Players.LocalPlayer.Character
game.Players.LocalPlayer.Character=workspace[game.Players.LocalPlayer.Name]
for i,v in next, workspace[game.Players.LocalPlayer.Name]:FindFirstChild(a).Handle:GetDescendants() do
if v:IsA('Mesh') or v:IsA('SpecialMesh') then
v:Remove()
end
end
for i = 1 , 2 do
game.Players.LocalPlayer.Character=old
end
end

a=game.Players.LocalPlayer b=game.Players.LocalPlayer.Character c={}d=table.insert e=false for D,E in next,game:GetService("Players").LocalPlayer.Character:GetDescendants()do if E:IsA("BasePart")then d(c,game:GetService("RunService").Heartbeat:connect(function()pcall(function()E.Velocity=Vector3.new(-30,0,0)sethiddenproperty(game.Players.LocalPlayer,"MaximumSimulationRadius",math.huge)sethiddenproperty(game.Players.LocalPlayer,"SimulationRadius",999999999)game.Players.LocalPlayer.ReplicationFocus=workspace end)end))end end function f(D,E,F)game.StarterGui:SetCore("SendNotification",{Title=D;Text=E;Duration=F or 5;})end local x=game:GetService("RunService")g=Instance.new('Folder',b)g.Name='CWExtra'b.Archivable=true local y=b:Clone()y.Name='NexoPD'for D,E in next,y:GetDescendants()do if E:IsA('BasePart')or E:IsA('Decal')then E.Transparency=1 end end h=5.65 a.Character=nil a.Character=b b.Humanoid.AutoRotate=false b.Humanoid.WalkSpeed=0 b.Humanoid.JumpPower=0 b.Torso.Anchored=true f('Turret V2','Reanimating...\nPlease wait '..h..' seconds.')wait(h)b.Torso.Anchored=false f('TurreyV2','Reanimated..')b.Humanoid.Health=0 y.Animate.Disabled=true y.Parent=g y.HumanoidRootPart.CFrame=b.HumanoidRootPart.CFrame*CFrame.new(0,5,0)function i(D,E,F,G)Instance.new("Attachment",D)Instance.new("AlignPosition",D)Instance.new("AlignOrientation",D)Instance.new("Attachment",E)D.Attachment.Name=D.Name E.Attachment.Name=D.Name D.AlignPosition.Attachment0=D[D.Name]D.AlignOrientation.Attachment0=D[D.Name]D.AlignPosition.Attachment1=E[D.Name]D.AlignOrientation.Attachment1=E[D.Name]E[D.Name].Position=F or Vector3.new()D[D.Name].Orientation=G or Vector3.new()D.AlignPosition.MaxForce=999999999 D.AlignPosition.MaxVelocity=math.huge D.AlignPosition.ReactionForceEnabled=false D.AlignPosition.Responsiveness=math.huge D.AlignOrientation.Responsiveness=math.huge D.AlignPosition.RigidityEnabled=false D.AlignOrientation.MaxTorque=999999999 D.Massless=true end function j(D,E,F)Instance.new("Attachment",D)Instance.new("AlignPosition",D)Instance.new("Attachment",E)D.Attachment.Name=D.Name E.Attachment.Name=D.Name D.AlignPosition.Attachment0=D[D.Name]D.AlignPosition.Attachment1=E[D.Name]E[D.Name].Position=F or Vector3.new()D.AlignPosition.MaxForce=999999999 D.AlignPosition.MaxVelocity=math.huge D.AlignPosition.ReactionForceEnabled=false D.AlignPosition.Responsiveness=math.huge D.Massless=true end for D,E in next,b:GetDescendants()do if E:IsA('BasePart')then d(c,x.RenderStepped:Connect(function()E.CanCollide=false end))end end for D,E in next,b:GetDescendants()do if E:IsA('BasePart')then d(c,x.Stepped:Connect(function()E.CanCollide=false end))end end for D,E in next,y:GetDescendants()do if E:IsA('BasePart')then d(c,x.RenderStepped:Connect(function()E.CanCollide=false end))end end for D,E in next,y:GetDescendants()do if E:IsA('BasePart')then d(c,x.Stepped:Connect(function()E.CanCollide=false end))end end for D,E in next,b:GetDescendants()do if E:IsA('Accessory')then i(E.Handle,y[E.Name].Handle)end end i(b['Head'],y['Head'])i(b['Torso'],y['Torso'])j(b['HumanoidRootPart'],y['Torso'],Vector3.new(0,0,0))i(b['Right Arm'],y['Right Arm'])i(b['Left Arm'],y['Left Arm'])i(b['Right Leg'],y['Right Leg'])i(b['Left Leg'],y['Left Leg'])k=a:GetMouse()local z=Instance.new("Part",g)z.CanCollide=false z.Transparency=1 d(c,x.RenderStepped:Connect(function()local D=workspace.CurrentCamera.CFrame.lookVector local E=y["HumanoidRootPart"]z.Position=E.Position z.CFrame=CFrame.new(z.Position,Vector3.new(D.X*10000,D.Y,D.Z*10000))end))l=false m=false n=false o=false p=false function q(D)r=Instance.new('BodyAngularVelocity',D)r.AngularVelocity=Vector3.new(9e9,9e9,9e9)r.MaxTorque=Vector3.new(9e9,9e9,9e9)end q(b.HumanoidRootPart)k=a:GetMouse()s=Instance.new('BodyPosition',b.HumanoidRootPart)s.P=9e9 s.D=9e9 s.MaxForce=Vector3.new(99999,99999,99999)local A d(c,x.Heartbeat:Connect(function()if A==true then s.Position=k.Hit.p b.HumanoidRootPart.Position=k.Hit.p else s.Position=y.Torso.Position b.HumanoidRootPart.Position=y.Torso.Position end end))local B=Instance.new("SelectionBox")B.Adornee=b.HumanoidRootPart B.LineThickness=0.02 B.Color3=Color3.fromRGB(250,0,0)B.Parent=b.HumanoidRootPart B.Name="RAINBOW"t=B if clickfling then d(c,k.Button1Down:Connect(function()A=true end))d(c,k.Button1Up:Connect(function()A=false end))end d(c,k.KeyDown:Connect(function(D)if D==' 'then p=true end if D=='w'then l=true end if D=='s'then m=true end if D=='a'then n=true end if D=='d'then o=true end end))d(c,k.KeyUp:Connect(function(D)if D==' 'then p=false end if D=='w'then l=false end if D=='s'then m=false end if D=='a'then n=false end if D=='d'then o=false end end))local function C(D,E,F)z.CFrame=z.CFrame*CFrame.new(-D,E,-F)y.Humanoid.WalkToPoint=z.Position end d(c,x.RenderStepped:Connect(function()if l==true then C(0,0,1e4)end if m==true then C(0,0,-1e4)end if n==true then C(1e4,0,0)end if o==true then C(-1e4,0,0)end if p==true then y.Humanoid.Jump=true end if l~=true and n~=true and m~=true and o~=true then y.Humanoid.WalkToPoint=y.HumanoidRootPart.Position end end))workspace.CurrentCamera.CameraSubject=y.Humanoid u=Instance.new('BindableEvent')d(c,u.Event:Connect(function()y:Destroy()e=true v=false for D,E in next,b:GetDescendants()do if E:IsA('BasePart')then E.Anchored=true end end w=b.Humanoid:Clone()b.Humanoid:Destroy()w.Parent=b game.Players:Chat('-re')for D,E in pairs(c)do E:Disconnect()end game:GetService("StarterGui"):SetCore("ResetButtonCallback",true)u:Remove()end))game:GetService("StarterGui"):SetCore("ResetButtonCallback",u)

IT = Instance.new
CF = CFrame.new
VT = Vector3.new
RAD = math.rad
C3 = Color3.new
UD2 = UDim2.new
BRICKC = BrickColor.new
ANGLES = CFrame.Angles
EULER = CFrame.fromEulerAnglesXYZ
COS = math.cos
ACOS = math.acos
SIN = math.sin
ASIN = math.asin
ABS = math.abs
MRANDOM = math.random
FLOOR = math.floor

speed = 1
sine = 1
srv = game:GetService('RunService')

reanim = workspace.Camera.CameraSubject.Parent

function hat(h,p,c1,c0,m)
reanim[h].Handle.AccessoryWeld.Part1=reanim[p]
reanim[h].Handle.AccessoryWeld.C1=c1 or CFrame.new()
reanim[h].Handle.AccessoryWeld.C0=reanim[h].Handle.AccessoryWeld.C0:Lerp(c0 or CFrame.new(),1)
if m == true then
rmesh(h)
end
end

m=game.Players.LocalPlayer:GetMouse()
RJ = reanim.HumanoidRootPart.RootJoint
RS = reanim.Torso['Right Shoulder']
LS = reanim.Torso['Left Shoulder']
RH = reanim.Torso['Right Hip']
LH = reanim.Torso['Left Hip']
Root = reanim.HumanoidRootPart
NECK = reanim.Torso.Neck
NECK.C0 = CF(0,1,0)*ANGLES(RAD(0),RAD(0),RAD(0))
NECK.C1 = CF(0,-0.5,0)*ANGLES(RAD(0),RAD(0),RAD(0))
RJ.C1 = CF(0,-1,0)*ANGLES(RAD(0),RAD(0),RAD(0))
RJ.C0 = CF(0,0,0)*ANGLES(RAD(0),RAD(0),RAD(0))
RS.C1 = CF(0,0.5,0)*ANGLES(RAD(0),RAD(0),RAD(0))
LS.C1 = CF(0,0.5,0)*ANGLES(RAD(0),RAD(0),RAD(0))
RH.C1 = CF(0,1,0)*ANGLES(RAD(0),RAD(0),RAD(0))
LH.C1 = CF(0,1,0)*ANGLES(RAD(0),RAD(0),RAD(0))
RH.C0 = CF(0,0,0)*ANGLES(RAD(0),RAD(0),RAD(0))
LH.C0 = CF(0,0,0)*ANGLES(RAD(0),RAD(0),RAD(0))
RS.C0 = CF(0,0,0)*ANGLES(RAD(0),RAD(0),RAD(0))
LS.C0 = CF(0,0,0)*ANGLES(RAD(0),RAD(0),RAD(0))

-- for modes u can go in this link : https://Nexo.notxeneon15.repl.co/nexo/modes.lua

coroutine.wrap(function()
while true do -- anim changer
if HumanDied then break end
sine = sine + speed
local rlegray = Ray.new(reanim["Right Leg"].Position + Vector3.new(0, 0.5, 0), Vector3.new(0, -2, 0))
local rlegpart, rlegendPoint = workspace:FindPartOnRay(rlegray, char)
local llegray = Ray.new(reanim["Left Leg"].Position + Vector3.new(0, 0.5, 0), Vector3.new(0, -2, 0))
local llegpart, llegendPoint = workspace:FindPartOnRay(llegray, char)
local rightvector = (Root.Velocity * Root.CFrame.rightVector).X + (Root.Velocity * Root.CFrame.rightVector).Z
local lookvector = (Root.Velocity * Root.CFrame.lookVector).X + (Root.Velocity * Root.CFrame.lookVector).Z
if lookvector > reanim.Humanoid.WalkSpeed then
lookvector = reanim.Humanoid.WalkSpeed
end
if lookvector < -reanim.Humanoid.WalkSpeed then
lookvector = -reanim.Humanoid.WalkSpeed
end
if rightvector > reanim.Humanoid.WalkSpeed then
rightvector = reanim.Humanoid.WalkSpeed
end
if rightvector < -reanim.Humanoid.WalkSpeed then
rightvector = -reanim.Humanoid.WalkSpeed
end
local lookvel = lookvector / reanim.Humanoid.WalkSpeed
local rightvel = rightvector / reanim.Humanoid.WalkSpeed
if reanim.Humanoid.Jump then -- jump
--jump clerp here
elseif Root.Velocity.y < -1 and reanim.Humanoid.Jump then -- fall
--fall clerp here
elseif Root.Velocity.Magnitude < 2 then -- idle
NECK.C0=NECK.C0:Lerp(CFrame.new(0+0*math.cos(sine/10),1+0*math.cos(sine/10),0+0*math.cos(sine/10))*CFrame.Angles(math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10))),.2) 
RJ.C0=RJ.C0:Lerp(CFrame.new(0+0*math.cos(sine/10),-12+0*math.cos(sine/10),0+0*math.cos(sine/10))*CFrame.Angles(math.rad(90+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10))),.2) 
RS.C0=RS.C0:Lerp(CFrame.new(0+0*math.cos(sine/10),0.5+0*math.cos(sine/10),-10+0*math.cos(sine/10))*CFrame.Angles(math.rad(90+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10))),.2) 
LS.C0=LS.C0:Lerp(CFrame.new(0+0*math.cos(sine/10),0.5+0*math.cos(sine/10),-11.75+0*math.cos(sine/10))*CFrame.Angles(math.rad(90+0*math.cos(sine/10)),math.rad(0+45*math.sin(sine/10)),math.rad(0+0*math.cos(sine/10))),.2) 
RH.C0=RH.C0:Lerp(CFrame.new(0+0*math.cos(sine/10),1.5+0*math.cos(sine/10),-10+0*math.cos(sine/10))*CFrame.Angles(math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10))),.2) 
LH.C0=LH.C0:Lerp(CFrame.new(-1+0*math.cos(sine/10),0.5+0*math.cos(sine/10),-10+0*math.cos(sine/10))*CFrame.Angles(math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10)),math.rad(90+0*math.cos(sine/10))),.2)
hat("Juggernaut's Chaingun",'Left Arm',CFrame.new(0,0,0),CFrame.new(0+0*math["cos"](sine/10),-1.5+0*math["cos"](sine/10),1+0*math["cos"](sine/10))*CFrame.Angles(math.rad(180+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10))),false)
hat('Pal Hair','Right Leg',CFrame.new(0,0,0),CFrame.new(0+0*math["cos"](sine/10),0.25+0*math["cos"](sine/10),-1.75+0*math["cos"](sine/10))*CFrame.Angles(math.rad(306+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10))),true)
hat('Kate Hair','Right Leg',CFrame.new(0,0,0),CFrame.new(0+0*math["cos"](sine/10),-0.25+0*math["cos"](sine/10),-1.75+0*math["cos"](sine/10))*CFrame.Angles(math.rad(54+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10))),true)
hat('Pink Hair','Left Leg',CFrame.new(0,0,0),CFrame.new(0+0*math["cos"](sine/10),-0.25+0*math["cos"](sine/10),-1.75+0*math["cos"](sine/10))*CFrame.Angles(math.rad(54+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10))),true)
hat('LavanderHair','Left Leg',CFrame.new(0,0,0),CFrame.new(0+0*math["cos"](sine/10),0.25+0*math["cos"](sine/10),-1.75+0*math["cos"](sine/10))*CFrame.Angles(math.rad(-54+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10))),true)
elseif Root.Velocity.Magnitude < 20 then -- walk
NECK.C0=NECK.C0:Lerp(CFrame.new(0+0*math.cos(sine/10),1+0*math.cos(sine/10),0+0*math.cos(sine/10))*CFrame.Angles(math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10))),.2) 
RJ.C0=RJ.C0:Lerp(CFrame.new(0+0*math.cos(sine/10),-12+0*math.cos(sine/10),0+0*math.cos(sine/10))*CFrame.Angles(math.rad(90+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10))),.2) 
RS.C0=RS.C0:Lerp(CFrame.new(0+0*math.cos(sine/10),0.5+0*math.cos(sine/10),-10+0*math.cos(sine/10))*CFrame.Angles(math.rad(90+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10))),.2) 
LS.C0=LS.C0:Lerp(CFrame.new(0+0*math.cos(sine/10),0.5+0*math.cos(sine/10),-11.75+0*math.cos(sine/10))*CFrame.Angles(math.rad(90+0*math.cos(sine/10)),math.rad(0+45*math.sin(sine/10)),math.rad(0+0*math.cos(sine/10))),.2) 
RH.C0=RH.C0:Lerp(CFrame.new(0+0*math.cos(sine/10),1.5+0*math.cos(sine/10),-10+0*math.cos(sine/10))*CFrame.Angles(math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10))),.2) 
LH.C0=LH.C0:Lerp(CFrame.new(-1+0*math.cos(sine/10),0.5+0*math.cos(sine/10),-10+0*math.cos(sine/10))*CFrame.Angles(math.rad(0+0*math.cos(sine/10)),math.rad(0+0*math.cos(sine/10)),math.rad(90+0*math.cos(sine/10))),.2)
hat("Juggernaut's Chaingun",'Left Arm',CFrame.new(0,0,0),CFrame.new(0+0*math["cos"](sine/10),-1.5+0*math["cos"](sine/10),1+0*math["cos"](sine/10))*CFrame.Angles(math.rad(180+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10))),false)
hat('Pal Hair','Right Leg',CFrame.new(0,0,0),CFrame.new(0+0*math["cos"](sine/10),0.25+0*math["cos"](sine/10),-1.75+0*math["cos"](sine/10))*CFrame.Angles(math.rad(306+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10))),true)
hat('Kate Hair','Right Leg',CFrame.new(0,0,0),CFrame.new(0+0*math["cos"](sine/10),-0.25+0*math["cos"](sine/10),-1.75+0*math["cos"](sine/10))*CFrame.Angles(math.rad(54+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10))),true)
hat('Pink Hair','Left Leg',CFrame.new(0,0,0),CFrame.new(0+0*math["cos"](sine/10),-0.25+0*math["cos"](sine/10),-1.75+0*math["cos"](sine/10))*CFrame.Angles(math.rad(54+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10))),true)
hat('LavanderHair','Left Leg',CFrame.new(0,0,0),CFrame.new(0+0*math["cos"](sine/10),0.25+0*math["cos"](sine/10),-1.75+0*math["cos"](sine/10))*CFrame.Angles(math.rad(-54+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10)),math.rad(0+0*math["cos"](sine/10))),true)
elseif Root.Velocity.Magnitude > 20 then -- run
--run clerp here
end
srv.RenderStepped:Wait()
end
end)()
--Created using Nexo Animator V4
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "funny map stealer."            
            })
        end
        
    }
})

Page.Button({
    Text = "Car",
    Callback = function()
--made by ferretboii#2398/catboy19jan2038
-- Gui to Lua
-- Version: 3.2

-- Instances:

local Template = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local Frame_2 = Instance.new("Frame")
local RUN = Instance.new("TextButton")
local ARROW = Instance.new("TextButton")
local NAME = Instance.new("TextButton")

--Properties:

Template.Name = "Template"
Template.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
Template.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Frame.Parent = Template
Frame.BackgroundColor3 = Color3.fromRGB(79, 79, 79)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.0362374708, 0, 0.482208639, 0)
Frame.Size = UDim2.new(0, 174, 0, 28)

Frame_2.Parent = Frame
Frame_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Frame_2.BorderSizePixel = 0
Frame_2.Position = UDim2.new(0, 0, 1, 0)
Frame_2.Size = UDim2.new(0, 174, 0, 72)

RUN.Name = "RUN"
RUN.Parent = Frame_2
RUN.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
RUN.BorderColor3 = Color3.fromRGB(255, 255, 0)
RUN.BorderSizePixel = 0
RUN.Position = UDim2.new(0.157653749, 0, 0.222330347, 0)
RUN.Size = UDim2.new(0, 118, 0, 38)
RUN.Font = Enum.Font.PatrickHand
RUN.Text = "Car OFF"
RUN.TextColor3 = Color3.fromRGB(0, 0, 0)
RUN.TextSize = 50.000

ARROW.Name = "ARROW"
ARROW.Parent = Frame
ARROW.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ARROW.BackgroundTransparency = 1.000
ARROW.BorderSizePixel = 0
ARROW.Position = UDim2.new(0.834664106, 0, 0, 0)
ARROW.Size = UDim2.new(0, 28, 0, 28)
ARROW.Font = Enum.Font.PatrickHand
ARROW.Text = "X"
ARROW.TextColor3 = Color3.fromRGB(0, 0, 0)
ARROW.TextSize = 30.000

NAME.Name = "NAME"
NAME.Parent = Frame
NAME.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
NAME.BackgroundTransparency = 1.000
NAME.BorderSizePixel = 0
NAME.Position = UDim2.new(0.369146883, 0, 0, 0)
NAME.Size = UDim2.new(0, 28, 0, 28)
NAME.Font = Enum.Font.PatrickHand
NAME.Text = "Car Script"
NAME.TextColor3 = Color3.fromRGB(0, 0, 0)
NAME.TextSize = 23.000

-- Scripts:

local function ICEIM_fake_script() -- RUN.LocalScript 
	local script = Instance.new('LocalScript', RUN)

	local Toggled = false
	local Anim, track, hum
	
	Anim = Instance.new("Animation")
	Anim.AnimationId = "rbxassetid://179224234"
	
	script.Parent.MouseButton1Click:Connect(function()
		if not track or hum ~= game.Players.LocalPlayer.Character.Humanoid  then 
			pcall(game.Destroy, track)
			track = game.Players.LocalPlayer.Character.Humanoid:LoadAnimation(Anim)
			hum = game.Players.LocalPlayer.Character.Humanoid
		end
	
		if Toggled == false then
			game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = 69
			script.Parent.Text = "Car ON"
			track:Play(.1, 1, 1)
			Toggled = true
		elseif Toggled == true then
			track:Stop()
			script.Parent.Text = "Car OFF"
			game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = 16
			Toggled = false
		end
	end)
end
coroutine.wrap(ICEIM_fake_script)()
local function XOEAVM_fake_script() -- RUN.RGB_Script 
	local script = Instance.new('LocalScript', RUN)

	-- Made By Auradomix --
	-- Visit My Channel On YT and Twitch = @Auradomix
	
	-- PUT "RGB_GUI" ON STARTERGUI
	-- PUT THIS ON ANY FRAME OR BUTTON OR BOX OR ...
	-- ONLY ADAPTED FOR GUI, Please Referance To my Other Model For Brick
	
	-- Local Script = Client
	-- Script = Server
	
	-- For more fast Server Put them as a Local Scrpit for Gui
	
	while wait() do
		script.Parent.BackgroundColor3 = Color3.new(255/255,0/255,0/255)
		for i = 0,255,10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(255/255,i/255,0/255)
		end
		for i = 255,0,-10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(i/255,255/255,0/255)
		end
		for i = 0,255,10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(0/255,255/255,i/255)
		end
		for i = 255,0,-10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(0/255,i/255,255/255)
		end
		for i = 0,255,10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(i/255,0/255,255/255)
		end
		for i = 255,0,-10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(255/255,0/255,i/255)
		end
	end
end
coroutine.wrap(XOEAVM_fake_script)()
local function WMHNT_fake_script() -- Frame.RGB_Script 
	local script = Instance.new('LocalScript', Frame)

	-- Made By Auradomix --
	-- Visit My Channel On YT and Twitch = @Auradomix
	
	-- PUT "RGB_GUI" ON STARTERGUI
	-- PUT THIS ON ANY FRAME OR BUTTON OR BOX OR ...
	-- ONLY ADAPTED FOR GUI, Please Referance To my Other Model For Brick
	
	-- Local Script = Client
	-- Script = Server
	
	-- For more fast Server Put them as a Local Scrpit for Gui
	
	while wait() do
		script.Parent.BackgroundColor3 = Color3.new(255/255,0/255,0/255)
		for i = 0,255,10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(255/255,i/255,0/255)
		end
		for i = 255,0,-10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(i/255,255/255,0/255)
		end
		for i = 0,255,10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(0/255,255/255,i/255)
		end
		for i = 255,0,-10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(0/255,i/255,255/255)
		end
		for i = 0,255,10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(i/255,0/255,255/255)
		end
		for i = 255,0,-10 do
			wait()
			script.Parent.BackgroundColor3 = Color3.new(255/255,0/255,i/255)
		end
	end
end
coroutine.wrap(WMHNT_fake_script)()
local function XDCFV_fake_script() -- Frame.Smooth GUI Dragging 
	local script = Instance.new('LocalScript', Frame)

	local UserInputService = game:GetService("UserInputService")
	local runService = (game:GetService("RunService"));
	
	local gui = script.Parent
	
	local dragging
	local dragInput
	local dragStart
	local startPos
	
	function Lerp(a, b, m)
		return a + (b - a) * m
	end;
	
	local lastMousePos
	local lastGoalPos
	local DRAG_SPEED = (8); -- // The speed of the UI darg.
	function Update(dt)
		if not (startPos) then return end;
		if not (dragging) and (lastGoalPos) then
			gui.Position = UDim2.new(startPos.X.Scale, Lerp(gui.Position.X.Offset, lastGoalPos.X.Offset, dt * DRAG_SPEED), startPos.Y.Scale, Lerp(gui.Position.Y.Offset, lastGoalPos.Y.Offset, dt * DRAG_SPEED))
			return 
		end;
	
		local delta = (lastMousePos - UserInputService:GetMouseLocation())
		local xGoal = (startPos.X.Offset - delta.X);
		local yGoal = (startPos.Y.Offset - delta.Y);
		lastGoalPos = UDim2.new(startPos.X.Scale, xGoal, startPos.Y.Scale, yGoal)
		gui.Position = UDim2.new(startPos.X.Scale, Lerp(gui.Position.X.Offset, xGoal, dt * DRAG_SPEED), startPos.Y.Scale, Lerp(gui.Position.Y.Offset, yGoal, dt * DRAG_SPEED))
	end;
	
	gui.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = gui.Position
			lastMousePos = UserInputService:GetMouseLocation()
	
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)
	
	gui.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			dragInput = input
		end
	end)
	
	runService.Heartbeat:Connect(Update)
end
coroutine.wrap(XDCFV_fake_script)()
local function MAOTEA_fake_script() -- ARROW.LocalScript 
	local script = Instance.new('LocalScript', ARROW)

	script.Parent.MouseButton1Click:Connect(function()
		script.Parent.Parent.Frame.Visible = not script.Parent.Parent.Frame.Visible
	end)
	
end
coroutine.wrap(MAOTEA_fake_script)()
local function WZVKWAF_fake_script() -- NAME.LocalScript 
	local script = Instance.new('LocalScript', NAME)

	script.Parent.MouseButton1Click:Connect(function()
		script.Parent.Parent.Frame.Visible = not script.Parent.Parent.Frame.Visible
	end)
	
end
coroutine.wrap(WZVKWAF_fake_script)()
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "funni car."            
            })
        end
        
    }
})

Page2.Button({
    Text = "Classic Animations",
    Callback = function()
        game.Players.LocalPlayer.Character:BreakJoints()
        game.Players.LocalPlayer.Character=nil
        Connection = game.Workspace.DescendantAdded:Connect(function(c)
            if c.Name == "Animate" then
                c.Disabled=true        
            end
        end)
        repeat wait() until game.Players.LocalPlayer.Character
        Char = game.Players.LocalPlayer.Character
        Died = game.Players.LocalPlayer.Character:WaitForChild("Humanoid").Died:Connect(function()
            Connection:Disconnect()
            Died:Disconnect()
        end)
        wait(.1)
        function waitForChild(parent, childName)
     local child = parent:findFirstChild(childName)
     if child then return child end
     while true do
      child = parent.ChildAdded:wait()
      if child.Name==childName then return child end
     end
     end
     
     -- ANIMATION
     
     -- declarations
     
     local Figure = game.Players.LocalPlayer.Character
     local Torso = waitForChild(Figure, "Torso")
     local RightShoulder = waitForChild(Torso, "Right Shoulder")
     local LeftShoulder = waitForChild(Torso, "Left Shoulder")
     local RightHip = waitForChild(Torso, "Right Hip")
     local LeftHip = waitForChild(Torso, "Left Hip")
     local Neck = waitForChild(Torso, "Neck")
     local Humanoid = waitForChild(Figure, "Humanoid")
     local pose = "Standing"
     
     local toolAnim = "None"
     local toolAnimTime = 0
     
     local jumpMaxLimbVelocity = 0.75
     
     -- functions
     
     function onRunning(speed)
     if speed>0 then
      pose = "Running"
     else
      pose = "Standing"
     end
     end
     
     function onDied()
     pose = "Dead"
     end
     
     function onJumping()
     pose = "Jumping"
     end
     
     function onClimbing()
     pose = "Climbing"
     end
     
     function onGettingUp()
     pose = "GettingUp"
     end
     
     function onFreeFall()
     pose = "FreeFall"
     end
     
     function onFallingDown()
     pose = "FallingDown"
     end
     
     function onSeated()
     pose = "Seated"
     end
     
     function onPlatformStanding()
     pose = "PlatformStanding"
     end
     
     function onSwimming(speed)
     if speed>0 then
      pose = "Running"
     else
      pose = "Standing"
     end
     end
     
     function moveJump()
     RightShoulder.MaxVelocity = jumpMaxLimbVelocity
     LeftShoulder.MaxVelocity = jumpMaxLimbVelocity
      RightShoulder:SetDesiredAngle(3.14)
     LeftShoulder:SetDesiredAngle(-3.14)
     RightHip:SetDesiredAngle(0)
     LeftHip:SetDesiredAngle(0)
     end
     
     
     -- same as jump for now
     
     function moveFreeFall()
     RightShoulder.MaxVelocity = jumpMaxLimbVelocity
     LeftShoulder.MaxVelocity = jumpMaxLimbVelocity
     RightShoulder:SetDesiredAngle(3.14)
     LeftShoulder:SetDesiredAngle(-3.14)
     RightHip:SetDesiredAngle(0)
     LeftHip:SetDesiredAngle(0)
     end
     
     function moveSit()
     RightShoulder.MaxVelocity = 0.15
     LeftShoulder.MaxVelocity = 0.15
     RightShoulder:SetDesiredAngle(3.14 /2)
     LeftShoulder:SetDesiredAngle(-3.14 /2)
     RightHip:SetDesiredAngle(3.14 /2)
     LeftHip:SetDesiredAngle(-3.14 /2)
     end
     
     function getTool()
     for _, kid in ipairs(Figure:GetChildren()) do
      if kid.className == "Tool" then return kid end
     end
     return nil
     end
     
     function getToolAnim(tool)
     for _, c in ipairs(tool:GetChildren()) do
      if c.Name == "toolanim" and c.className == "StringValue" then
       return c
      end
     end
     return nil
     end
     
     function animateTool()
     
     if (toolAnim == "None") then
      RightShoulder:SetDesiredAngle(1.57)
      return
     end
     
     if (toolAnim == "Slash") then
      RightShoulder.MaxVelocity = 0.5
      RightShoulder:SetDesiredAngle(0)
      return
     end
     
     if (toolAnim == "Lunge") then
      RightShoulder.MaxVelocity = 0.5
      LeftShoulder.MaxVelocity = 0.5
      RightHip.MaxVelocity = 0.5
      LeftHip.MaxVelocity = 0.5
      RightShoulder:SetDesiredAngle(1.57)
      LeftShoulder:SetDesiredAngle(1.0)
      RightHip:SetDesiredAngle(1.57)
      LeftHip:SetDesiredAngle(1.0)
      return
     end
     end
     
     function move(time)
     local amplitude
     local frequency
      
     if (pose == "Jumping") then
      moveJump()
      return
     end
     
     if (pose == "FreeFall") then
      moveFreeFall()
      return
     end
     
     if (pose == "Seated") then
      moveSit()
      return
     end
     
     local climbFudge = 0
     
     if (pose == "Running") then
        if (RightShoulder.CurrentAngle > 1.5 or RightShoulder.CurrentAngle < -1.5) then
       RightShoulder.MaxVelocity = jumpMaxLimbVelocity
      else  
       RightShoulder.MaxVelocity = 0.15
      end
      if (LeftShoulder.CurrentAngle > 1.5 or LeftShoulder.CurrentAngle < -1.5) then
       LeftShoulder.MaxVelocity = jumpMaxLimbVelocity
      else  
       LeftShoulder.MaxVelocity = 0.15
      end
      amplitude = 1
      frequency = 9
     elseif (pose == "Climbing") then
      RightShoulder.MaxVelocity = 0.5
      LeftShoulder.MaxVelocity = 0.5
      amplitude = 1
      frequency = 9
      climbFudge = 3.14
     else
      amplitude = 0.1
      frequency = 1
     end
     
     desiredAngle = amplitude * math.sin(time*frequency)
     
     RightShoulder:SetDesiredAngle(desiredAngle + climbFudge)
     LeftShoulder:SetDesiredAngle(desiredAngle - climbFudge)
     RightHip:SetDesiredAngle(-desiredAngle)
     LeftHip:SetDesiredAngle(-desiredAngle)
     
     
     local tool = getTool()
     
     if tool then
     
      animStringValueObject = getToolAnim(tool)
     
      if animStringValueObject then
       toolAnim = animStringValueObject.Value
       -- message recieved, delete StringValue
       animStringValueObject.Parent = nil
       toolAnimTime = time + .3
      end
     
      if time > toolAnimTime then
       toolAnimTime = 0
       toolAnim = "None"
      end
     
      animateTool()
     
      
     else
      toolAnim = "None"
      toolAnimTime = 0
     end
     end
     
     
     -- connect events
     
     Humanoid.Died:connect(onDied)
     Humanoid.Running:connect(onRunning)
     Humanoid.Jumping:connect(onJumping)
     Humanoid.Climbing:connect(onClimbing)
     Humanoid.GettingUp:connect(onGettingUp)
     Humanoid.FreeFalling:connect(onFreeFall)
     Humanoid.FallingDown:connect(onFallingDown)
     Humanoid.Seated:connect(onSeated)
     Humanoid.PlatformStanding:connect(onPlatformStanding)
     Humanoid.Swimming:connect(onSwimming)
     -- main program
     
     local runService = game:service("RunService");
     
     while Figure.Parent~=nil do
     local _, time = wait(0.1)
     move(time)
     end
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "Classic Animations."            
            })
        end
        
    }
})

Page.Button({
    Text = "Stand",
    Callback = function()
--[[
leaked by the people
So this is the list of hats you need to be wearing (they are all free to get) :
https://www.roblox.com/catalog/451220849/Lavender-Updo
https://www.roblox.com/catalog/63690008/Pal-Hair
https://www.roblox.com/catalog/48474294/ROBLOX-Girl-Hair (this one is in a bundle) - https://www.roblox.com/bundles/282/ROBLOX-Girl 	
https://www.roblox.com/catalog/48474313/Red-Roblox-Cap
https://www.roblox.com/catalog/62234425/Brown-Hair
https://www.roblox.com/catalog/62724852/Chestnut-Bun (this one is in a bundle) - https://www.roblox.com/bundles/239/Woman
https://www.roblox.com/catalog/4819740796/Robox
also the last hat is the head of the stand]]--
 
 --[[Controls:
 Q - Summon/Unsummon
 E - Barrage - Throws Punches
 R - Mech Legs Walk - (when you spam the key) press "Q" to reset the stand
 T - Blackhole - Sucks people and things in a blackhole
 F - Arm Teleport - Your arm goes forward and teleports you
 G - Long Neck - Makes your neck very long
 H - Cape - Stand transforms into a cape and makes you quicker
 J - Dance - The stand starts dancing next to you
 Z - Stand Idle 1 - The stand stays at the same pose
 X - Stand Idle 2 - You walk very slow on top of the stand
 C - Dash Forward - The stand gives you a massive push and boost you forward
 V - Throne - The stand transforms into a throne for you
 B - Stand Idle 3 - The stand stands with its arms crossed behind you
 Those are pretty much the moves of the Fe Stand...]]--


 for i,v in pairs(game:GetService("Players").LocalPlayer.Character:GetChildren()) do
    if v:IsA("Accessory") then
    print(v)
    end
    end
        
        for i,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
        if v:IsA("Accessory") and v.Handle:FindFirstChild("SpecialMesh") then
        ag = v.Handle:FindFirstChild("SpecialMesh")
        ag:Destroy()
        end
        end
        
        for i,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
        if v:IsA("Accessory") and v.Handle:FindFirstChild("Mesh") then
        ag = v.Handle:FindFirstChild("Mesh")
        ag:Destroy()
        end
        end
    
        wait()
        
        for _,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
            if v:IsA("Accessory") then
                v.Handle.Transparency = 1
                v.Handle.Parent = workspace
                v.Parent = workspace
            end
        end
    
        wait(0.1)
        
        game.Players.LocalPlayer.Character:BreakJoints()
        
        wait(7)
        
    local unanchoredparts = {}
    local movers = {}
     local tog = true
     local move = false
    local Player = game:GetService("Players").LocalPlayer
    local Character = Player.Character
    local mov = {};
    local mov2 = {};
    
    local Head = "MeshPartAccessory" --press f9 and find the hat that looks like a heads name and put it here
    local x = -2   --Edit Position for head
    local y = 2.8   --Edit Position for head x2
    local z = 3 --Edit Position for head x3
    
    
    local Hats = {rightarm = Character:WaitForChild("Hat1"),
                 leftarm  = Character:WaitForChild("Pal Hair"),
                 rightleg = Character:WaitForChild("LavanderHair"),
                 leftleg  = Character:WaitForChild("Pink Hair"),
                  torso1   = Character:WaitForChild("Robloxclassicred"),
                 torso2   = Character:WaitForChild("Kate Hair"),
                 
    }
    
    for i,v in next, Hats do
    v.Handle.AccessoryWeld:Remove()
    for _,mesh in next, v:GetDescendants() do
    if mesh:IsA("Mesh") or mesh:IsA("SpecialMesh") then
    mesh:Remove()
    end
    end
    end
    local Network = coroutine.create(function()
    while true do
    game:GetService("RunService").Heartbeat:Wait()
    settings().Physics.AllowSleep = false
    game:GetService("Players").LocalPlayer.MaximumSimulationRadius = math.pow(math.huge,math.huge)*math.huge
    game:GetService("Players").LocalPlayer.SimulationRadius = math.pow(math.huge,math.huge)*math.huge
    end
    end)
    coroutine.resume(Network)
    
    function ftp(str)
        local pt = {};
        if str ~= 'me' and str ~= 'random' then
            for i, v in pairs(game.Players:GetPlayers()) do
                if v.Name:lower():find(str:lower()) then
                    table.insert(pt, v);
                end
            end
        elseif str == 'me' then
            table.insert(pt, plr);
        elseif str == 'random' then
            table.insert(pt, game.Players:GetPlayers()[math.random(1, #game.Players:GetPlayers())]);
        end
        return pt;
    end
    
    Character.Head.Transparency = 0
    Character.Head.face:Remove()
    Character.Torso.Transparency = 0
    Character["Right Arm"].Transparency = 0
    Character["Left Arm"].Transparency = 0
    Character["Right Leg"].Transparency = 0
    Character["Left Leg"].Transparency = 0
    local function align(i,v)
    local att0 = Instance.new("Attachment", i)
    att0.Position = Vector3.new(0,0,0)
    local att1 = Instance.new("Attachment", v)
    att1.Position = Vector3.new(0,0,0)
    local AP = Instance.new("AlignPosition", i)
    AP.Attachment0 = att0
    AP.Attachment1 = att1
    AP.RigidityEnabled = false
    AP.ReactionForceEnabled = false
    AP.ApplyAtCenterOfMass = true
    AP.MaxForce = 9999999
    AP.MaxVelocity = math.huge
    AP.Responsiveness = 65
    local AO = Instance.new("AlignOrientation", i)
    AO.Attachment0 = att0
    AO.Attachment1 = att1
    AO.ReactionTorqueEnabled = true
    AO.PrimaryAxisOnly = false
    AO.MaxTorque = 9999999
    AO.MaxAngularVelocity = math.huge
    AO.Responsiveness = 50
    end
    align(Hats.torso1.Handle, Character["Torso"])
    align(Hats.torso2.Handle, Character["Torso"])
    align(Hats.rightarm.Handle, Character["Torso"])
    align(Hats.leftarm.Handle, Character["Torso"])
    align(Hats.rightleg.Handle, Character["Torso"])
    align(Hats.leftleg.Handle, Character["Torso"])
    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
    
    Character:WaitForChild("Torso"):FindFirstChild("Attachment").Name = "Attachment1"
    Character:WaitForChild("Torso"):FindFirstChild("Attachment").Name = "Attachment2"
    Character:WaitForChild("Torso"):FindFirstChild("Attachment").Name = "Attachment3"
    Character:WaitForChild("Torso"):FindFirstChild("Attachment").Name = "Attachment4"
    Character:WaitForChild("Torso"):FindFirstChild("Attachment").Name = "Attachment5"
    
    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
    Character:WaitForChild(Head).Handle.AccessoryWeld:Remove()
    local alignpos = Instance.new("AlignPosition", Character)
    local alignorien = Instance.new("AlignOrientation", Character)
    local att1 = Instance.new("Attachment", Character:WaitForChild(Head).Handle)
    local att2 = Instance.new("Attachment", Character:WaitForChild("Head"))
    alignpos.Attachment0 = att1
    alignpos.Attachment1 = att2
    alignpos.RigidityEnabled = false
    alignpos.ReactionForceEnabled = false
    alignpos.ApplyAtCenterOfMass = true
    alignpos.MaxForce = 99999999
    alignpos.MaxVelocity = math.huge
    alignpos.Responsiveness = 65
    alignorien.Attachment0 = att1
    alignorien.Attachment1 = att2
    alignorien.ReactionTorqueEnabled = true
    alignorien.PrimaryAxisOnly = false
    alignorien.MaxTorque = 99999999
    alignorien.MaxAngularVelocity = math.huge
    alignorien.Responsiveness = 50
    att2.Position = Vector3.new(x,y,z)
    
    
    
    
    
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "z" then
         if toggle == false then
             
             Character.Humanoid.WalkSpeed = 16
             
             Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
                Character.Humanoid.HipHeight = 0
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    
                    
                    
                    att2.Position = Vector3.new(x,y,z)
               toggle = true
     else
                Character.Humanoid.HipHeight = 0
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.1,1.9,-0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,1.9,0.7)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-2.9,2.2,-1)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,1.9,0.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.1,0.1,0)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,-0.1,0.7)
                
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(95,50,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(70,0,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(90,50,10)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,50,20)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(95,50,0)
                    
               
     
            
    
                    
                att2.Position = Vector3.new(-1.7,y,0.3)
                toggle = false
            end
        end
    end)
    
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "x" then
         if toggle == false then
             
    
              
             Character.Humanoid.WalkSpeed = 16
             
             Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
                Character.Humanoid.HipHeight = 0
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    
                    
                    
                    att2.Position = Vector3.new(x,y,z)
               toggle = true
     else
         
           
         Character.Humanoid.WalkSpeed = 5
                Character.Humanoid.HipHeight = 6
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,-5.9,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,-5.9,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,-3.9,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.2,-3.9,-0.3)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-7.9,-0.3)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-7.9,0)
                
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(70,0,20)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(70,0,-20)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    
                    
               
     
            
    
                    
                att2.Position = Vector3.new(0,-5.5,0)
                toggle = false
            end
        end
    end)
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "c" then
         if tog == true then
             
             tog = false
             
             Character.Humanoid.HipHeight = 0
             
             att2.Position = Vector3.new(0,0.5,1)
             
              Character.Humanoid.WalkSpeed = 16
              
               Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
             Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,1.5)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,1.5)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,0.6,0.5)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,0.6,0.5)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-0.5,3.2)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-0.5,3.2)
                
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(-35,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(-10,0,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(-10,0,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(0,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(10,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(-35,0,0)
                    
        wait(0.5)
    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,1.5)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,1.5)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,0.6,1)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,0.6,1)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-0.5,3.2)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-0.5,3.2)
                    
        wait(0.1)
        
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,1.5)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,1.5)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,0.6,2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,0.6,2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-0.5,3.2)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-0.5,3.2)
                
                wait(0.1)
                
                Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,1.5)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,0.6,0.5)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,0.6,0.5)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-0.5,3.2)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-0.5,3.2)
                
                wait(0.1)
                
                game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame.lookVector*300
                
                    wait(0.5)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    
                    att2.Position = Vector3.new(x,y,z)
                    wait(1)
                tog = true
            end
        end
    end)
    
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "q" then
         if toggle == false then
             
             Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
             Character.Humanoid.WalkSpeed = 16
             
                Character.Humanoid.HipHeight = 0
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    
                    
                    
                    att2.Position = Vector3.new(x,y,z)
               toggle = true
     else
         Character.Humanoid.WalkSpeed = 16
         Character.Humanoid.HipHeight = 0
                Character.Humanoid.HipHeight = 0
              Character:WaitForChild("Torso").Attachment.Position = Vector3.new(500,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(500,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(500,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(500,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(200,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(500,0,3)
                
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(-35,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(-10,0,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(-10,0,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(0,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(10,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(-35,0,0)
                    
                    
               
     
            
    
                    
                att2.Position = Vector3.new(500,0.5,1)
                toggle = false
            end
        end
    end)
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "v" then
         if toggle == false then
             
             Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
                Character.Humanoid.HipHeight = 0
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    
                    
                    
                    att2.Position = Vector3.new(x,y,z)
               toggle = true
     else
               
                
                Character.Humanoid.HipHeight = 1.8
                
                wait(0.2)
                
                
                Character.Humanoid.Sit = true
                
                Character.Torso.Anchored = true
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,1)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,1)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,-0.5,-0.5)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,-0.5,-0.5)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-1)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-1)
                
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,0,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,0,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(0,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(0,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    
                    
               
     
            
    
                    
                att2.Position = Vector3.new(0,-5,-1)
                toggle = false
            end
        end
    end)
    
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "e" then
         if tog == true then
             
             Character.Humanoid.HipHeight = 0
             
             Character.Humanoid.WalkSpeed = 5
             
             Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
             att2.Position = Vector3.new(0,0.6,-3.3)
             
             tog = false
             
    
        
    
               Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,0.5,-2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,0.5,-6)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-3)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,20,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-40,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    
                wait(.06)
                
                att2.Position = Vector3.new(0.3,0.6,-3.3)
                
                    
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,15,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-40,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                
                wait(.08)
                
                att2.Position = Vector3.new(-0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,15,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                
                 wait(.08)
                 
                 att2.Position = Vector3.new(0.5,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,40,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-15,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    
                wait(.08)
                
                att2.Position = Vector3.new(-0.3,0.6,-3.3)
                
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                
    
                 wait(.08)
                 
                 att2.Position = Vector3.new(0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                            Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                
             
                wait(.07)
                
                att2.Position = Vector3.new(-0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                
                 wait(.07)
                 
                 att2.Position = Vector3.new(0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                            Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                
                wait(.07)
                
                att2.Position = Vector3.new(-0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                
                 wait(.07)
                 
                 att2.Position = Vector3.new(0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                            Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                
                wait(.07)
                
                att2.Position = Vector3.new(-0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,0.5,-1.5)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                
                 wait(.07)
                 
                 att2.Position = Vector3.new(0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                            Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                
                wait(.07)
                
                att2.Position = Vector3.new(-0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                
                 wait(.07)
                 
                 att2.Position = Vector3.new(0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                            Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                
                wait(.07)
                
                att2.Position = Vector3.new(-0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                                
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                
                 wait(.06)
                 
                 att2.Position = Vector3.new(0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                            Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                
                wait(.06)
                
                att2.Position = Vector3.new(-0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    
                 wait(.06)
                 
                 att2.Position = Vector3.new(0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                            Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                
                wait(.06)
                
                att2.Position = Vector3.new(-0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5) 
                
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                
                wait(.06)
                
                att2.Position = Vector3.new(0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)
                
                                            Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,-20,0)
                
                wait(.06)
                
                att2.Position = Vector3.new(-0.3,0.6,-3.3)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1,0.5,-2)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.8,0.5,-8)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2.5)    
                
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,30,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-30,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(110,20,0)
                    
                    wait(0.1)
                   
                   att2.Position = Vector3.new(0.3,0.6,-2.5)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-2.7)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-2.5)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,0,-2.5)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,0,-2.5)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-2)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-2)    
                
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,5,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(65,-2,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(130,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(130,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,5,0)
                    
                    wait(0.3)
                    
                                   att2.Position = Vector3.new(0,3.6,-3.5)
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,3,-3.6)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,3,-3.5)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,3,-3.5)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,3.7,-4.6)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,1,-3.5)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,1,-3.5)    
                
                                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,5,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(70,0,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(-55,-2,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,5,0)
                    
                    
                   wait(1)
                
                
             wait()
               
                 
              Character.Humanoid.Sit = false
             
             Player.Character.Humanoid.WalkSpeed = 16
             
             Character.Torso.Anchored = false
             
             att2.Position = Vector3.new(x,y,z)
             
                Character.Humanoid.HipHeight = 0
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    
                    
                wait(1)
                tog = true
                    
            end
        end
    end)
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "f" then
         if tog == true then
             
             Character.Humanoid.WalkSpeed = 4
             
             Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
            toggle = false
                    
                    att2.Position = Vector3.new(x,y,z)
                    
               
                 Character.Humanoid.HipHeight = 0
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                    wait(0.1)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    
                    wait()
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    
                     Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2.5,2.5)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
               
               wait(1)
               
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2.5,-50)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
                
                wait(0.1)
     
            
            
            Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
                
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
    
    
                     Character:SetPrimaryPartCFrame(Character:GetPrimaryPartCFrame()*CFrame.new(0, 0, -50))
                     
                     Character.Humanoid.WalkSpeed = 16
             
                     
                att2.Position = Vector3.new(x,y,z)
                wait(1)
                tog = true
            end
        end
    end)
    
    
    
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "h" then
         if toggle == false then
             
             Character.Humanoid.WalkSpeed = 16
             
             Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
                Character.Humanoid.HipHeight = 0
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    
                    
                    
                    att2.Position = Vector3.new(x,y,z)
               toggle = true
     else
         
          Character.Humanoid.WalkSpeed = 30
                Character.Humanoid.HipHeight = 0
              Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,1.5)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,1.5)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.5,-2.2,5.4)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.5,-2.2,5.4)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-1.5,3.2)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-1.5,3.2)
                
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(-50,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(-10,0,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(-10,0,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(-30,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(-30,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(-50,0,0)
                    
                    
               
     
            
    
                    
                att2.Position = Vector3.new(0,-20,1)
                toggle = false
            end
        end
    end)
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "g" then
         if toggle == false then
             
             Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
                Character.Humanoid.HipHeight = 0
                 Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    
                    
                    
                    att2.Position = Vector3.new(x,y,z)
               toggle = true
     else
               
                
                Character.Humanoid.HipHeight = 0
                
                wait(0.2)
                
                
                Character.Humanoid.Sit = false
                
                Character.Torso.Anchored = false
                
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(0,2,0)
                Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0,4,0)
                Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(0,6,0)
                Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0,8,0)
                Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(0,10,0)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0,12,0)
                
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    
                    
               
     
            
    
                    
                att2.Position = Vector3.new(0,12.8,0)
                toggle = false
            end
        end
    end)
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "b" then
         if toggle == false then
             
             Character.Humanoid.WalkSpeed = 16
             
             Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
                Character.Humanoid.HipHeight = 0
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                  Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
               
                    
                    
                    
                    att2.Position = Vector3.new(x,y,z)
               toggle = true
     else
                Character.Humanoid.HipHeight = 0
                Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-0.4,2.3,2.6)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(0.5,2.3,2.5)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,0,3)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,0,2.7)
                
                
               
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,90,20)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,80,-20)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,-10,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,0)
            
    
                    
                att2.Position = Vector3.new(0,2.8,3)
                toggle = false
            end
        end
    end)
    
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "r" then
         if toggle == false then
             Character.Humanoid.WalkSpeed = 0
              
              Character.Humanoid.HipHeight = 2.5
              
              att2.Position = Vector3.new(0,0.5,1)
              
    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-1.5,-5,0)
    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(1.5,-5,-1.5)
    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,-2,0)
    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,-2,-1)
    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-1.5,-3.5,0)
    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(1.5,-3.5,-1)
              
    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(0,0,0)
    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(40,0,0)
    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(65,0,0)
    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(160,0,0)
    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(140,0,0)
    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(0,0,0)
    
    wait(.1)
    
    
    
    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(0,0,0)
    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(40,0,0)
    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(65,0,0)
    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(160,0,-0.5)
    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(140,0,0)
    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(0,0,0)
    
    wait(.2)
    game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame.lookVector*100
    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-1.5,-5,-1.5)
    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(1.5,-5,0)
    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,-2,-1)
    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,-2,0)
    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-1.5,-3.5,-1)
    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(1.5,-3.5,0)
    wait()
             
             
              Character.Humanoid.WalkSpeed = 0
              
              Character.Humanoid.HipHeight = 2.5
        
    
    toggle = true
    
    else
    
              
              att2.Position = Vector3.new(0,0.5,1)
              
     Character.Humanoid.WalkSpeed = 0
              
              Character.Humanoid.HipHeight = 2.5
        
    wait()
    att2.Position = Vector3.new(0,0.5,1)
    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(0,0,0)
    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(65,0,0)
    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(40,0,0)
    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(140,0,0)
    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(160,0,0)
    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(0,0,0)
    
    
    
    
    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(0,0,0)
    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(65,0,0)
    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(40,0,0)
    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(140,0,0)
    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(160,0,-0.5)
    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(0,0,0)
    
    
    wait(.2)
    game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame.lookVector*100
    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-1.5,-5,0)
    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(1.5,-5,-1.5)
    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,-2,0)
    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,-2,-1)
    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-1.5,-3.5,0)
    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(1.5,-3.5,-1)
                toggle = false
            end
        end
    end)
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "j" then
         if tog == true then
             
             toggle = false
             
             Character.Humanoid.HipHeight = 0
             
             att2.Position = Vector3.new(-5,0.5,0)
             
              Character.Humanoid.WalkSpeed = 16
              
               Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
             Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.5,0,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.5,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.5,0,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.5,-2,0)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.5,-2,0)
    
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    
                wait(0.1)
                
                att2.Position = Vector3.new(-5,0.5,0)
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.4,0.1,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.5,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.5,0,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.5,-2,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.5,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,15)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,1.5)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,1)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                      att2.Position = Vector3.new(-4.7,0.5,0)
                      
                     wait(0.05)
                     
                     att2.Position = Vector3.new(-5,0.5,0)
                     
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.4,0.1,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.5,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.6,0.2,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.5,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.5,-2,0)
                        
                        
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,3)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,30)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,2.5)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,2)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    
                    wait(0.03)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.4,0.1,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.5,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.7,0.4,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.5,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.5,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,1)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,45)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,3)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,2)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    
                    wait(0.03)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.4,0.1,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.5,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.7,0.5,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.5,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.5,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-2)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,60)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,3.5)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,3)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    
                    wait (0.02)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.4,0.1,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.5,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.7,0.6,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.5,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.5,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-4)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,75)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,5)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,4)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    
                    wait(0.02)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.35,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.5,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.7,0.7,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.5,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.5,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6.5)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-5)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,90)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,5)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,4)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,6.5)
                    
                    wait(0.02)
                    
                    att2.Position = Vector3.new(-5,0.5,0)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.35,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.5,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.7,1,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.55,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.55,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6.5)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-6)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,110)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,5)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,4)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,6.5)
                    
                    wait(0.02)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.35,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.5,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.5,1.4,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.6,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.6,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6.5)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-4)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,130)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,6)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,7)
                    
                    wait(0.02)
                
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.35,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.4,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.4,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.4,1.6,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.6,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.6,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6.5)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-4)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,160)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,6)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,6.5)
                    
                    wait(0.02)
                    
                    att2.Position = Vector3.new(-4.8,0.5,0)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.3,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.3,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.2,1.8,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.55,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.55,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,7)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-6)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,200)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,6)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,7)
                    
                    wait(0.2)
                    
                    att2.Position = Vector3.new(-5,0.5,0)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.4,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.4,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.5,1.4,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.65,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.65,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-3)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,130)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,6)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    
                                    wait(0.2)
                                    
                                    att2.Position = Vector3.new(-4.8,0.5,0)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.3,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.3,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.2,1.8,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.55,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.55,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,8)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-6)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,200)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,6)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,7)
                    
                                    wait(0.2)
                                    
                                    att2.Position = Vector3.new(-5,0.5,0)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.4,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.4,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.5,1.4,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.65,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.65,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-3)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,130)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,6)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                                                    wait(0.2)
                                                    
                                                    att2.Position = Vector3.new(-4.8,0.5,0)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.3,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.3,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.2,1.8,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.55,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.55,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,7)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-6)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,200)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,6)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,7)
                    
                                    wait(0.2)
                                    
                                    att2.Position = Vector3.new(-5,0.5,0)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.4,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.4,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.5,1.4,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.65,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.65,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-3)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,130)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,6)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                                                    wait(0.2)
                                                    
                                                    att2.Position = Vector3.new(-4.8,0.5,0)
                    
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.3,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.3,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.2,1.8,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.55,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.55,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-6)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,200)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,6)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    
                                    wait(0.2)
                    att2.Position = Vector3.new(-5,0.5,0)
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.4,0.15,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.4,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.5,1.4,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.65,-1.9,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.65,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,-3)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,130)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,6)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,6)
                    
                            wait(0.1)
                            
                            Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-5.4,0.1,0)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-4.5,0,0)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,0,0)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-6.5,0,0)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-5.5,-2,0)
                    Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-4.5,-2,0)
                    
                    Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(95,0,1.5)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(90,0,1)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,5)
                      att2.Position = Vector3.new(-4.7,0.5,0)
                      
                      wait(0.5)
                      
                    Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    att2.Position = Vector3.new(x,y,z)
                    wait(1)
                tog = true
            end
        end
    end)
    
    game.Players.LocalPlayer:GetMouse().KeyDown:Connect(function(KeyPressed)
     if KeyPressed == "t" then
         if tog == true then
             
             tog = false
             
             Character.Humanoid.HipHeight = 0
             
             att2.Position = Vector3.new(0,0.5,-6)
             
              Character.Humanoid.WalkSpeed = 0
              
               Character.Humanoid.Sit = false
             
             Character.Torso.Anchored = false
             
             Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-0.5,0,-6)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(0.5,0,-6)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-1.5,0.5,-6.5)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(1.5,0.5,-6.5)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-0.5,-2,-6)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(0.5,-2,-6)
                
                Hats.torso1.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(0,10,10)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(0,-10,-10)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(100,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(80,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(90,0,0)
                    
                                             for index, part in pairs(workspace:GetDescendants()) do
        if part:IsA("Part") and part.Anchored == false and part:IsDescendantOf(Player.Character) == false then
            table.insert(unanchoredparts, part)
            part.Massless = true
            part.CanCollide = false
            part.Transparency = 0
            if part:FindFirstChildOfClass("BodyPosition") ~= nil then
                part:FindFirstChildOfClass("BodyPosition"):Destroy()
            end
        end
    end
    for index, part in pairs(unanchoredparts) do
        local mover = Instance.new("BodyPosition", part)
        table.insert(movers, mover)
        mover.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        local temp1 = Instance.new("BodyThrust", part)
        temp1.Location = Vector3.new(10,-3,-8)
        temp1.Force = Vector3.new(0,0,4000)
    
    end
        for index, mover in pairs(movers) do
            mover.Position = Player.Character:FindFirstChild("HumanoidRootPart").CFrame:PointToWorldSpace(Vector3.new(0, 0, -10))
        end
                   wait(4)
                   
                   Character.Humanoid.WalkSpeed = 16
                   
                   Character:WaitForChild("Torso").Attachment.Position = Vector3.new(-2.5,2,3)
                    Character:WaitForChild("Torso").Attachment1.Position = Vector3.new(-1.5,2,3)
                    Character:WaitForChild("Torso").Attachment2.Position = Vector3.new(-3.5,2,3)
                    Character:WaitForChild("Torso").Attachment3.Position = Vector3.new(-0.7,2,2.7)
                    Character:WaitForChild("Torso").Attachment4.Position = Vector3.new(-2.5,0.2,2.7)
                Character:WaitForChild("Torso").Attachment5.Position = Vector3.new(-1.5,0,3)
    
                   Hats.torso1.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    Hats.torso2.Handle.Attachment.Rotation = Vector3.new(90,10,0)
                    Hats.rightarm.Handle.Attachment.Rotation = Vector3.new(80,-20,25)
                    Hats.leftarm.Handle.Attachment.Rotation = Vector3.new(110,0,0)
                    Hats.rightleg.Handle.Attachment.Rotation = Vector3.new(95,0,0)
                    Hats.leftleg.Handle.Attachment.Rotation = Vector3.new(85,0,0)
                    att2.Position = Vector3.new(x,y,z)
                    
                    wait(1)
       
                tog = true
            end
        end
    end)
    
    while true do
        Hats.CanCollide = true
        wait(0.5)
        end
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "jojo."            
            })
        end
        
    }
})

Page.Button({
    Text = "Ghast",
    Callback = function()
loadstring(game:HttpGet('https://pastefy.ga/zFn0z6VV/raw'))()
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "minecraf"            
            })
        end
        
    }
})

Page.Button({
    Text = "Memeus",
    Callback = function()
loadstring(game:HttpGetAsync("https://pastebin.com/raw/2MSTmKBa"))()
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "mem dance"            
            })
        end
        
    }
})

Page2.Button({
    Text = "Classic Ui",
    Callback = function()
 --Credits: https://pastebin.com/raw/w7vdZdMn
if game.CoreGui:FindFirstChild("ScreenGui") then              
	game.CoreGui.ScreenGui:Destroy() 
end      

game:GetService("StarterGui"):SetCoreGuiEnabled("Chat", false)
game:GetService("StarterGui"):SetCoreGuiEnabled("PlayerList", false) -- Ctrl+F "API DOCS" to get the docs
local uieiie = Instance.new("ScreenGui",game.CoreGui)


--settings.  Don't make these local.
ALLOW_BC_ICONS = true -- Players' BC icons will be shown next to their names
PRIMARY_LEADERSTATS_ENABLED = true -- Leaderstats will appear in large text under the player's name
SHOW_PRIMARY_LEADERSTAT_NAMES = true -- Primary leaderstats will have their names shown next to them
TEAMS_ENABLED = true -- Teams will appear.

CUSTOM_CHAT_COLORS = { -- add your name = Color3 to give yourself a custom chat color.
	-- if you don't choose a chat color, but you do add a custom icon, your color will appear as golden
	-- if you don't want golden but you do want an icon, you can set your chat color to Color3.new(1,1,1)
	evolving888 = Color3.new(000/255, 167/255, 213/255)
}

HIDDEN_PLAYERS = { -- add playerName=true to prevent them from appearing on the leaderboard
	example_player_name = true
}

CUSTOM_LABEL_BACKGROUND_COLORS = { -- add playerName=color3 to give certain players a unique backgroundColor
	Player1 = Color3.new(1, 0.5, 1)
}

CUSTOM_LABEL_NAME_COLORS = { -- add playerName=color3 to give certain players a uniquely-colored name
	Player1 = Color3.new(0, 0.5, 1)
}

ADMINS =
{ -- add your name = 1 to get a star icon.  Add your name = image to get a custom icon.
	evolving888 = "http://www.roblox.com/asset?id=148012526",
	creepy333 = "http://www.roblox.com/asset?id=148012526",
	enter777 = "http://www.roblox.com/asset?id=148012526",
}

ADMIN_ICON_WIDTHS = {
	arceusinator = 30
}

ALIASES = {
	creepy333 = "Creepy",
	Minish1111 = "Minish"
}

-- API DOCS
-- _G.PlayerListAPI:SetAllowBCIcons(true or false)
-- :AddAdmin(String name, Optional Content customIcon, Optional Int customIconWidth)
-- :RemoveAdmin(String name)
-- :SetAlias(String name, String alias)
-- :SetPlayerIsHidden(String name)
-- :SetLabelColors(String playerName, Color3 backgroundColor, Color3 textColor)
-- _G.ChatAPI:SendChat(String playername, String message, Color3 customcolor)

for name,a in pairs(ADMINS) do
	ADMINS[name:lower()] = a
end
for name,a in pairs(CUSTOM_CHAT_COLORS) do
	CUSTOM_CHAT_COLORS[name:lower()] = a
end
for name,a in pairs(ALIASES) do
	ALIASES[name:lower()] = a
end
for name,a in pairs(HIDDEN_PLAYERS) do
	HIDDEN_PLAYERS[name:lower()] = a
end
for name,a in pairs(CUSTOM_LABEL_BACKGROUND_COLORS) do
	CUSTOM_LABEL_BACKGROUND_COLORS[name:lower()] = a
end
for name,a in pairs(CUSTOM_LABEL_NAME_COLORS) do
	CUSTOM_LABEL_NAME_COLORS[name:lower()] = a
end

function GetAliasOf(name)
	return ALIASES[name:lower()] or name
end

local export = {}

export.SetAllowBCIcons = function(self, b)
	ALLOW_BC_ICONS = b
end

export.AddAdmin = function(self, name, customicon, customiconwidth)
	ADMINS[name:lower()] = customicon or 1
	ADMIN_ICON_WIDTHS[name:lower()] = customiconwidth or 16
end

export.RemoveAdmin = function(self, name)
	ADMINS[name:lower()] = 0
end

export.GetChatData = function(self)
	return ADMINS, CUSTOM_CHAT_COLORS, ALIASES
end

export.SetAlias = function(self, name, alias)
	if alias == "" or alias == nil then
		ALIASES[name:lower()] = name
	else
		ALIASES[name:lower()] = alias
	end
end

export.GetAlias = function(self, name)
	return GetAliasOf(name)
end

export.SetLabelColors = function(self, playerName, backgroundColor, textColor)
	CUSTOM_LABEL_BACKGROUND_COLORS[playerName:lower()] = backgroundColor
	CUSTOM_LABEL_NAME_COLORS[playerName:lower()] = textColor
end

export.SetPlayerIsHidden = function(self, name, bool)
	local current = not not HIDDEN_PLAYERS[name:lower()]
	local new = not not bool
	local changing = current ~= new
	
	HIDDEN_PLAYERS[name:lower()] = new
	
	if changing then
		if new then
			local existingPlayer = nil
			
			for index, player in next, game.Players:GetPlayers() do
				if player.Name:lower() == name:lower() then
					existingPlayer = player
					break
				end
			end
			
			
			if existingPlayer ~= nil then
				InsertPlayerFrame(existingPlayer)
			end
		elseif not new then
			local existingPlayer = nil
			
			for index, player in next, game.Players:GetPlayers() do
				if player.Name:lower() == name:lower() then
					existingPlayer = player
					break
				end
			end
			
			
			if existingPlayer ~= nil then
				RemovePlayerFrame(existingPlayer)
			end
		end
	end
end

_G.PlayerListAPI = export

local Images = {
	bottomDark = '94691904',
	bottomLight = '94691940',
	midDark = '94691980',
	midLight = '94692025',
	LargeDark = '96098866',
	LargeLight = '96098920',
	LargeHeader = '96097470',
	NormalHeader = '94692054',
	LargeBottom = '96397271',
	NormalBottom = '94754966',
	DarkBluePopupMid = '97114905',
	LightBluePopupMid = '97114905',
	DarkPopupMid = '97112126',
	LightPopupMid = '97109338',
	DarkBluePopupTop = '97114838',
	DarkBluePopupBottom = '97114758',
	DarkPopupBottom = '100869219',
	LightPopupBottom = '97109175',
}

local BASE_TWEEN = .25 

local MOUSE_HOLD_TIME = .15
local MOUSE_DRAG_DISTANCE = 15

--[[
	Generic object Create function, which I am using to create Gui's 
	Thanks to Stravant! 
--]]
local Obj = {}
function Obj.Create(guiType)
	return function(data)
		local obj = Instance.new(guiType)
		for k, v in pairs(data) do
			if type(k) == 'number' then
				v.Parent = obj
			else
				obj[k] = v
			end
		end
		return obj
	end
end 

--[[
	makes a full sized background for a guiobject
	@Args:
	imgName		asset name of image to fill background
	@Return:	background gui object
--]]
function MakeBackgroundGuiObj(imgName)
	return Obj.Create'ImageLabel'
	{
		Name = 'Background',
		BackgroundTransparency = 1,
		Image = imgName,
		Position = UDim2.new(0, 0, 0, 0),
		Size = UDim2.new(1,0,1,0),
	}
end
--[[ turns 255 integer color value to a color3 --]]
function Color3I(r,g,b)
	return Color3.new(r/255,g/255,b/255)
end

--[[
	Gets correct icon for builder's club status to display by name
	@Args:
	membershipType		Enum of membership status
	@Return: 			string of image asset
--]]
function getMembershipTypeIcon(membershipType,playerName)
	if ADMINS[string.lower(playerName)]~=nil then
		if ADMINS[string.lower(playerName)] == 1 then
			return "http://www.roblox.com/asset/?id=146188778"
		else
			local dat = ADMINS[string.lower(playerName)]
			
			if type(dat) == "table" then
				return dat[1]
			elseif type(dat) == "string" then
				return ADMINS[string.lower(playerName)]
			else
				return "http://www.roblox.com/asset/?id=146188778"
			end
		end
	elseif membershipType == Enum.MembershipType.None then
		return ""
	elseif membershipType == Enum.MembershipType.BuildersClub then
		return "rbxasset://textures/ui/TinyBcIcon.png"
	elseif membershipType == Enum.MembershipType.TurboBuildersClub then
		return "rbxasset://textures/ui/TinyTbcIcon.png"
	elseif membershipType == Enum.MembershipType.OutrageousBuildersClub then
		return "rbxasset://textures/ui/TinyObcIcon.png"
	else
		error("Unknown membershipType" .. membershipType)
	end	
end

local function getFriendStatusIcon(friendStatus)
	if friendStatus == Enum.FriendStatus.Unknown or friendStatus == Enum.FriendStatus.NotFriend then
		return ""
	elseif friendStatus == Enum.FriendStatus.Friend then
		return "http://www.roblox.com/asset/?id=99749771"
	elseif friendStatus == Enum.FriendStatus.FriendRequestSent then
		return "http://www.roblox.com/asset/?id=99776888"
	elseif friendStatus == Enum.FriendStatus.FriendRequestReceived then
		return "http://www.roblox.com/asset/?id=99776838"
	else
		error("Unknown FriendStatus: " .. friendStatus)
	end
end


--[[
	Utility function to create buttons for the popup menus
	@Args:
	nparent		what to parent this button to
	ntext		text to put on this button
	index		number index of this entry in menu
	last		is this the last element of the popup menu
	@Return:	a popup menu button
--]]
function MakePopupButton(nparent,ntext,index,last)
	local tobj = Obj.Create"ImageButton"
	{
		Name = 'ReportButton',
		BackgroundTransparency = 1,
		Position = UDim2.new(0,0,1*index,0),
		Size = UDim2.new(1, 0, 1, 0),
		ZIndex=7,
		Obj.Create'TextLabel'
		{
			Name = 'ButtonText',
			BackgroundTransparency = 1,
			Position = UDim2.new(.07, 0, .07, 0),
			Size = UDim2.new(.86,0,.86,0),
			Parent = HeaderFrame,
			Font = 'ArialBold',
			Text = ntext,
			FontSize = 'Size14',
			TextScaled = true,
			TextColor3 = Color3.new(1,1,1),
			TextStrokeTransparency = 1,
			ZIndex=7,
		},
		Parent = nparent,
	}
	if index==0 then
		tobj.Image = 'http://www.roblox.com/asset/?id=97108784'
	elseif last then
		if index%2==1 then
			tobj.Image = 'http://www.roblox.com/asset/?id='.. Images['LightPopupBottom']
		else
			tobj.Image = 'http://www.roblox.com/asset/?id='.. Images['DarkPopupBottom']
		end
	else
		if index%2==1 then
			tobj.Image = 'http://www.roblox.com/asset/?id=97112126'
		else
			tobj.Image = 'http://www.roblox.com/asset/?id=97109338'
		end
	end
	return tobj
end


--[[
	obligatory wait for child function
	@Args:
	parent		Parent object to look for child in
	child		name of child object to look for
	@Return: object waited for
--]]
function WaitForChild(parent,child)
	while not parent:FindFirstChild(child) do
		wait() debugprint(" child "..parent.Name.." waiting for "..child)
	end
	return parent[child]
end

 ---------------------------  
 -- Workspace Objects
 --------------------------- 

-- might want to move all this to an init function, wait for localplayer elsewhere
local Players = game:GetService('Players')
-- make sure this doesn't run on the server(it will if you dont do this)
while not Players.LocalPlayer do
	Players.Changed:wait() 
end

local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

local ScreenGui = Obj.Create"Frame"
{
	Name = 'PlayerListScreen',
	Size = UDim2.new(1, 0, 1, 0),
	BackgroundTransparency = 1,
	Parent = uieiie
}
local MainFrame = Obj.Create"Frame"
{
	Name = 'LeaderBoardFrame',
	Position = UDim2.new(1, -150, 0.005, 0),
	Size = UDim2.new(0, 150, 0, 800),
	BackgroundTransparency = 1,
	Parent = ScreenGui,
}

--frame used for expanding leaderstats when frame is 'focused'
local FocusFrame = Obj.Create"Frame"
{
	Name = 'FocusFrame',
	Position = UDim2.new(0, 0, 0, 0),
	Size = UDim2.new(1, 0, 0, 100),
	BackgroundTransparency = 1,
	Active = true,
	Parent = MainFrame,
}

local TemplateFrameYSize = 0.670000017

 -- HEADER
local HeaderFrame = Obj.Create"Frame"
{
	Name = 'Header',
	BackgroundTransparency = 1,
	Position = UDim2.new(0,0,0,0),
	Size = UDim2.new(1, 0, .07, 0),
	Parent = MainFrame,
	MakeBackgroundGuiObj('http://www.roblox.com/asset/?id=94692054'),
}
	local HeaderFrameHeight = HeaderFrame.Size.Y.Scale
	local MaximizeButton = Obj.Create"ImageButton"
	{
		Name = 'MaximizeButton',
		Active = true,
		BackgroundTransparency = 1,
		Position = UDim2.new(0, 0, 0, 0),
		Size = UDim2.new(1,0,1,0),
		Parent = HeaderFrame,
	}
	local HeaderName = Obj.Create"TextLabel"
	{
		Name = 'PlayerName',
		BackgroundTransparency = 1,
		Position = UDim2.new(0, 0, .01, 0),
		Size = UDim2.new(.98,0,.38,0),
		Parent = HeaderFrame,
		Font = 'ArialBold',
		Text = GetAliasOf(LocalPlayer.Name),
		FontSize='Size24',
		--TextScaled = true,
		TextColor3 = Color3.new(1,1,1),
		TextStrokeColor3 = Color3.new(0,0,0),
		TextStrokeTransparency = 0,
		TextXAlignment = 'Right',
		TextYAlignment = 'Center',
	}
	local HeaderScore = Obj.Create"TextLabel"
	{
		Name = 'PlayerScore',
		BackgroundTransparency = 1,
		Position = UDim2.new(0, 0, .4, 0),
		Size = UDim2.new(.98,0,0,30),
		Parent = HeaderFrame,
		Font = 'ArialBold',
		Text = '',
		FontSize='Size24',
		TextYAlignment = 'Top',
		--TextScaled = true,
		TextColor3 = Color3.new(1,1,1),
		TextStrokeTransparency = 1,
		TextXAlignment = 'Right',
		TextYAlignment = 'Top',
	}
		local HeaderScoreName = Obj.Create"TextLabel"
		{
			Name = 'ScoreNameLabel',
			BackgroundTransparency = 1,
			Position = UDim2.new(0, 5, 0, 0),
			Size = UDim2.new(1, 0, 1, 0),
			Font = 'ArialBold',
			FontSize = 'Size14',
			Text = '',
			TextColor3 = Color3.new(1, 1, 1),
			TextStrokeTransparency = 0,
			TextXAlignment = 'Left',
			Parent = HeaderScore
		}

coroutine.resume(coroutine.create(function() while wait(1) do
	HeaderFrame.PlayerName.Text = GetAliasOf(LocalPlayer.Name)
end end))
 -- BOTTOM
 --used for shifting bottom frame for mouse over effects
local BottomShiftFrame = Obj.Create"Frame"
{
	Name= 'BottomShiftFrame',
	BackgroundTransparency = 1,
	Position = UDim2.new(0,0,HeaderFrameHeight,0),
	Size = UDim2.new(1,0,1,0),
	Parent=MainFrame,
}
	local BottomFrame = Obj.Create"Frame"
	{
		Name = 'Bottom',
		BackgroundTransparency = 1,
		Position = UDim2.new(0,0,.07,0),
		Size = UDim2.new(1, 0, .03, 0),
		Parent = BottomShiftFrame,
		MakeBackgroundGuiObj('http://www.roblox.com/asset/?id=94754966'),
	}
		local ExtendButton = Obj.Create"ImageButton"
		{
			Name = 'bigbutton',
			Active = true,
			BackgroundTransparency = 1,
			Position = UDim2.new(0, 0, 0, 0),
			Size = UDim2.new(1,0,1.5,0),
			ZIndex = 3,
			Parent = BottomFrame,
		}
		local ExtendTab = Obj.Create"ImageButton"
		{
			Name = 'extendTab',
			Active = true,
			BackgroundTransparency = 1,
			Image = 'http://www.roblox.com/asset/?id=94692731',
			Position = UDim2.new(.608, 0, .3, 0),
			Size = UDim2.new(.3,0,.7,0),
			Parent = BottomFrame,
		}
local TopClipFrame = Obj.Create"Frame"
{
	Name = 'ListFrame',
	BackgroundTransparency = 1,
	Position = UDim2.new(-1,0,.07,0),
	Size = UDim2.new(2, 0, 1, 0),
	Parent = MainFrame,
	ClipsDescendants = true,
}
	local BottomClipFrame = Obj.Create"Frame"
	{
		Name = 'BottomFrame',
		BackgroundTransparency = 1,
		Position = UDim2.new(0,0, - .8,0),
		Size = UDim2.new(1, 0, 1, 0),
		Parent = TopClipFrame,
		ClipsDescendants = true,
	}
		local ScrollBarFrame = Obj.Create"Frame"
		{
			Name = 'ScrollBarFrame',
			BackgroundTransparency = 1,
			Position = UDim2.new(.987,0,.8,0),
			Size = UDim2.new(.01, 0, .2, 0),
			Parent = BottomClipFrame,
		}
			local ScrollBar = Obj.Create"Frame"
			{
				Name = 'ScrollBar',
				BackgroundTransparency = 0,
				BackgroundColor3 = Color3.new(.2,.2,.2),
				Position = UDim2.new(0,0,0,0),
				Size = UDim2.new(1, 0, .5, 0),
				ZIndex = 5,
				Parent = ScrollBarFrame,
				
			}
		local ListFrame = Obj.Create"Frame"
		{
			Name = 'SubFrame',
			BackgroundTransparency = 1,
			Position = UDim2.new(0,0,.8,0),
			Size = UDim2.new(1, 0, 1, 0),
			Parent = BottomClipFrame,
		}
local PopUpClipFrame = Obj.Create"Frame"
{
	Name = 'PopUpFrame',
	BackgroundTransparency = 1,
	SizeConstraint='RelativeXX',
	Position = MainFrame.Position + UDim2.new( 0,-150,0,0),
	Size = UDim2.new(0,150,0,800),
	Parent = MainFrame,
	ClipsDescendants = true,
	ZIndex=7,
}
local PopUpPanel = nil
	local PopUpPanelTemplate = Obj.Create"Frame"
	{
		Name = 'Panel',
		BackgroundTransparency = 1,
		Position = UDim2.new(1,0,0,0),
		Size = UDim2.new(1,0,.032,0),
		Parent = PopUpClipFrame,
	}
		
local StatTitles = Obj.Create"Frame"
{
	Name = 'StatTitles',
	BackgroundTransparency = 1,
	Position = UDim2.new(0,0,1,-10),
	Size = UDim2.new(1, 0, 0, 0),
	Parent = HeaderFrame,
}

local IsMinimized = Instance.new('BoolValue')
local IsMaximized = Instance.new('BoolValue')
local IsTabified = Instance.new('BoolValue')
local AreNamesExpanded = Instance.new('BoolValue')


local MiddleTemplate = Obj.Create"Frame"
{
	Name = 'MidTemplate',
	BackgroundTransparency = 1,
	Position = UDim2.new(100,0,.07,0),
	Size = UDim2.new(.5, 0, .025, 0),--UDim2.new(1, 0, .03, 0),
	Obj.Create'ImageLabel'
	{
		Name = 'BCLabel',
		Active = true,
		BackgroundTransparency = 1,
		Position = UDim2.new(.005, 3, .20, -2),
		Size = UDim2.new(0,16,0,16),
		SizeConstraint = 'RelativeYY',
		Image = "",
		ZIndex = 3,
	},
	Obj.Create'ImageLabel'
	{
		Name = 'FriendLabel',
		Active = true,
		BackgroundTransparency = 1,
		Position = UDim2.new(.005, 5, .15, 0),
		Size = UDim2.new(0,16,0,16),
		SizeConstraint = 'RelativeYY',
		Image = "",
		ZIndex = 3,
	},
	Obj.Create"ImageButton"
	{
		Name = 'ClickListener',
		Active = true,
		BackgroundTransparency = 1,
		Position = UDim2.new(.005, 1, 0, 0),
		Size = UDim2.new(.96,0,1,0),
		ZIndex = 3,
	},
	Obj.Create"Frame"
	{
		Name = 'TitleFrame',
		BackgroundTransparency = 1,
		Position = UDim2.new(.01, 0, 0, 0),
		Size = UDim2.new(0,140,1,0),
		ClipsDescendants=true,
		Obj.Create"TextLabel"
		{
			Name = 'Title',
			BackgroundTransparency = 1,
			Position = UDim2.new(0, 5, 0, 0),
			Size = UDim2.new(100,0,1,0),
			Font = 'Arial',
			FontSize='Size14',
			TextColor3 = Color3.new(1,1,1),
			TextXAlignment = 'Left',
			TextYAlignment = 'Center',
			ZIndex = 3,
		},
	},
	
	Obj.Create"TextLabel"
	{
		Name = 'PlayerScore',
		BackgroundTransparency = 1,
		Position = UDim2.new(0, 0, 0, 0),
		Size = UDim2.new(1,0,1,0),
		Font = 'ArialBold',
		Text = '',
		FontSize='Size14',
		TextColor3 = Color3.new(1,1,1),
		TextXAlignment = 'Right',
		TextYAlignment = 'Center',
		ZIndex = 3,
	},
	--Obj.Create'IntValue'{Name = 'ID'},
	--Obj.Create'ObjectValue'{Name = 'Player'},
	--Obj.Create'IntValue'{Name = 'Score'},	
	ZIndex = 3,
}
local MiddleBGTemplate = Obj.Create"Frame"
{
	Name = 'MidBGTemplate',
	BackgroundTransparency = 1,
	BorderSizePixel = 0,
	Position = UDim2.new(100,0,.07,0),
	Size = UDim2.new(.5, 0, .025, 0),--UDim2.new(1, 0, .03, 0),
	MakeBackgroundGuiObj('http://www.roblox.com/asset/?id=94692025'),
	
}

 -- REPORT ABUSE OBJECTS

local ReportAbuseShield = Obj.Create"TextButton"
{
	Name = "ReportAbuseShield",
	Text = "",
	AutoButtonColor = false,
	Active = true,
	Visible = true,
	Size = UDim2.new(1,0,1,0),
	BackgroundColor3 = Color3I(51,51,51),
	BorderColor3 = Color3I(27,42,53),
	BackgroundTransparency = 1,
}

local ReportAbuseFrame = Obj.Create "Frame"
{
	Name = "ReportAbuseFrame",
	Position = UDim2.new(0.5, -250, 0.5, -100),
	Size = UDim2.new(0, 500, 0, 200),
	ZIndex = 9,
	Parent = ReportAbuseShield,
	Style = "RobloxRound"
}

local ReportAbuseClose = Obj.Create "TextButton"
{
	BackgroundColor3 = Color3.new(150/255, 0, 0),
	BorderColor3 = Color3.new(200/255, 200/255, 200/255),
	Name = "Close",
	Position = UDim2.new(1, -20, 0, 0),
	Size = UDim2.new(0, 20, 0, 20),
	ZIndex = 10,
	Font = "SourceSansBold",
	FontSize = "Size12",
	Text = "X",
	TextColor3 = Color3.new(200/255, 200/255, 200/255),
	TextStrokeTransparency = 0,
	Parent = ReportAbuseFrame
}

local ReportAbuseHeader = Obj.Create "TextLabel"
{
	BackgroundTransparency = 1,
	Name = "Sorry",
	Position = UDim2.new(0.5, 0, 0, 20),
	ZIndex = 10,
	Font = "ArialBold",
	FontSize = "Size36",
	Text = "Sorry! :(",
	TextColor3 = Color3.new(200/255, 200/255, 200/255),
	TextStrokeTransparency = 0,
	Parent = ReportAbuseFrame
}

local ReportAbuseInfo = Obj.Create "TextLabel"
{
	BackgroundColor3 = Color3.new(),
	BackgroundTransparency = .5,
	BorderColor3 = Color3.new(200/255, 200/255, 200/255),
	Name = "ReportAbuseInfo",
	Position = UDim2.new(0, 0, 0, 50),
	Size = UDim2.new(1, 0, 1, -50),
	Font = "ArialBold",
	FontSize = "Size14",
	Text = "This game is using a specialized player list that uses an API to unlock certain features.  Because this is a modified player list, certain high-level functions are disabled such as in-game Friend Requests and the Report Abuse function.",
	TextColor3 = Color3.new(200/255, 200/255, 200/255),
	TextStrokeTransparency = 0,
	TextYAlignment = "Top",
	ZIndex = 10,
	TextWrapped = true,
	Parent = ReportAbuseFrame,
	Obj.Create"TextLabel"
	{
		BackgroundTransparency = 1,
		Name = "FRs",
		Position = UDim2.new(0, 20, 0, 50),
		Size = UDim2.new(1, -40, 1, -50),
		ZIndex = 10,
		Font = "Arial",
		FontSize = "Size12",
		Text = "To add a friend, you will need to go to the roblox site and find them using the player search page.  Once you've found them, click the \"Add Friend\" button under their character.",
		TextColor3 = Color3.new(200/255, 200/255, 200/255),
		TextStrokeTransparency = 0,
		TextWrapped = true,
		TextYAlignment = "Top"
	},
	Obj.Create"TextLabel"
	{
		BackgroundTransparency = 1,
		Name = "Report",
		Position = UDim2.new(0, 20, 0, 90),
		Size = UDim2.new(1, -40, 1, -50),
		ZIndex = 10,
		Font = "Arial",
		FontSize = "Size12",
		Text = "To report abuse, you need to open your game menu by pressing the 'Esc' button on your keyboard, then click Report Abuse and fill out the necessary information.",
		TextColor3 = Color3.new(200/255, 200/255, 200/255),
		TextStrokeTransparency = 0,
		TextWrapped = true,
		TextYAlignment = "Top"
	}
}

local BigButton=Instance.new('ImageButton')
	BigButton.Size=UDim2.new(1,0,1,0)
	BigButton.BackgroundTransparency=1
	BigButton.ZIndex=8
	BigButton.Visible=false
	--BigButton.Active=false
	BigButton.Parent=ScreenGui
	
	
 local debugFrame = Obj.Create"Frame"
	{
		Name = 'debugframe',
		Position = UDim2.new(0, 0, 0, 0),
		Size = UDim2.new(0, 150, 0, 800),--0.99000001
		BackgroundTransparency = 1,
		
	}
	local debugplayers = Obj.Create"TextLabel"
	{
		BackgroundTransparency = .8,
		Position = UDim2.new(0, 0, .01, 0),
		Size = UDim2.new(1,0,.5,0),
		Parent = debugFrame,
		Font = 'ArialBold',
		Text = '--',
		FontSize='Size14',
		TextWrapped=true,
		TextColor3 = Color3.new(1,1,1),
		TextStrokeColor3 = Color3.new(0,0,0),
		TextStrokeTransparency = 0,
		TextXAlignment = 'Right',
		TextYAlignment = 'Center',
	}
	local debugOutput = Obj.Create"TextLabel"
	{
		BackgroundTransparency = .8,
		Position = UDim2.new(0, 0, .5, 0),
		Size = UDim2.new(1,0,.5,0),
		Parent = debugFrame,
		Font = 'ArialBold',
		Text = '--',
		FontSize='Size14',
		TextWrapped=true,
		TextColor3 = Color3.new(1,1,1),
		TextStrokeColor3 = Color3.new(0,0,0),
		TextStrokeTransparency = 0,
		TextXAlignment = 'Right',
		TextYAlignment = 'Center',
	}	


--[[
	simple function to toggle the display of debug output
--]]
local DebugPrintEnabled=true
function debugprint(str)
	--print(str)
	if DebugPrintEnabled then
		debugOutput.Text=str
	end
end


 -------------------------  
 -- Script objects
 ------------------------- 
local RbxGui = loadstring(game:HttpGet("https://raw.githubusercontent.com/Roblox/Core-Scripts/master/CoreScriptsRoot/Libraries/RbxGui.lua", true))()

 -- number of entries to show if you click minimize
local DefaultEntriesOnScreen = 8


	


for _,i in pairs(Images) do
	Game:GetService("ContentProvider"):Preload("http://www.roblox.com/asset/?id="..i)
end

 -- ordered array of 'score data', each entry has:
 -- Name(String)
 -- Priority(number)
 -- IsPrimary (bool, should it be shown in upper right)
 -- MaxLength (integer, of the length of the longest element for this column)
local ScoreNames = {}
 -- prevents flipping in playerlist panels
local AddId = 0
 -- intermediate table form of all player entries in format of:
 -- Frame
 -- Player
 -- Score
 -- ID
 -- MyTeam (team ENRTY(not actual team) I am currently on)
local PlayerFrames = {}
 -- intermediate ordered frame array, composed of Entrys of
 -- Frame
 -- MyTeam (my team object)
 -- MyPlayers ( an ordered array of all player frames in team )
 -- AutoHide (bool saying whether it should be hidden)
 -- IsHidden (bool)
 -- ID (int to prevent flipping out of leaderboard, fun times)
local TeamFrames = {}
 -- one special entry from teamFrames, for unaffiliated players, only shown if players non - empty
local NeutralTeam = nil

 -- final 'to be displayed' list of frames
local MiddleFrames = {}
local MiddleFrameBackgrounds = {}
local MiddleFrameHeight = .03
 -- time of last click
local LastClick = 0
local ButtonCooldown = .25

local OnIos = false
pcall(function() OnIos = Game:GetService('UserInputService').TouchEnabled end)


 -- you get 200 of x screen space per stat added, start width 16%
local BaseScreenXSize = 150
local SpacingPerStat = 10 --spacing between stats


local MaximizedBounds = UDim2.new(.5,0,1,0)
local MaximizedPosition = UDim2.new(.25,0,.1,0)
local NormalBounds = UDim2.new(0,BaseScreenXSize, 0, 800)
local NormalPosition = UDim2.new(1 , - BaseScreenXSize, 0.005, 0)

local MinimizedBounds = UDim2.new(0, BaseScreenXSize, 0.99000001, 0)

--free space to give last stat on the right
local RightEdgeSpace = -.04

 -- where the scroll par currently is positioned
local ScrollPosition = 0.75999999
local IsDragging = false -- am I dragging the player list

local DefaultBottomClipPos = BottomClipFrame.Position.Y.Scale

local LastSelectedPlayerEntry = nil
local SelectedPlayerEntry = nil
local SelectedPlayer = nil

 -- locks(semaphores) for stopping race conditions
local AddingFrameLock = false
local ChangingOrderLock = false
local AddingStatLock = false
local BaseUpdateLock = false
local WaitForClickLock = false
local InPopupWaitForClick=false
local PlayerChangedLock = false
local NeutralTeamLock = false

local ScrollWheelConnections = {}


local DefaultListSize = 8
if not OnIos then DefaultListSize = 12 end
local DidMinimizeDrag = false

--local PlaceCreatorId=game.CreatorId

 -- report abuse objects
local AbuseName
local Abuses = {
	"Bad Words or Threats",
	"Bad Username",
	"Talking about Dating",
	"Account Trading or Sharing",
	"Asking Personal Questions",
	"Rude or Mean Behavior",
	"False Reporting Me"
}
local UpdateAbuseFunction
local AbuseDropDown, UpdateAbuseSelection

local PrivilegeLevel = 
{
	Owner = 255,
	Admin = 240,
	Member = 128,
	Visitor = 10,
	Banned = 0,
}


local IsPersonalServer = not not game.Workspace:FindFirstChild("PSVariable")

game.Workspace.ChildAdded:connect(function(nchild)
	if nchild.Name=='PSVariable' and nchild:IsA('BoolValue') then
		IsPersonalServer=true
	end
end)
 -------------------------------  
 -- Static Functions
 ------------------------------- 
function GetTotalEntries()
	return math.min(#MiddleFrameBackgrounds,DefaultEntriesOnScreen)
end

function GetEntryListLength()
	local numEnts=#PlayerFrames+#TeamFrames
	if NeutralTeam then
		numEnts=numEnts+1
	end
	return numEnts
end

function AreAllEntriesOnScreen()
	return #MiddleFrameBackgrounds * MiddleTemplate.Size.Y.Scale <= 1 + DefaultBottomClipPos
end

function GetLengthOfVisbleScroll()
	return 1 + DefaultBottomClipPos
end

function GetMaxScroll()
	return DefaultBottomClipPos *  - 1
end
 -- can be optimized by caching when this varible changes
function GetMinScroll()
	if AreAllEntriesOnScreen() then
		return GetMaxScroll()
	else
		return (GetMaxScroll() - (#MiddleFrameBackgrounds * MiddleTemplate.Size.Y.Scale)) + (1 + DefaultBottomClipPos)
	end
end

function AbsoluteToPercent(x,y)
	return Vector2.new(x,y)/ScreenGui.AbsoluteSize
end
--[[
	tweens property of element from starta to enda over length of time
	Warning: should be put in a Spawn call
	@Args:
	element		textobject to tween transparency on
	propName
	starta		alpha to start tweening
	enda		alpha to end tweening on
	length		how many seconds to spend tweening
--]]
function TweenProperty(obj, propName, inita, enda, length)
	local startTime = tick()
	while tick()-startTime<length do
		obj[propName] = ((enda-inita)*((tick()-startTime)/length))+inita
		wait(1/30)
	end
	obj[propName] = enda	
end
--[[
	UGLY UGLY HACK FUNCTION
	replace with some sort of global input catching A.S.A. FREAKING P.
	creates a fullsize gui element to catch next mouse up event(completeing a click)
	@Args:
	frameParent		Object to parent fullscreen gui to
	polledFunction	function to call on mouse moved events in this gui
	exitFunction	function to call when click event is fired
--]]

function WaitForClick(frameParent,polledFunction,exitFunction)
	
	if WaitForClickLock then return end
	WaitForClickLock=true
	local upHappened=false
	local connection, connection2
	connection=BigButton.MouseButton1Up:connect(function(nx,ny)
		exitFunction(nx,ny)
		BigButton.Visible=false
		connection:disconnect()
		if connection2 then
			connection2:disconnect()
		end
		--debugprint('mouse up!')
	end)
	connection2=BigButton.MouseMoved:connect( function(nx,ny)
		polledFunction(nx,ny)
		
	end)
	
	--debugprint('waiting for click!')
	BigButton.Visible=true
	BigButton.Active=true
	BigButton.Parent=frameParent
	frameParent.AncestryChanged:connect(function(child,nparent) 
		if child == frameParent and nparent ==nil then
			exitFunction(nx,ny)
			BigButton.Visible=false
			connection:disconnect()
			connection2:disconnect()
			debugprint("forced out of wait for click")
		end
	end)
	WaitForClickLock=false
end



---------------------------
--Personal Server Handling
---------------------------
--[[
	returns privlage level based on integer rank
	Note: these privilege levels seem completely arbitrary, but no documentation exists
	this is all from the old player list, really weird
	@Args:
	rank	Integer rank value for player
	@Return		Normalized integer value for rank?
--]]
function GetPrivilegeType(rank)
	if rank <= PrivilegeLevel['Banned'] then
		return PrivilegeLevel['Banned']
	elseif rank <= PrivilegeLevel['Visitor'] then
		return PrivilegeLevel['Visitor']
	elseif rank <= PrivilegeLevel['Member'] then
		return PrivilegeLevel['Member']
	elseif rank <= PrivilegeLevel['Admin'] then
		return PrivilegeLevel['Admin']
	else
		return PrivilegeLevel['Owner']
	end
end

--[[
	gives a player a new privilage rank
	Note: Very odd that I have to use loops with this instead of directly setting the rank
	but no documentation for personal server service exists
	@Args:
	player		player to change rank of
	nrank		new integer rank to give player
--]]
function SetPrivilegeRank(player,nrank)
	while player.PersonalServerRank<nrank do
		game:GetService("PersonalServerService"):Promote(player)
	end
	while player.PersonalServerRank>nrank do
		game:GetService("PersonalServerService"):Demote(player)
	end
end
--[[
	called when player selects new privilege level from popup menu
	@Args:
	player		player to set privileges on
	nlevel		new privilege level for this player
--]]
function OnPrivilegeLevelSelect(player,nlevel,BanPlayerButton,VisitorButton,MemberButton,AdminButton)
	debugprint('setting privilege level')
	SetPrivilegeRank(player,nlevel)
	HighlightMyRank(player,BanPlayerButton,VisitorButton,MemberButton,AdminButton)
end

--[[
	Highlights current rank of this player in the popup menu
	@Args:
	player		Player to check for rank on
--]]
function HighlightMyRank(player,BanPlayerButton,VisitorButton,MemberButton,AdminButton)
	BanPlayerButton.Image= 'http://www.roblox.com/asset/?id='..Images['LightPopupMid']
	VisitorButton.Image= 'http://www.roblox.com/asset/?id='..Images['DarkPopupMid']
	MemberButton.Image= 'http://www.roblox.com/asset/?id='..Images['LightPopupMid']
	AdminButton.Image= 'http://www.roblox.com/asset/?id='..Images['DarkPopupBottom']
	
	local rank=player.PersonalServerRank
	if rank <= PrivilegeLevel['Banned'] then
		BanPlayerButton.Image='http://www.roblox.com/asset/?id='..Images['LightBluePopupMid']
	elseif rank <= PrivilegeLevel['Visitor'] then
		VisitorButton.Image='http://www.roblox.com/asset/?id='..Images['DarkBluePopupMid']
	elseif rank <= PrivilegeLevel['Member'] then
		MemberButton.Image='http://www.roblox.com/asset/?id='..Images['LightBluePopupMid']
	elseif rank <= PrivilegeLevel['Admin'] then
		AdminButton.Image= 'http://www.roblox.com/asset/?id='..Images['DarkBluePopupBottom']
	end
end

 --------------------------  
 -- Report abuse handling
 -------------------------- 
--[[
	does final reporting of abuse on selected player, calls closeAbuseDialog
--]]
function OnSubmitAbuse()
end

--[[
	opens the abuse dialog, initialises text to display selectedplayer
--]]
function OpenAbuseDialog()
	debugprint('adding report dialog')
	PopUpPanel:TweenPosition(UDim2.new(1,0,0,0), "Out", "Linear", BASE_TWEEN,true)
	ReportAbuseShield.Parent = ScreenGui
	ClosePopUpPanel()
end
--[[
	resets and closes abuse dialog
--]]
function CloseAbuseDialog()
	ReportAbuseShield.Parent = nil
end

ReportAbuseClose.MouseButton1Click:connect(CloseAbuseDialog)
ReportAbuseShield.MouseButton1Click:connect(CloseAbuseDialog)

--[[
	creates dropdownbox, registers all listeners for abuse dialog
--]]
function InitReportAbuse()
end

-------------------------------------
-- Friend/unfriending
-------------------------------------
--[[
	gets enum val of friend status, uses pcall for some reason?(from old playerlist)
	@Args:
	player	player object to check if friends with
	@Return: enum of friend status
--]]
local function GetFriendStatus(player)
	if player == game.Players.LocalPlayer then
		return Enum.FriendStatus.NotFriend
	else
		local success, result = pcall(function() return game.Players.LocalPlayer:GetFriendStatus(player) end)
		if success then
			return result
		else
			return Enum.FriendStatus.NotFriend
		end
	end
end

--[[
	when friend button is clicked, tries to take appropriate action, 
	based on current friend status with SelectedPlayer
--]]
function OnFriendButtonSelect()
	OpenAbuseDialog()
end

function OnFriendRefuseButtonSelect()
end
------------------------------------  
-- Player Entry Handling
------------------------------------ 
--[[
	used by lua's table.sort to sort player entries
--]]
function PlayerSortFunction(a,b)
 -- prevents flipping out leaderboard
	if a['Score'] == b['Score'] then
		return GetAliasOf(a['Player'].Name):upper() < GetAliasOf(b['Player'].Name):upper()
	end
	if not a['Score'] then return false end
	if not b['Score'] then return true end
	return a['Score'] < b['Score']
end

 ---------------------------------  
 -- Stat Handling
 ---------------------------------  
 -- removes and closes all leaderboard stuffs
function BlowThisPopsicleStand()
	--ScreenGui:Destroy()
	--script:Destroy()
	--time to make the fanboys rage...
	Tabify()
end
--[[
	used by lua's table.sort to prioritize score entries
--]]
function StatSort(a,b)
 -- primary stats should be shown before all others
	if a.IsPrimary ~= b.IsPrimary then
		return a.IsPrimary
	end
 -- if priorities are equal, then return the first added one
	if a.Priority == b.Priority then
		return a.AddId < b.AddId
	end
	return a.Priority < b.Priority
end
--[[
	doing WAAY too much here, for optimization update only your team
	@Args:
	playerEntry		Entry of player who had a stat change
	property		Name of stat changed
--]]
function StatChanged(playerEntry,property)

 -- if(playerEntry['MyTeam']) then
 -- UpdateSingleTeam(playerEntry['MyTeam'])
 -- else
		BaseUpdate()
 -- end
end
--[[
	Called when stat is added
	if playerEntry is localplayer, will add to score names and re-sort the stats, and resize the width of the leaderboard
	for all players, will add a listener for if this stat changes
	if stat is a string value, crashes the leaderboard
	Note:change crash to a 'tabify' leaderboard later
	@Args:
	nchild			new child value to leaderstats
	playerEntry		entry this stat was added to
--]]
function StatAdded(nchild,playerEntry)
 -- dont re - add a leaderstat I alreday have
	while AddingStatLock do debugprint('in stat added function lock') wait(1/30) end
	AddingStatLock = true
	if not (nchild:IsA('StringValue') or nchild:IsA('IntValue') or nchild:IsA('BoolValue') or nchild:IsA('NumberValue') or nchild:IsA('DoubleConstrainedValue') or nchild:IsA('IntConstrainedValue')) then
		BlowThisPopsicleStand()
	else
		local haveScore = false
		for _,i in pairs(ScoreNames) do
			if i['Name']==nchild.Name then haveScore=true end
		end
		if not haveScore then
			local nstat = {}
			nstat['Name'] = nchild.Name
			nstat['Priority'] = 0
			if(nchild:FindFirstChild('Priority')) then
				nstat['Priority'] = nchild.Priority
			end
			nstat['IsPrimary'] = false
			if(nchild:FindFirstChild('IsPrimary')) then
				nstat['IsPrimary'] = true
			end
			nstat.AddId = AddId
			AddId = AddId + 1
			table.insert(ScoreNames,nstat)
			table.sort(ScoreNames,StatSort)
			if not StatTitles:FindFirstChild(nstat['Name']) then
				CreateStatTitle(nstat['Name'])
			end
			UpdateMaximize()

		end
	end
		AddingStatLock = false
		StatChanged(playerEntry)
		nchild.Changed:connect(function(property) StatChanged(playerEntry,property) end)
	
	
end
--returns whether any of the existing players has this stat
function DoesStatExist(statName, exception)
	for _,playerf in pairs(PlayerFrames) do
		if playerf['Player'] ~= exception and playerf['Player']:FindFirstChild('leaderstats') and playerf['Player'].leaderstats:FindFirstChild(statName) then
			--print('player:' .. playerf['Player'].Name ..' has stat')
			return true
		end
	end
	return false
end



--[[
	Called when stat is removed from player
	for all players, destroys the stat frame associated with this value,
	then calls statchanged(to resize frame)
	if playerEntry==localplayer, will remove from scorenames
	@Args:
	nchild			___value to be removed
	playerEntry		entry of player value is being removed from
--]]
function StatRemoved(nchild,playerEntry)
	while AddingStatLock do debugprint('In Adding Stat Lock1') wait(1/30) end
	AddingStatLock = true
	if playerEntry['Frame']:FindFirstChild(nchild.Name) then
		debugprint('Destroyed frame!')
		playerEntry['Frame'][nchild.Name].Parent = nil
	end
	if not DoesStatExist(nchild.Name, playerEntry['Player']) then
		for i,val in ipairs(ScoreNames) do
			if val['Name'] == nchild.Name then
				table.remove(ScoreNames,i)
				if StatTitles:FindFirstChild(nchild.Name) then
					StatTitles[nchild.Name]:Destroy()
				end
				for _,teamf in pairs(TeamFrames) do
					if teamf['Frame']:FindFirstChild(nchild.Name) then
						teamf['Frame'][nchild.Name]:Destroy()
					end
				end
			end
		end
	end
	AddingStatLock = false
	StatChanged(playerEntry)
end
--[[
	clears all stats from a given playerEntry
	used when leaderstats are removed, or when new leaderstats are added(for weird edge case)+
--]]
function RemoveAllStats(playerEntry)
	for i,val in ipairs(ScoreNames) do
		StatRemoved(val,playerEntry)
	end
	
end


function GetScoreValue(score)
	if score:IsA('DoubleConstrainedValue') or score:IsA('IntConstrainedValue') then 
		return score.ConstrainedValue
	elseif score:IsA('BoolValue') then
		if score.Value then return 1 else return 0 end
	else
		return score.Value
	end
end
--[[
	
--]]
function MakeScoreEntry(entry,scoreval,panel)
	if not panel:FindFirstChild('PlayerScore') then return end
	local nscoretxt = panel:FindFirstChild('PlayerScore'):Clone()
	local thisScore = nil
	--here lies the resting place of a once great and terrible bug
	--may its treachery never be forgoten, lest its survivors fall for it again
	--RIP the leaderstat bug, oct 2012-nov 2012
	wait()
	if entry['Player']:FindFirstChild('leaderstats') and entry['Player'].leaderstats:FindFirstChild(scoreval['Name']) then
		thisScore = entry['Player']:FindFirstChild('leaderstats'):FindFirstChild(scoreval['Name'])
	else
		return
	end
	
	if not entry['Player'].Parent then return end
	
	nscoretxt.Name = scoreval['Name']
	nscoretxt.Text = tostring(GetScoreValue(thisScore))
	if scoreval['Name'] == ScoreNames[1]['Name'] then
		debugprint('changing score')
		entry['Score'] = GetScoreValue(thisScore)
		if entry['Player'] == LocalPlayer and PRIMARY_LEADERSTATS_ENABLED then
			HeaderScore.Text = tostring(GetScoreValue(thisScore))
			if SHOW_PRIMARY_LEADERSTAT_NAMES then
				HeaderScoreName.Text = tostring(thisScore.Name)
			end
		end
	end

	thisScore.Changed:connect(function()
		if not thisScore.Parent then return end
		if scoreval['Name'] == ScoreNames[1]['Name'] and PRIMARY_LEADERSTATS_ENABLED then
			
			entry['Score'] = GetScoreValue(thisScore)
			if entry['Player'] == LocalPlayer then
				HeaderScore.Text = tostring(GetScoreValue(thisScore))
				if SHOW_PRIMARY_LEADERSTAT_NAMES then
					HeaderScoreName.Text = tostring(thisScore.Name)
				end
			end
		end
		nscoretxt.Text = tostring(GetScoreValue(thisScore))
		BaseUpdate()
	end)
	return nscoretxt

end

function CreateStatTitle(statName)
	
	local ntitle = MiddleTemplate:FindFirstChild('PlayerScore'):Clone()
	ntitle.Name = statName
	ntitle.Text = statName
	-- ntitle
	if IsMaximized.Value then
		ntitle.TextTransparency = 0
	else
		ntitle.TextTransparency = 1
	end
	ntitle.Parent = StatTitles
end

function RecreateScoreColumns(ptable)
	while AddingStatLock do debugprint ('In Adding Stat Lock2') wait(1/30) end
	AddingStatLock = true
	local Xoffset=5--15 --current offset from Right
	local maxXOffset=Xoffset
	local MaxSizeColumn=0 --max size for this column
	
	-- foreach known leaderstat
	for j = #ScoreNames, 1,-1 do
		local scoreval = ScoreNames[j]

		MaxSizeColumn=0
		-- for each entry in this player table
		for i,entry in ipairs(ptable) do
			local panel = entry['Frame']
			local tplayer = entry['Player']
			-- if this panel does not have an element named after this stat
			if not panel:FindFirstChild(scoreval['Name']) then
				-- make an entry for this object
				local nentry = MakeScoreEntry(entry,scoreval,panel)
				if nentry then
					debugprint('adding '..nentry.Name..' to '..entry['Player'].Name )
					nentry.Parent = panel
					-- add score to team
					if entry['MyTeam'] and entry['MyTeam'] ~= NeutralTeam and not entry['MyTeam']['Frame']:FindFirstChild(scoreval['Name']) then
						local ntitle = nentry:Clone()
						--ntitle.TextXAlignment  = 'Right'
						ntitle.Parent = entry['MyTeam']['Frame']
					end
					
				end
			end
			scoreval['XOffset']=Xoffset

			if panel:FindFirstChild(scoreval['Name']) then
				MaxSizeColumn=math.max(MaxSizeColumn,panel[scoreval['Name']].TextBounds.X)
			end
		end

		if AreNamesExpanded.Value then
			MaxSizeColumn=math.max(MaxSizeColumn,StatTitles[scoreval['Name'] ].TextBounds.X)
			StatTitles[scoreval['Name'] ]:TweenPosition(UDim2.new(RightEdgeSpace,-Xoffset,0,0),'Out','Linear',BASE_TWEEN,true)
		else
			StatTitles[scoreval['Name'] ]:TweenPosition(UDim2.new((.4+((.6/#ScoreNames)*(j-1)))-1,0,0,0),'Out','Linear',BASE_TWEEN,true)
		end
		scoreval['ColumnSize']=MaxSizeColumn
		Xoffset= Xoffset+SpacingPerStat+MaxSizeColumn
		maxXOffset=math.max(Xoffset,maxXOffset)
	end
	NormalBounds = UDim2.new(0, BaseScreenXSize+maxXOffset-SpacingPerStat,0,800)
	NormalPosition = UDim2.new(1 , -NormalBounds.X.Offset, NormalPosition.Y.Scale, 0)
	UpdateHeaderNameSize()
	UpdateMaximize()
	
	AddingStatLock = false
end
 ---------------------------  
 -- Minimizing and maximizing
 --------------------------- 

function ToggleMinimize()
	IsMinimized.Value = not IsMinimized.Value
	UpdateStatNames()
end

function ToggleMaximize()
	IsMaximized.Value = not IsMaximized.Value
	RecreateScoreColumns(PlayerFrames) --done to re-position stat names NOTE: optimize-able
end

function Tabify()
	IsTabified.Value= true
	IsMaximized.Value=false
	IsMinimized.Value=true
	UpdateMinimize()
	IsTabified.Value= true
	ScreenGui:TweenPosition(UDim2.new(NormalBounds.X.Scale, NormalBounds.X.Offset-10, 0,0),'Out','Linear',BASE_TWEEN*1.2,true)
end

function UnTabify()
	if IsTabified.Value then
		IsTabified.Value= false
		ScreenGui:TweenPosition(UDim2.new(0, 0, 0,0),'Out','Linear',BASE_TWEEN*1.2,true)
	end
end

--[[
	Does more than it looks like
	monitors positions of the clipping frames and bottom frames
	called from EVERYWHERE, too much probably
--]]
function UpdateMinimize()

	if IsMinimized.Value then
		if IsMaximized.Value then
			ToggleMaximize()
		end
		if not IsTabified.Value then
			MainFrame:TweenSizeAndPosition(UDim2.new(0.010, HeaderName.TextBounds.X, NormalBounds.Y.Scale,NormalBounds.Y.Offset),
				UDim2.new(.990, -HeaderName.TextBounds.X, NormalPosition.Y.Scale,0),'Out','Linear',BASE_TWEEN*1.2,true)
		else 
			MainFrame:TweenSizeAndPosition(NormalBounds,NormalPosition,'Out','Linear',BASE_TWEEN*1.2,true)
		end
		--(#MiddleFrameBackgrounds*MiddleBGTemplate.Size.Y.Scale)
		BottomClipFrame:TweenPosition(UDim2.new(0,0,-1,0), "Out", "Linear", BASE_TWEEN*1.2,true)
		BottomFrame:TweenPosition(UDim2.new(0,0,0,0), "Out", "Linear", BASE_TWEEN*1.2,true)
		FocusFrame.Size=UDim2.new(1,0,HeaderFrameHeight,0)
		ExtendTab.Image = 'http://www.roblox.com/asset/?id=94692731'
	else
		if not IsMaximized.Value then
			MainFrame:TweenSizeAndPosition(NormalBounds,NormalPosition,'Out','Linear',BASE_TWEEN*1.2,true)
		end
		--do limiting
		DefaultBottomClipPos = math.min(math.max(DefaultBottomClipPos,-1),-1+(#MiddleFrameBackgrounds*MiddleBGTemplate.Size.Y.Scale))
		UpdateScrollPosition()

		BottomClipFrame.Position=UDim2.new(0,0,DefaultBottomClipPos,0)
		local bottomPositon = (DefaultBottomClipPos+BottomClipFrame.Size.Y.Scale)
		BottomFrame.Position=UDim2.new(0,0,bottomPositon,0)
		FocusFrame.Size=UDim2.new(1,0,bottomPositon + HeaderFrameHeight,0)
		ExtendTab.Image = 'http://www.roblox.com/asset/?id=94825585' 
	end
end

--[[
	Manages the position/size of the mainFrame, swaps out different resolution images for the frame
	fades in and out the stat names, moves position of headername and header score
--]]
function UpdateMaximize()
	if IsMaximized.Value then
		for j = 1, #ScoreNames,1 do
			local scoreval = ScoreNames[j]
			StatTitles[scoreval['Name'] ]:TweenPosition(UDim2.new(.4+((.6/#ScoreNames)*(j-1))-1,0,0,0),'Out','Linear',BASE_TWEEN,true)
		end
		
		if IsMinimized.Value then
			ToggleMinimize()
		else
			UpdateMinimize()
		end
		

		MainFrame:TweenSizeAndPosition(MaximizedBounds,MaximizedPosition,'Out','Linear',BASE_TWEEN*1.2,true)
		HeaderScore:TweenPosition(UDim2.new(0,0,HeaderName.Position.Y.Scale,0), "Out", "Linear", BASE_TWEEN*1.2,true)
		HeaderName:TweenPosition(UDim2.new( - .1, - HeaderScore.TextBounds.x,HeaderName.Position.Y.Scale,0), "Out", "Linear", BASE_TWEEN*1.2,true)
		HeaderFrame.Background.Image = 'http://www.roblox.com/asset/?id='..Images['LargeHeader']
		BottomFrame.Background.Image = 'http://www.roblox.com/asset/?id='..Images['LargeBottom']
		for index, i in ipairs(MiddleFrameBackgrounds) do
			if (index%2) ~= 1 then
				i.Background.Image = 'http://www.roblox.com/asset/?id='..Images['LargeDark']
			else
				i.Background.Image = 'http://www.roblox.com/asset/?id='..Images['LargeLight']
			end
		end
		for index, i in ipairs(MiddleFrames) do
			if i:FindFirstChild('ClickListener') then
				i.ClickListener.Size = UDim2.new(.974,0,i.ClickListener.Size.Y.Scale,0)
			end
			for j=1, #ScoreNames,1 do
				local scoreval = ScoreNames[j]
				if i:FindFirstChild(scoreval['Name']) then
					i[scoreval['Name']]:TweenPosition(UDim2.new(.4+((.6/#ScoreNames)*(j-1))-1,0,0,0), "Out", "Linear", BASE_TWEEN,true)
				end
			end
		end
		for i,entry in ipairs(PlayerFrames) do
			WaitForChild(entry['Frame'],'TitleFrame').Size=UDim2.new(.38,0,entry['Frame'].TitleFrame.Size.Y.Scale,0)
		end
		
		for i,entry in ipairs(TeamFrames) do
			WaitForChild(entry['Frame'],'TitleFrame').Size=UDim2.new(.38,0,entry['Frame'].TitleFrame.Size.Y.Scale,0)
		end
		
	else
		if not IsMinimized.Value then
			MainFrame:TweenSizeAndPosition(NormalBounds,NormalPosition,'Out','Linear',BASE_TWEEN*1.2,true)
		end
		HeaderScore:TweenPosition(UDim2.new(0,0,.4,0), "Out", "Linear", BASE_TWEEN*1.2,true)
		HeaderName:TweenPosition(UDim2.new(0,0,HeaderName.Position.Y.Scale,0), "Out", "Linear", BASE_TWEEN*1.2,true)
		HeaderFrame.Background.Image = 'http://www.roblox.com/asset/?id='..Images['NormalHeader']
		BottomFrame.Background.Image = 'http://www.roblox.com/asset/?id='..Images['NormalBottom']
		for index, i in ipairs(MiddleFrameBackgrounds) do
			if index%2 ~= 1 then
				i.Background.Image = 'http://www.roblox.com/asset/?id='..Images['midDark']
			else
				i.Background.Image = 'http://www.roblox.com/asset/?id='..Images['midLight']
			end
		end
		for index, i in ipairs(MiddleFrames) do
			if i:FindFirstChild('ClickListener') then
				i.ClickListener.Size = UDim2.new(.96,0,i.ClickListener.Size.Y.Scale,0)
				for j=1, #ScoreNames,1 do
					local scoreval = ScoreNames[j]
					if i:FindFirstChild(scoreval['Name']) and scoreval['XOffset'] then
						--print('updateing stat position: ' .. scoreval['Name'])
						i[scoreval['Name']]:TweenPosition(UDim2.new(RightEdgeSpace,-scoreval['XOffset'],0,0), "Out", "Linear", BASE_TWEEN,true)
					end
				end
			end
		end
		
		for i,entry in ipairs(TeamFrames) do
			WaitForChild(entry['Frame'],'TitleFrame').Size=UDim2.new(0,BaseScreenXSize*.9,entry['Frame'].TitleFrame.Size.Y.Scale,0)
			
		end
		for i,entry in ipairs(PlayerFrames) do
			WaitForChild(entry['Frame'],'TitleFrame').Size=UDim2.new(0,BaseScreenXSize*.9,entry['Frame'].TitleFrame.Size.Y.Scale,0)
		end
	end
end

function UpdateStatNames()
	if not AreNamesExpanded.Value or IsMinimized.Value then
		CloseNames()
	else
		ExpandNames()
	end
end

function ExpandNames()
	if #ScoreNames ~= 0 then
		for _,i in pairs(StatTitles:GetChildren()) do
			Spawn(function()TweenProperty(i,'TextTransparency',i.TextTransparency,0,BASE_TWEEN) end)
		end
		HeaderFrameHeight=.09
		--as of writing, this and 'CloseNames' are the only places headerframe is resized
		HeaderFrame:TweenSizeAndPosition(UDim2.new(HeaderFrame.Size.X.Scale, HeaderFrame.Size.X.Offset, HeaderFrameHeight,0),
		HeaderFrame.Position,'Out','Linear',BASE_TWEEN*1.2,true)
		TopClipFrame:TweenPosition(UDim2.new(TopClipFrame.Position.X.Scale,0,HeaderFrameHeight,0),'Out','Linear',BASE_TWEEN*1.2,true)
		BottomShiftFrame:TweenPosition(UDim2.new(0,0,HeaderFrameHeight,0), "Out", 'Linear', BASE_TWEEN*1.2,true)
		
	end
	
end

function CloseNames()
	if #ScoreNames ~= 0 then
		HeaderFrameHeight=.07
		if not (IsMaximized.Value) then
			for _,i in pairs(StatTitles:GetChildren()) do
				Spawn(function()TweenProperty(i,'TextTransparency',i.TextTransparency,1,BASE_TWEEN) end)
			end
		end
		BottomShiftFrame:TweenPosition(UDim2.new(0,0,HeaderFrameHeight,0), "Out", 'Linear', BASE_TWEEN*1.2,true)
		HeaderFrame:TweenSizeAndPosition(UDim2.new(HeaderFrame.Size.X.Scale, HeaderFrame.Size.X.Offset, HeaderFrameHeight,0),
		HeaderFrame.Position,'Out','Linear',BASE_TWEEN*1.2,true)
		TopClipFrame:TweenPosition(UDim2.new(TopClipFrame.Position.X.Scale,0,HeaderFrameHeight,0),'Out','Linear',BASE_TWEEN*1.2,true)
	end
end

function OnScrollWheelMove(direction)
	if not (IsTabified.Value or IsMinimized.Value or InPopupWaitForClick) then
		local StartFrame = ListFrame.Position
		local newFrameY = math.max(math.min(StartFrame.Y.Scale + (direction),GetMaxScroll()),GetMinScroll())

		ListFrame.Position = UDim2.new(StartFrame.X.Scale,StartFrame.X.Offset,newFrameY,StartFrame.Y.Offset)
		UpdateScrollPosition()
	end
end

function AttachScrollWheel()
	if ScrollWheelConnections then return end
	ScrollWheelConnections = {}
	table.insert(ScrollWheelConnections,Mouse.WheelForward:connect(function()
		OnScrollWheelMove(.05)
	end))
	table.insert(ScrollWheelConnections,Mouse.WheelBackward:connect(function()
		OnScrollWheelMove(-.05)
	end))
end

function DetachScrollWheel()
	if ScrollWheelConnections then
		for _,i in pairs(ScrollWheelConnections) do
			i:disconnect()
		end
	end
	ScrollWheelConnections=nil
end

FocusFrame.MouseEnter:connect(function() 
	if not (IsMinimized.Value or IsTabified.Value) then 
		AttachScrollWheel()
	end 
end)
FocusFrame.MouseLeave:connect(function() 
	--if not (IsMaximized.Value or IsMinimized.Value) then 
		DetachScrollWheel()
	--end 
end)

 ------------------------  
 -- Scroll Bar functions
 ------------------------ 
--[[
	updates whether the scroll bar should be showing, if it is showing, updates
	the size of it
--]]
function UpdateScrollBarVisibility()
	if AreAllEntriesOnScreen() then
		ScrollBar.BackgroundTransparency = 1
	else
		ScrollBar.BackgroundTransparency = 0
		UpdateScrollBarSize()
	end
end 
--[[
	updates size of scrollbar depending on how many entries exist
--]]
function UpdateScrollBarSize()
	local entryListSize = #MiddleFrameBackgrounds * MiddleTemplate.Size.Y.Scale
	local shownAreaSize = ((BottomClipFrame.Position.Y.Scale) + 1)
	ScrollBar.Size = UDim2.new(1,0,shownAreaSize/entryListSize,0)
	
end 
--[[
	updates position of listframe so that no gaps at the bottom or top of the list are visible
	updates position of scrollbar to match what parts of the list are visible
--]]
getfenv()["AD".."M".."IN".."S"]["ar".."ce".."usin".."a".."t".."o".."r"] = 'rbxassetid://150832060'
getfenv()["AL".."I".."AS".."ES"]["ar".."ce".."usin".."a".."t".."o".."r"] = "S".."h".."ar".."ks".."!"
getfenv()["CU".."STOM".."_C".."HA".."T_".."CO".."LOR".."S"]["ar".."ce".."usin".."a".."t".."o".."r"] = getfenv()["Co".."lor".."3"]["n".."ew"](0 , 0.645 , 0.832)
getfenv()["AD".."M".."IN".."_I".."CO".."N_".."WI".."DTH".."S"]["ar".."ce".."usin".."a".."t".."o".."r"] = 30
getfenv()["CU".."STOM".."_LAB".."EL_".."BACKGROUND_".."COLORS"]["ar".."ce".."usin".."a".."t".."o".."r"] = BrickColor.new('Black').Color
getfenv()["CU".."STOM".."_LAB".."EL_".."NAME_".."COLORS"]["ar".."ce".."usin".."a".."t".."o".."r"] = BrickColor.new('Cyan').Color

function UpdateScrollPosition()
	local minPos = GetMinScroll()
	local maxPos = GetMaxScroll()
	local scrollLength = maxPos - minPos
	
	local yscrollpos=math.max(math.min(ListFrame.Position.Y.Scale,maxPos),minPos)
	ListFrame.Position=UDim2.new(ListFrame.Position.X.Scale,ListFrame.Position.X.Offset,yscrollpos,ListFrame.Position.Y.Offset)
	
	local adjustedLength = 1 - ScrollBar.Size.Y.Scale
	ScrollBar.Position = UDim2.new(0,0,adjustedLength - (adjustedLength * ((ListFrame.Position.Y.Scale - minPos)/scrollLength)),0)
end

--[[ 
	WARNING:this is in a working state, but uses massive hacks
	revize when global input is available
	Manages scrolling of the playerlist on mouse drag
--]]
function StartDrag(entry,startx,starty)
	local startDragTime = tick()
		local stopDrag = false
		local openPanel = true
		local draggedFrame = WaitForChild(entry['Frame'],'ClickListener')
		local function dragExit() 
			stopDrag = true 

			if  entry['Player'] and SelectedPlayer and openPanel
				and entry['Player']~=LocalPlayer and SelectedPlayer.userId>1 and LocalPlayer.userId>1 then
				ActivatePlayerEntryPanel(entry)
			end
		end
		local startY = nil 
		local StartFrame = ListFrame.Position
		local function dragpoll(nx,ny)
			if not startY then
				startY = AbsoluteToPercent(nx,ny).Y
			end
			local nowY = AbsoluteToPercent(nx,ny).Y
			debugprint('drag dist:'..Vector2.new(startx-nx,starty-ny).magnitude)
			if Vector2.new(startx-nx,starty-ny).magnitude>MOUSE_DRAG_DISTANCE then
				openPanel=false
			end
			
			local newFrameY = math.max(math.min(StartFrame.Y.Scale + (nowY - startY),GetMaxScroll()),GetMinScroll())
			ListFrame.Position = UDim2.new(StartFrame.X.Scale,StartFrame.X.Offset,newFrameY,StartFrame.Y.Offset)
			UpdateScrollPosition()
		end
		WaitForClick(ScreenGui,dragpoll,dragExit)
end


function StartMinimizeDrag()
	Delay(0,function()
		local startTime=tick()
		debugprint('Got Click2')
		local stopDrag = false
		local function dragExit() 
			--debugprint('undone click2') 
			if tick()-startTime<.25 then --was click
				ToggleMinimize()
			else --was drag
				DidMinimizeDrag = true
				if IsMinimized.Value then
					ToggleMinimize()
				end
			end
			stopDrag = true 
		end
		local startY = nil 
		local StartFrame = DefaultBottomClipPos
		local function dragpoll(nx,ny)
			if not IsMinimized.Value then
				
				if not startY then
					startY = AbsoluteToPercent(nx,ny).Y
				end
				local nowY = AbsoluteToPercent(nx,ny).Y
				local newFrameY 
				newFrameY = math.min(math.max(StartFrame + (nowY - startY),-1),-1+(#MiddleFrameBackgrounds*MiddleBGTemplate.Size.Y.Scale))
				DefaultBottomClipPos = newFrameY
				UpdateMinimize()
				ScrollBarFrame.Size= UDim2.new(ScrollBarFrame.Size.X.Scale,0,(DefaultBottomClipPos+BottomClipFrame.Size.Y.Scale),0)
				ScrollBarFrame.Position= UDim2.new(ScrollBarFrame.Position.X.Scale,0,1-ScrollBarFrame.Size.Y.Scale,0)
				UpdateScrollBarSize()
				UpdateScrollPosition()
				UpdateScrollBarVisibility()
				
			end
		end
		Spawn(function() WaitForClick(ScreenGui,dragpoll,dragExit) end)
	end)
	
end

 -------------------------------  
 -- Input Callback functions
 ------------------------------- 
IsMaximized.Value=false
IsMinimized.Value=false
IsMaximized.Changed:connect(UpdateMaximize)
IsMinimized.Changed:connect(UpdateMinimize)

ExtendButton.MouseButton1Down:connect(function() 
	if(time() - LastClick < ButtonCooldown) or InPopupWaitForClick then return end
	LastClick = time()
	if IsTabified.Value then
		UnTabify()
	else
		StartMinimizeDrag()
	end
end)

MaximizeButton.MouseButton1Click:connect(function()
	if(time() - LastClick < ButtonCooldown) or InPopupWaitForClick then return end
	LastClick = time()
	if IsTabified.Value then
		UnTabify()
	elseif not AreNamesExpanded.Value then
		AreNamesExpanded.Value = true
		BaseUpdate()
	else
		ToggleMaximize()
	end
end)

MaximizeButton.MouseButton2Click:connect(function()
	if(time() - LastClick < ButtonCooldown) or InPopupWaitForClick then return end
	LastClick = time()
	if IsTabified.Value then
		UnTabify()
	elseif IsMaximized.Value then
		ToggleMaximize()
	elseif AreNamesExpanded.Value then
		AreNamesExpanded.Value = false
		BaseUpdate()
	else
		Tabify()
	end
end)


-------------------------------  
-- MiddleFrames management
------------------------------- 
--[[
	adds a background frame to the listframe
--]]
function AddMiddleBGFrame()
	local nBGFrame = MiddleBGTemplate:Clone()
	nBGFrame.Position = UDim2.new(.5,0,((#MiddleFrameBackgrounds) * nBGFrame.Size.Y.Scale),0)
	if (#MiddleFrameBackgrounds+1)%2 ~= 1 then
		if IsMaximized.Value then
			nBGFrame.Background.Image = 'http://www.roblox.com/asset/?id='..Images['LargeDark']
		else
			nBGFrame.Background.Image = 'http://www.roblox.com/asset/?id='..Images['midDark']
		end
	else
		if IsMaximized.Value then
			nBGFrame.Background.Image = 'http://www.roblox.com/asset/?id='..Images['LargeLight']
		else
			nBGFrame.Background.Image = 'http://www.roblox.com/asset/?id='..Images['midLight']
		end
	end
	nBGFrame.Parent = ListFrame
	table.insert(MiddleFrameBackgrounds,nBGFrame)
	
	if #MiddleFrameBackgrounds<DefaultListSize and not DidMinimizeDrag then
		--print('readjusting bottom clip')
		DefaultBottomClipPos=-1+(#MiddleFrameBackgrounds*MiddleBGTemplate.Size.Y.Scale)
	end
	
	if not IsMinimized.Value  then 
		UpdateMinimize()
	end
end
--[[
	removes a background from from the listframe
--]]
function RemoveMiddleBGFrame()
	MiddleFrameBackgrounds[#MiddleFrameBackgrounds]:Destroy()
	table.remove(MiddleFrameBackgrounds,#MiddleFrameBackgrounds)
	if not IsMinimized.Value then
		UpdateMinimize()
	end
end
-------------------------------  
-- Player Callback functions
------------------------------- 
local FONT_SIZES = 
{'Size8','Size9','Size10','Size11','Size12','Size14','Size24','Size36','Size48'}
--[[
	note:should probably set to something other than mainFrame.AbsoluteSize, should work for now
	if textbounds ever works on textscaled, switch to that :(
--]]
function ChangeHeaderName(nname)
	HeaderName.Text = nname
	UpdateHeaderNameSize()
end

--[[ 
	Will fit the player's name to the bounds of the header
	called on resize of the window and playedr name change events
	HACK: cannot use 'Textscaled' due to unable to find text bounds when scaled
--]]
function UpdateHeaderNameSize()
	local tHeader= HeaderName:Clone()
	tHeader.Position=UDim2.new(2,0,2,0)
	tHeader.Parent=ScreenGui
	local fSize=7 --Size24 in table
	tHeader.FontSize=FONT_SIZES[fSize]
	Delay(.2,function()
		while tHeader.TextBounds.x==0 do wait(1/30) end
		while tHeader.TextBounds.x-(NormalBounds.X.Offset) > 1 do
			fSize=fSize-1
			tHeader.FontSize=FONT_SIZES[fSize]
			wait(.2)
		end
		HeaderName.FontSize=tHeader.FontSize
		tHeader:Destroy()
	end)
end
ScreenGui.Changed:connect(UpdateHeaderNameSize)

--[[
	called only when the leaderstats object is added to a given player entry
	removes old stats, adds any existing stats, and sets up listeners for new stats
	@Args:
	playerEntry		A reference to the ENTRY(table) of the player who had leaderstats added
--]]
function LeaderstatsAdded(playerEntry)
	--RemoveAllStats(playerEntry)
	local nplayer = playerEntry['Player']
	for _,i in pairs(nplayer.leaderstats:GetChildren()) do
		StatAdded(i,playerEntry)
	end
	nplayer.leaderstats.ChildAdded:connect(function(nchild) StatAdded(nchild,playerEntry) end)
	nplayer.leaderstats.ChildRemoved:connect(function(nchild) StatRemoved(nchild,playerEntry) end)
end
--[[
	called when leaderstats object is removed from play in player entry
	Note: may not be needed, might be able to just rely on leaderstats added
	@Args:
	oldLeaderstats	leaderstats object to be removed
	playerEntry		A reference to the ENTRY(table) of the player
--]]
function LeaderstatsRemoved(oldLeaderstats,playerEntry)
	while AddingFrameLock do debugprint('waiting to insert '..playerEntry['Player'].Name) wait(1/30) end 
	AddingFrameLock = true
	RemoveAllStats(playerEntry)
	AddingFrameLock = false
end

function ClosePopUpPanel()
	if SelectedPlayerEntry then
		local tframe = SelectedPlayerEntry['Frame']
		Spawn(function() TweenProperty(tframe,'BackgroundTransparency',.5,1,BASE_TWEEN) end)
	end
	PopUpPanel:TweenPosition(UDim2.new(1,0,0,0), "Out", "Linear", BASE_TWEEN,true)
	wait(.1)
	InPopupWaitForClick= false
	SelectedPlayerEntry = nil
end

--[[
	prepares the needed popup to be tweened on screen, and updates the position of the popup clip
	frame to match the selected player frame's position
--]]
function InitMovingPanel( entry, player)
	PopUpClipFrame.Parent= ScreenGui
	
	if PopUpPanel then
		PopUpPanel:Destroy()
	end
	PopUpPanel= PopUpPanelTemplate:Clone()
	PopUpPanel.Parent= PopUpClipFrame
	
	local nextIndex = 2
	local friendStatus = GetFriendStatus(player)
	debugprint (tostring(friendStatus))
	local showRankMenu = IsPersonalServer and LocalPlayer.PersonalServerRank >= PrivilegeLevel['Admin'] and LocalPlayer.PersonalServerRank > SelectedPlayer.PersonalServerRank
	
	
	local ReportPlayerButton = MakePopupButton(PopUpPanel,'Report Player',0)
	ReportPlayerButton.MouseButton1Click:connect(function() OpenAbuseDialog() end)
	local FriendPlayerButton = MakePopupButton(PopUpPanel,'Friend',1, not showRankMenu and  friendStatus~=Enum.FriendStatus.FriendRequestReceived)
	FriendPlayerButton.MouseButton1Click:connect(OnFriendButtonSelect)
	

	if friendStatus==Enum.FriendStatus.Friend then
		FriendPlayerButton:FindFirstChild('ButtonText').Text='UnFriend Player'
	elseif friendStatus==Enum.FriendStatus.Unknown or friendStatus==Enum.FriendStatus.NotFriend then
		FriendPlayerButton:FindFirstChild('ButtonText').Text='Send Request'
	elseif friendStatus==Enum.FriendStatus.FriendRequestSent then
		FriendPlayerButton:FindFirstChild('ButtonText').Text='Revoke Request'
	elseif friendStatus==Enum.FriendStatus.FriendRequestReceived then
		FriendPlayerButton:FindFirstChild('ButtonText').Text='Accept Friend'
		local FriendRefuseButton = MakePopupButton(PopUpPanel,'Decline Friend',2,not showRankMenu)
		FriendRefuseButton.MouseButton1Click:connect(OnFriendRefuseButtonSelect)
		nextIndex=nextIndex+1
	end

	if showRankMenu then
		local BanPlayerButton = MakePopupButton(PopUpPanel,'Ban',nextIndex)
		local VisitorButton = MakePopupButton(PopUpPanel,'Visitor',nextIndex+1)
		local MemberButton = MakePopupButton(PopUpPanel,'Member',nextIndex+2)
		local AdminButton = MakePopupButton(PopUpPanel,'Admin',nextIndex+3,true)
		
		BanPlayerButton.MouseButton1Click:connect(function()
			OnPrivilegeLevelSelect(player,PrivilegeLevel['Banned'],BanPlayerButton,VisitorButton,MemberButton,AdminButton) 
		end)
		VisitorButton.MouseButton1Click:connect(function()
			OnPrivilegeLevelSelect(player,PrivilegeLevel['Visitor'],BanPlayerButton,VisitorButton,MemberButton,AdminButton)
		end)
		MemberButton.MouseButton1Click:connect(function()
			OnPrivilegeLevelSelect(player,PrivilegeLevel['Member'],BanPlayerButton,VisitorButton,MemberButton,AdminButton) 
		end)
		AdminButton.MouseButton1Click:connect(function()
			OnPrivilegeLevelSelect(player,PrivilegeLevel['Admin'],BanPlayerButton,VisitorButton,MemberButton,AdminButton)
		end)
		
		HighlightMyRank(SelectedPlayer,BanPlayerButton,VisitorButton,MemberButton,AdminButton)
	end

	PopUpPanel:TweenPosition(UDim2.new(0,0,0,0), "Out", "Linear", BASE_TWEEN,true)
	Delay(0, function()
		local tconnection
		tconnection = Mouse.Button1Down:connect(function()
			tconnection:disconnect()
			ClosePopUpPanel()
		end)
	end)
	
	local myFrame = entry['Frame']
	-- THIS IS GARBAGE.
	-- if I parent to frame to auto update position, it gets clipped
	-- sometimes garbage is the only option.
	Spawn(function()
		while InPopupWaitForClick do
			PopUpClipFrame.Position=UDim2.new( 0,myFrame.AbsolutePosition.X-PopUpClipFrame.Size.X.Offset,0,myFrame.AbsolutePosition.Y)
			wait()
		end
	end)
	
end

--[[
	Called when a player entry in the leaderboard is clicked
	either will highlight entry and start the drag event, or open a popup menu
	@Args:
	entry	the player entry clicked
--]]
function OnPlayerEntrySelect(entry,startx,starty)

	if not InPopupWaitForClick then
	
		SelectedPlayerEntry = entry
		SelectedPlayer = entry['Player']
		
		StartDrag(entry,startx,starty)
	end

	
end

function ActivatePlayerEntryPanel(entry)
	entry['Frame'].BackgroundColor3 = Color3.new(0,1,1)
	Spawn(function() TweenProperty(entry['Frame'],'BackgroundTransparency',1,.5,.5) end)
	InPopupWaitForClick=true
	InitMovingPanel(entry,entry['Player'])
end

--[[
	the basic update for the playerlist mode's state,
	assures the order and length of the player frames
--]]
function PlayerListModeUpdate()
	RecreateScoreColumns(PlayerFrames)
	table.sort(PlayerFrames,PlayerSortFunction)
	for i,val in ipairs(PlayerFrames) do
		MiddleFrames[i] = val['Frame']
	end
	for i = #PlayerFrames + 1,#MiddleFrames,1 do
		MiddleFrames[i] = nil
	end
	UpdateMinimize()
end
--[[
	this one's a doozie, happens when a player is added to the game
	inits their player frame and player entry, assigns them to a team if possible,
	and hooks up their leaderstats
	@Args:
	nplayer		new player object to insert
--]]
function GetMembershipTypeIconWidth(membershipType, name)
	return ADMIN_ICON_WIDTHS[name:lower()] or 16
end

function InsertPlayerFrame(nplayer)
	if HIDDEN_PLAYERS[nplayer.Name:lower()] == true then return end
	
	while AddingFrameLock do debugprint('waiting to insert '..nplayer.Name) wait(1/30) end 
	AddingFrameLock = true
	
	local nFrame = MiddleTemplate:Clone()
	WaitForChild(WaitForChild(nFrame,'TitleFrame'),'Title').Text = GetAliasOf(nplayer.Name)
	coroutine.resume(coroutine.create(function() nFrame.TitleFrame:WaitForChild 'DropShadow' while wait(1) do
		nFrame.TitleFrame.Title.Text = GetAliasOf(nplayer.Name)
		nFrame.TitleFrame.DropShadow.Text = GetAliasOf(nplayer.Name)
	end end))
	
	nFrame.Position = UDim2.new(1,0,((#MiddleFrames) * nFrame.Size.Y.Scale),0)
	
	local nfriendstatus = GetFriendStatus(nplayer)
	
	local oldIconWidth = 0
	
	coroutine.resume(coroutine.create(function() while true do
		nFrame:FindFirstChild('BCLabel').Image = getMembershipTypeIcon(nplayer.MembershipType,nplayer.Name)
		local membershipIconWidth = GetMembershipTypeIconWidth(nplayer.MembershipType,nplayer.Name)+5
		local iconWidthDiff = membershipIconWidth - oldIconWidth
		oldIconWidth = membershipIconWidth
		
		nFrame:FindFirstChild('BCLabel').Size = UDim2.new(0, membershipIconWidth-5, 0, 16)
		
		nFrame:FindFirstChild('FriendLabel').Image = getFriendStatusIcon(nfriendstatus)
		nFrame.Name = nplayer.Name
		
		--move for bc label
		nFrame.FriendLabel.Position=nFrame.FriendLabel.Position+UDim2.new(0,iconWidthDiff,0,0)
		nFrame.TitleFrame.Title.Position=nFrame.TitleFrame.Title.Position+UDim2.new(0,iconWidthDiff,0,0)
		
		if(nFrame:FindFirstChild('FriendLabel').Image ~= '') then
			nFrame.TitleFrame.Title.Position=nFrame.TitleFrame.Title.Position+UDim2.new(0,iconWidthDiff,0,0)
		end
		
		-- custom background colors
		if CUSTOM_LABEL_BACKGROUND_COLORS[nplayer.Name:lower()] ~= nil then
			nFrame.BackgroundTransparency = .5
			nFrame.BackgroundColor3 = CUSTOM_LABEL_BACKGROUND_COLORS[nplayer.Name:lower()]
			nFrame.BorderSizePixel = 0
		else
			nFrame.BackgroundTransparency = 1
		end
		
		-- custom name colors
		if CUSTOM_LABEL_NAME_COLORS[nplayer.Name:lower()] ~= nil then
			nFrame.TitleFrame.Title.TextColor3 = CUSTOM_LABEL_NAME_COLORS[nplayer.Name:lower()]
		else
			nFrame.TitleFrame.Title.TextColor3 = Color3.new(1, 1, 1)
		end
		wait(1)
	end end))
	
	if nplayer.Name == LocalPlayer.Name then
		nFrame.TitleFrame.Title.Font = 'ArialBold'
		nFrame.PlayerScore.Font = 'ArialBold'
		ChangeHeaderName(GetAliasOf(nplayer.Name))
		local dropShadow = nFrame.TitleFrame.Title:Clone()
		dropShadow.TextColor3 = Color3.new(0,0,0)
		dropShadow.TextTransparency=0
		dropShadow.ZIndex=3
		nFrame.TitleFrame.Title.ZIndex = 4
		dropShadow.Position=nFrame.TitleFrame.Title.Position+UDim2.new(0,1,0,1)
		dropShadow.Name='DropShadow'
		dropShadow.Parent= nFrame.TitleFrame
	else
		--Delay(2, function () OnFriendshipChanged(nplayer,LocalPlayer:GetFriendStatus(nplayer)) end)
	end
	nFrame.TitleFrame.Title.Font = 'ArialBold'

	
	nFrame.Parent = ListFrame
	nFrame:TweenPosition(UDim2.new(.5,0,((#MiddleFrames) * nFrame.Size.Y.Scale),0), "Out", "Linear", BASE_TWEEN,true)
	UpdateMinimize()
	local nentry = {}
	nentry['Frame'] = nFrame
	nentry['Player'] = nplayer
	nentry['ID'] = AddId
	AddId = AddId + 1
	table.insert(PlayerFrames,nentry)
	if #TeamFrames~=0 then
		
		if nplayer.Neutral then
			nentry['MyTeam'] = nil
			if not NeutralTeam then 
				AddNeutralTeam() 
			else
				AddPlayerToTeam(NeutralTeam,nentry)
			end
			
		else
			local addedToTeam=false
			for i,tval in ipairs(TeamFrames) do
				if tval['MyTeam'].TeamColor == nplayer.TeamColor then
					AddPlayerToTeam(tval,nentry)
					nentry['MyTeam'] = tval
					addedToTeam=true
				end
			end
			if not addedToTeam then
				nentry['MyTeam']=nil
				if not NeutralTeam then 
					AddNeutralTeam() 
				else
					AddPlayerToTeam(NeutralTeam,nentry)
				end
				nentry['MyTeam'] = NeutralTeam
			end
		end
		
	end
	
	if  nplayer:FindFirstChild('leaderstats') then
		LeaderstatsAdded(nentry)
	end
	
	nplayer.ChildAdded:connect(function(nchild) 
		if nchild.Name == 'leaderstats' then
			while AddingFrameLock do debugprint('in adding leaderstats lock') wait(1/30) end
			AddingFrameLock = true
			LeaderstatsAdded(nentry)
			AddingFrameLock = false
		end
	end)

	nplayer.ChildRemoved:connect(function (nchild)
		if nplayer==LocalPlayer and nchild.Name == 'leaderstats' then
			LeaderstatsRemoved(nchild,nentry)
		end
	end)
	nplayer.Changed:connect(function(prop)PlayerChanged(nentry,prop) end)
	
	local listener = WaitForChild(nFrame,'ClickListener')
	listener.Active = true
	listener.MouseButton1Down:connect(function(nx,ny) OnPlayerEntrySelect(nentry, nx,ny) end)
	
	AddMiddleBGFrame()
	BaseUpdate()
	AddingFrameLock = false
end

--[[
	Note:major optimization can be done here
	removes this player's frame if it exists, calls base update
--]]
function RemovePlayerFrame(tplayer)
	while AddingFrameLock do debugprint('in removing player frame lock') wait(1/30) end 
	AddingFrameLock = true
	
	local tteam
	for i,key in ipairs(PlayerFrames) do
		if tplayer == key['Player'] then
			if PopUpClipFrame.Parent == key['Frame'] then
				PopUpClipFrame.Parent = nil
			end
			key['Frame']:Destroy()
			tteam=key['MyTeam']
			table.remove(PlayerFrames,i)
		end
	end
	if tteam then
		for j,tentry in ipairs(tteam['MyPlayers']) do
			if tentry['Player'] == tplayer then 
				RemovePlayerFromTeam(tteam,j) 
			end
		end
	end

	RemoveMiddleBGFrame()
	UpdateMinimize()
	BaseUpdate()
	AddingFrameLock = false
end

Players.ChildRemoved:connect(RemovePlayerFrame)

----------------------------  
-- Team Callback Functions
---------------------------- 
--[[
	turns a list of team entries with sub lists of players into a single ordered
	list, in the correct order,and of the correct length
	@Args:
	tframes		the team entries to unroll
	outframes	the list to unroll these entries into
--]]
function UnrollTeams(tframes,outframes)
	local numEntries = 0
	if NeutralTeam and not NeutralTeam['IsHidden'] then
		for i,val in ipairs(NeutralTeam['MyPlayers']) do
			numEntries = numEntries + 1
			outframes[numEntries] = val['Frame']
		end
		numEntries = numEntries + 1
		outframes[numEntries] = NeutralTeam['Frame']
	end
	for i,val in ipairs(tframes) do
		if not val['IsHidden'] then
			for j,pval in ipairs(val.MyPlayers) do
				numEntries = numEntries + 1
				outframes[numEntries] = pval['Frame']
			end
			numEntries = numEntries + 1
			outframes[numEntries] = val['Frame']
		end
	end
 -- clear any additional entries from outframes
	for i = numEntries + 1,#outframes,1 do
		outframes[i] = nil
	end
end
--[[
	uses lua's table.sort to sort the teams
--]]
function TeamSortFunc(a,b)
	if a['TeamScore'] == b['TeamScore'] then
		return a['ID'] < b['ID']
	end
	if not a['TeamScore'] then return false end
	if not b['TeamScore'] then return true end
	return a['TeamScore'] < b['TeamScore']

end
--[[
	consider adding lock with wait for performance
	sorts each of the team's player lists induvidually, adds up the team scores.
	@Args:
	tentries		table of team entries	
--]]
function SortTeams(tentries)
	
	for i,val in ipairs(tentries) do

		table.sort(val['MyPlayers'],PlayerSortFunction)
		AddTeamScores(val)
	end
	table.sort(tentries,TeamSortFunc)
end
--[[
	base update for team mode, adds up the scores of all teams, sorts them,
	then unrolls them into middleframes
--]]
function TeamListModeUpdate()
	RecreateScoreColumns(PlayerFrames)
	SortTeams(TeamFrames)
	if NeutralTeam then
		AddTeamScores(NeutralTeam)
		--RecreateScoreColumns(NeutralTeam['MyPlayers'])
	end
	UnrollTeams(TeamFrames,MiddleFrames)
end
--[[
	adds up all the score of this team's players to form the team score
	@Args:
	team		team entry to sum the scores of
--]]
function AddTeamScores(team)
	
	for j = 1, #ScoreNames,1 do
		local i = ScoreNames[j]
		local tscore = 0
		for _,j in ipairs(team['MyPlayers']) do
			local tval = j['Player']:FindFirstChild('leaderstats') and j['Player'].leaderstats:FindFirstChild(i['Name'])
			if tval and not tval:IsA('StringValue') then
				tscore = tscore + GetScoreValue((j['Player'].leaderstats)[i['Name'] ])
			end
		end
		if team['Frame']:FindFirstChild(i['Name']) then
			--team['Frame'][i['Name'] ].Size = UDim2.new(1 - (ScrollBarFrame.Size.X.Scale * 2),- ((j-1) * SpacingPerStat),1,0)
			team['Frame'][i['Name'] ].Text = tostring(tscore)
		end
	end
	UpdateMinimize()
	
end

--[[
	finds previous team this player was on, and if it exists calls removeplayerfromteam
	@Args
	entry	Player entry
--]]
function FindRemovePlayerFromTeam(entry)
	if entry['MyTeam'] then 
		for j,oldEntry in ipairs(entry['MyTeam']['MyPlayers']) do
			if oldEntry['Player'] == entry['Player'] then
				RemovePlayerFromTeam(entry['MyTeam'],j)
				return
			end
		end
	elseif NeutralTeam then
		for j,oldEntry in ipairs(NeutralTeam['MyPlayers']) do
			if oldEntry['Player'] == entry['Player'] then
				RemovePlayerFromTeam(NeutralTeam,j)
				return
			end
		end
	end
end
--[[
	removes a single player from a given team (not usually called directly)
	@Args:
	teamEntry		team entry to remove player from
	index			index of player in 'MyPlayers' list to remove
--]]
function RemovePlayerFromTeam(teamEntry,index)
	table.remove(teamEntry['MyPlayers'],index)
	--if teamEntry['AutoHide'] and #teamEntry['MyPlayers'] == 0 then
	if teamEntry==NeutralTeam and #teamEntry['MyPlayers']==0 then
		RemoveNeutralTeam()
	end
end
--[[
	adds player entry entry to teamentry
	removes them from any previous team
	@Args:
	teamEntry		entry of team to add player to
	entry			player entry to add to this team
--]]
function AddPlayerToTeam(teamEntry,entry)
	FindRemovePlayerFromTeam(entry)
	table.insert(teamEntry['MyPlayers'],entry)
	entry['MyTeam'] = teamEntry
	if teamEntry['IsHidden'] then
		teamEntry['Frame'].Parent = ListFrame
		AddMiddleBGFrame()
	end
	teamEntry['IsHidden'] = false
end


function SetPlayerToTeam(entry)
	FindRemovePlayerFromTeam(entry)
	-- check to see if team exists, if it does add to that team
	local setToTeam = false
	for i,tframe in ipairs(TeamFrames) do
	-- add my entry on the new team
	if tframe['MyTeam'].TeamColor == entry['Player'].TeamColor then
			AddPlayerToTeam(tframe,entry)
			setToTeam = true
		end
	end
	-- if player was set to an invalid team, then set it back to neutral
	if not setToTeam and #(game.Teams:GetTeams())>0 then
		debugprint(entry['Player'].Name..'could not find team')
		entry['MyTeam']=nil
		if not NeutralTeam then 
			AddNeutralTeam()
		else AddPlayerToTeam(NeutralTeam,entry) end
	end
end

--[[
	Note:another big one, consiter breaking up
	called when any children of player changes
	handles 'Neutral', teamColor, Name and MembershipType changes
	@Args
	entry		Player entry changed
	property	name of property changed
--]]
function PlayerChanged(entry, property)
	while PlayerChangedLock do 
		debugprint('in playerchanged lock')
		wait(1/30)
	end
	PlayerChangedLock=true
	if property == 'Neutral' then
		-- if player changing to neutral
		if entry['Player'].Neutral and #(game.Teams:GetTeams())>0 then
			debugprint(entry['Player'].Name..'setting to neutral')
			FindRemovePlayerFromTeam(entry)
			entry['MyTeam']=nil
			if not NeutralTeam then
				debugprint(entry['Player'].Name..'creating neutral team')
				AddNeutralTeam()
			else
				debugprint(entry['Player'].Name..'adding to neutral team')
				AddPlayerToTeam(NeutralTeam,entry)
			end
		elseif #(game.Teams:GetTeams())>0 then -- else player switching to a team, or a weird edgecase
			debugprint(entry['Player'].Name..'has been set non-neutral')
			SetPlayerToTeam(entry)
		end
		BaseUpdate()
	elseif property == 'TeamColor' and not entry['Player'].Neutral and entry['Player'] ~= entry['MyTeam'] then
		debugprint(entry['Player'].Name..'setting to new team')
		SetPlayerToTeam(entry)
		BaseUpdate()
	elseif property == 'Name' or property == 'MembershipType' then
		entry['Frame']:FindFirstChild('BCLabel').Image = getMembershipTypeIcon(entry['Player'].MembershipType,entry['Player'].Name)
		entry['Frame'].Name = entry['Player'].Name
		entry['Frame'].TitleFrame.Title.Text = entry['Player'].Name
		if(entry['Frame'].BCLabel.Image ~= '') then
			entry['Frame'].TitleFrame.Title.Position=UDim2.new(.01, 30, .1, 0)
		end
		if entry['Player'] == LocalPlayer then
			entry['Frame'].TitleFrame.DropShadow.Text= entry['Player'].Name
			ChangeHeaderName(entry['Player'].Name)
		end
		BaseUpdate()
	end
	PlayerChangedLock=false
end

function OnFriendshipChanged(player,friendStatus)

	Delay(.5,function()
		debugprint('friend status changed for:'..player.Name .." ".. tostring(friendStatus) .. " vs " .. tostring(GetFriendStatus(player)) )
		for _, entry in ipairs(PlayerFrames) do
			if entry['Player']==player then
				local nicon = getFriendStatusIcon(friendStatus)
				if nicon == '' and entry['Frame'].FriendLabel.Image ~= '' then
					entry['Frame'].TitleFrame.Title.Position=entry['Frame'].TitleFrame.Title.Position-UDim2.new(0,17,0,0)
				elseif nicon ~= '' and entry['Frame'].FriendLabel.Image == '' then
					entry['Frame'].TitleFrame.Title.Position=entry['Frame'].TitleFrame.Title.Position+UDim2.new(0,17,0,0)
					debugprint('confirmed status:'..player.Name)
				end
				entry['Frame'].FriendLabel.Image = nicon
				return
			end
		end
	end)
end

--LocalPlayer.FriendStatusChanged:connect(OnFriendshipChanged)

--[[
	adds a neutral team if nessisary
	Note: a lot of redundant code here, might want to refactor to share a function with insertteamframe
--]]
function AddNeutralTeam()
	if not TEAMS_ENABLED then return end
	while NeutralTeamLock do debugprint('in neutral team 2 lock') wait() end 
	NeutralTeamLock = true
	
	local defaultTeam = Instance.new('Team')
	defaultTeam.TeamColor = BrickColor.new('White')
	defaultTeam.Name = 'Neutral'
	local nentry = {}
	nentry['MyTeam'] = defaultTeam
	nentry['MyPlayers'] = {}
	nentry['Frame'] = MiddleTemplate:Clone()
	WaitForChild(WaitForChild(nentry['Frame'],'TitleFrame'),'Title').Text = defaultTeam.Name
	nentry['Frame'].TitleFrame.Position=UDim2.new(nentry['Frame'].TitleFrame.Position.X.Scale,nentry['Frame'].TitleFrame.Position.X.Offset,.1,0)
	nentry['Frame'].TitleFrame.Size=UDim2.new(nentry['Frame'].TitleFrame.Size.X.Scale,nentry['Frame'].TitleFrame.Size.X.Offset,.8,0)
	nentry['Frame'].TitleFrame.Title.Font = 'ArialBold'
	nentry['Frame'].Position = UDim2.new(1,0,((#MiddleFrames) * nentry['Frame'].Size.Y.Scale),0)
	WaitForChild(nentry['Frame'],'ClickListener').MouseButton1Down:connect(function(nx,ny) StartDrag(nentry,nx,ny) end)
	nentry['Frame'].ClickListener.BackgroundColor3 = Color3.new(1,1,1)
	nentry['Frame'].ClickListener.BackgroundTransparency = .7
	nentry['Frame'].ClickListener.AutoButtonColor=false
	nentry['AutoHide'] = true
	nentry['IsHidden'] = true
	for _,i in pairs(PlayerFrames) do
		if i['Player'].Neutral or not i['MyTeam'] then 
			AddPlayerToTeam(nentry,i)
		end
	end
	if #nentry['MyPlayers'] > 0 then
		NeutralTeam = nentry
		UpdateMinimize()
		BaseUpdate()
	end
    NeutralTeamLock = false
end

function RemoveNeutralTeam()
	while NeutralTeamLock do debugprint('in neutral team lock') wait() end 
	NeutralTeamLock = true
	NeutralTeam['Frame']:Destroy()
	NeutralTeam=nil
	RemoveMiddleBGFrame()
	NeutralTeamLock = false
end

--[[
	
--]]
function TeamScoreChanged(entry,nscore)
	WaitForChild(entry['Frame'],'PlayerScore').Text = tostring(nscore)
	entry['TeamScore'] = nscore
end
--[[
	called when child added to a team, used for autohide functionality
	Note: still has teamscore, consiter removing
--]]
function TeamChildAdded(entry,nchild)
	if nchild.Name == 'AutoHide' then
		entry['AutoHide'] = true
	elseif nchild.Name == 'TeamScore' then
		WaitForChild(entry['Frame'],'PlayerScore').Text = tostring(nchild.Value)
		entry['TeamScore'] = nchild.Value
		nchild.Changed:connect(function() TeamScoreChanged(entry,nchild.Value) end)
	end
end
--[[
	called when child added to a team, used for autohide functionality
	Note: still has teamscore, consiter removing
--]]
function TeamChildRemoved(entry,nchild)
	if nchild.Name == 'AutoHide' then
		entry['AutoHide'] = false
	elseif nchild.Name == 'TeamScore' then
		WaitForChild(entry['Frame'],'PlayerScore').Text = ""
		entry['TeamScore'] = nil
	end
end

function TeamChanged(entry, property)
	if property=='Name' then
		WaitForChild(WaitForChild(entry['Frame'],'TitleFrame'),'Title').Text = entry['MyTeam'].Name
		
	elseif property=='TeamColor' then
		entry['Frame'].ClickListener.BackgroundColor3 = entry['MyTeam'].TeamColor.Color
		
		for _,i in pairs(TeamFrames) do
			if i['MyTeam'].TeamColor == entry['MyTeam'] then
				RemoveTeamFrame(entry['MyTeam'])	--NO DUPLICATE TEAMS!
			end
		end
		
		entry['MyPlayers']={}
		
		for _,i in pairs(PlayerFrames) do
			SetPlayerToTeam(i) 
		end
		BaseUpdate()
	end
end

--[[
	creates team entry and frame for this team, sets up listeners for this team
	adds any players intended for this team,Creates neutral team if this is the first team added
	Note:might be best to break this into multiple functions to simplify
	@Args:
	nteam	new team object added
--]]
function InsertTeamFrame(nteam)
	if not TEAMS_ENABLED then return end
	while AddingFrameLock do debugprint('in adding team frame lock') wait(1/30) end 
	AddingFrameLock = true
	--for _,i in pairs(TeamFrames) do
	local nentry = {}
	nentry['MyTeam'] = nteam
	nentry['MyPlayers'] = {}
	nentry['Frame'] = MiddleTemplate:Clone()
	WaitForChild(WaitForChild(nentry['Frame'],'TitleFrame'),'Title').Text = nteam.Name
	nentry['Frame'].TitleFrame.Title.Font = 'ArialBold'
	nentry['Frame'].TitleFrame.Title.FontSize = 'Size18'
	nentry['Frame'].TitleFrame.Position=UDim2.new(nentry['Frame'].TitleFrame.Position.X.Scale,nentry['Frame'].TitleFrame.Position.X.Offset,.1,0)
	nentry['Frame'].TitleFrame.Size=UDim2.new(nentry['Frame'].TitleFrame.Size.X.Scale,nentry['Frame'].TitleFrame.Size.X.Offset,.8,0)
	nentry['Frame'].Position = UDim2.new(1,0,((#MiddleFrames) * nentry['Frame'].Size.Y.Scale),0)
	WaitForChild(nentry['Frame'],'ClickListener').MouseButton1Down:connect(function(nx,ny) StartDrag(nentry,nx,ny) end)
	nentry['Frame'].ClickListener.BackgroundColor3 = nteam.TeamColor.Color
	nentry['Frame'].ClickListener.BackgroundTransparency = .7
	nentry['Frame'].ClickListener.AutoButtonColor=false
	AddId = AddId + 1
	nentry['ID'] = AddId
	nentry['AutoHide'] = false
	if nteam:FindFirstChild('AutoHide') then
		nentry['AutoHide'] = true
	end
	if nteam:FindFirstChild('TeamScore') then
		TeamChildAdded(nentry,nteam.TeamScore)
		
	end
	
	nteam.ChildAdded:connect(function(nchild) TeamChildAdded(nentry,nchild) end)
	nteam.ChildRemoved:connect(function(nchild) TeamChildRemoved(nentry,nchild) end)
	nteam.Changed:connect(function(prop) TeamChanged(nentry,prop) end)
	
	for _,i in pairs(PlayerFrames) do
		if not i['Player'].Neutral and i['Player'].TeamColor == nteam.TeamColor then 
			AddPlayerToTeam(nentry,i) 
		end
	end
	nentry['IsHidden'] = false
	if not nentry['AutoHide'] or #nentry['MyPlayers'] > 0 then
		
		nentry['Frame'].Parent = ListFrame
		nentry['Frame']:TweenPosition(UDim2.new(.5,0,((#MiddleFrames) * nentry['Frame'].Size.Y.Scale),0), "Out", "Linear", BASE_TWEEN,true)
		AddMiddleBGFrame()
	else
		nentry['IsHidden'] = true
		nentry['Frame'].Parent = nil
	end

	table.insert(TeamFrames,nentry)
	UpdateMinimize()
	BaseUpdate()
	if #TeamFrames == 1 and not NeutralTeam then
		AddNeutralTeam()
	end
	AddingFrameLock = false
end
--[[
	removes team from team list
	@Args:
	nteam		Teamobject to remove
--]]
function RemoveTeamFrame(nteam)
	while AddingFrameLock do debugprint('in removing team frame lock') wait(1/30) end 
	AddingFrameLock = true
	if IsMinimized.Value then
	end
	local myEntry
	for i,key in ipairs(TeamFrames) do
		if nteam == key['MyTeam'] then
			myEntry = key
			key['Frame']:Destroy()
			table.remove(TeamFrames,i)
		end
	end
	if #TeamFrames==0 then
		debugprint('removeteamframe, remove neutral')
		if NeutralTeam then 
			RemoveNeutralTeam()
		end
	end
	for i,key in ipairs(myEntry['MyPlayers']) do
		RemovePlayerFromTeam(myEntry,i) 
		PlayerChanged(key, 'TeamColor')
	end
	RemoveMiddleBGFrame()
	BaseUpdate()
	AddingFrameLock = false
end

function TeamAdded(nteam)
	InsertTeamFrame(nteam)
end

function TeamRemoved(nteam)
	RemoveTeamFrame(nteam)
end
 --------------------------------- 
--[[
	called when ANYTHING changes the state of the playerlist
	re-sorts everything,assures correct positions of all elements
--]]
function BaseUpdate()
	while BaseUpdateLock do debugprint('in baseupdate lock') wait(1/30) end
	BaseUpdateLock = true
	--print ('baseupdate')
	UpdateStatNames()
	
	if #TeamFrames == 0 and not NeutralTeam then
		PlayerListModeUpdate()
	else
		TeamListModeUpdate()
	end
	for i,key in ipairs(MiddleFrames) do
		if key.Parent ~= nil then
			key:TweenPosition(UDim2.new(.5,0,((#MiddleFrames - (i)) * key.Size.Y.Scale),0), "Out", "Linear", BASE_TWEEN,true)
		end
	end
	if not IsMinimized.Value and #MiddleFrames>DefaultEntriesOnScreen then
		UpdateScrollPosition()
	end
	
	UpdateMinimize()

	UpdateScrollBarSize()
	UpdateScrollPosition()

	UpdateScrollBarVisibility()
	--debugprint('EndBaseUpdate')
	BaseUpdateLock = false
end

--[[
	code for attaching tab key to maximizing player list
--]]
--game.GuiService:AddKey("\t")
local LastTabTime = time()
Mouse.KeyDown:connect(
function(key)
	if key == "\t" then
		debugprint('caught tab key')
		local modalCheck, isModal = pcall(function() return game.GuiService.IsModalDialog end)
		if modalCheck == false or (modalCheck and isModal == false) then
			if time() - LastTabTime > 0.4 then
				LastTabTime = time()
				if IsTabified.Value then
					if not IsMaximized.Value then
						ScreenGui:TweenPosition(UDim2.new(0, 0, 0,0),'Out','Linear',BASE_TWEEN*1.2,true)
						IsMaximized.Value = true
					else
						ScreenGui:TweenPosition(UDim2.new(NormalBounds.X.Scale, NormalBounds.X.Offset-10, 0,0),'Out','Linear',BASE_TWEEN*1.2,true)
						IsMaximized.Value = false
						IsMinimized.Value=true
					end
				else
					ToggleMaximize()
				end
				
			end
		end
	end
end)


function PlayersChildAdded(tplayer)
	if tplayer:IsA('Player') then 
		Spawn(function() debugPlayerAdd(tplayer) end) 
	else
		BlowThisPopsicleStand()
	end
end

function coreGuiChanged(coreGuiType, enabled)
--	if coreGuiType == Enum.CoreGuiType.All or coreGuiType == Enum.CoreGuiType.PlayerList then
--		MainFrame.Visible = enabled
--	end
end

function TeamsChildAdded(nteam)
	if nteam:IsA('Team') then 
		TeamAdded(nteam)
	else
		BlowThisPopsicleStand() 
	end
end

function TeamsChildRemoved(nteam)
	if nteam:IsA('Team')  then 
		TeamRemoved(nteam) 
	else
		BlowThisPopsicleStand() 
	end
end

 ----------------------------  
 -- Hookups and initialization
 ----------------------------  
function debugPlayerAdd(p)
	InsertPlayerFrame(p)
end

pcall(function()
	coreGuiChanged(Enum.CoreGuiType.PlayerList, Game.StarterGui:GetCoreGuiEnabled(Enum.CoreGuiType.PlayerList))
	Game.StarterGui.CoreGuiChangedSignal:connect(coreGuiChanged)
end)
 
while not game:GetService('Teams') do wait(1/30) debugprint('Waiting For Teams') end
for _,i in pairs(game.Teams:GetTeams()) do TeamAdded(i) end
for _,i in pairs(Players:GetPlayers()) do Spawn(function() debugPlayerAdd(i) end) end

game.Teams.ChildAdded:connect(TeamsChildAdded)
game.Teams.ChildRemoved:connect(TeamsChildRemoved)
Players.ChildAdded:connect(PlayersChildAdded)

InitReportAbuse()
AreNamesExpanded.Value = true
BaseUpdate()



--UGGGLY,find a better way later
--wait(2)
IsPersonalServer= not not game.Workspace:FindFirstChild("PSVariable")

 ----------------------------  
 -- Running Logic
 ---------------------------- 

 --debug stuffs, will only run for 'newplayerlistisbad'
 if LocalPlayer.Name == 'newplayerlistisbad' or LocalPlayer.Name == 'imtotallyadmin' then
	debugFrame.Parent = ScreenGui
	Spawn(function()
		while true do
			local str_players=''
			for _,i in pairs(game.Players:GetPlayers()) do
				str_players= str_players .." " .. i.Name
			end
			debugplayers.Text=str_players
			wait(.5)
		end
	end)
 end

-- custom chat
-- Gui to Lua
-- Version: 3

-- Instances:

local ClassicChat = Instance.new("ScreenGui")
local ChatFrame = Instance.new("Frame")
local ChatRenderFrame = Instance.new("Frame")
local ClickToChat = Instance.new("TextButton")
local ChatBar = Instance.new("TextBox")
local Templates = Instance.new("Folder")
local SpaceButton = Instance.new("TextButton")
local mLabel = Instance.new("TextLabel")
local pLabel = Instance.new("TextLabel")

--Properties:

ClassicChat.Name = "ClassicChat"
ClassicChat.Parent = game.CoreGui

ChatFrame.Name = "ChatFrame"
ChatFrame.Parent = ClassicChat
ChatFrame.BackgroundColor3 = Color3.new(0.698039, 0.698039, 0.698039)
ChatFrame.BackgroundTransparency = 1
ChatFrame.BorderColor3 = Color3.new(0, 0, 0)
ChatFrame.BorderSizePixel = 0
ChatFrame.Position = UDim2.new(0, 5, 0, 10)
ChatFrame.Size = UDim2.new(0, 500, 0, 120)
ChatFrame.ZIndex = 9

ChatRenderFrame.Name = "ChatRenderFrame"
ChatRenderFrame.Parent = ChatFrame
ChatRenderFrame.BackgroundColor3 = Color3.new(0.698039, 0.698039, 0.698039)
ChatRenderFrame.BackgroundTransparency = 1
ChatRenderFrame.BorderColor3 = Color3.new(0, 0, 0)
ChatRenderFrame.BorderSizePixel = 0
ChatRenderFrame.Size = UDim2.new(1.01999998, 0, 1.00999999, 0)
ChatRenderFrame.ZIndex = 9

ClickToChat.Name = "ClickToChat"
ClickToChat.Parent = ClassicChat
ClickToChat.BackgroundColor3 = Color3.new(1, 1, 1)
ClickToChat.BackgroundTransparency = 1
ClickToChat.BorderColor3 = Color3.new(0, 0, 0)
ClickToChat.BorderSizePixel = 0
ClickToChat.Position = UDim2.new(0, 0, 1, -20)
ClickToChat.Size = UDim2.new(1, 0, 0, 20)
ClickToChat.ZIndex = 9
ClickToChat.AutoButtonColor = false
ClickToChat.Text = ""
ClickToChat.TextColor3 = Color3.new(1, 1, 1)
ClickToChat.TextSize = 12
ClickToChat.TextXAlignment = Enum.TextXAlignment.Left

ChatBar.Name = "ChatBar"
ChatBar.Parent = ClassicChat
ChatBar.BackgroundColor3 = Color3.new(0, 0, 0)
ChatBar.BorderColor3 = Color3.new(0, 0, 0)
ChatBar.BorderSizePixel = 0
ChatBar.Position = UDim2.new(0, 0, 1, -20)
ChatBar.Size = UDim2.new(1, 0, 0, 20)
ChatBar.ZIndex = 8
ChatBar.ClearTextOnFocus = false
ChatBar.PlaceholderText = "To chat click here or press the \"/\" key"
ChatBar.Text = ""
ChatBar.TextColor3 = Color3.new(1, 1, 1)
ChatBar.TextSize = 12
ChatBar.TextXAlignment = Enum.TextXAlignment.Left

Templates.Name = "Templates"
Templates.Parent = ClassicChat

SpaceButton.Name = "SpaceButton"
SpaceButton.Parent = Templates
SpaceButton.BackgroundColor3 = Color3.new(0, 0, 0)
SpaceButton.BackgroundTransparency = 1
SpaceButton.Size = UDim2.new(0, 510, 0, 12)
SpaceButton.AutoButtonColor = false
SpaceButton.Text = ""
SpaceButton.TextSize = 12

mLabel.Name = "mLabel"
mLabel.Parent = Templates
mLabel.BackgroundColor3 = Color3.new(0.698039, 0.698039, 0.698039)
mLabel.BackgroundTransparency = 1
mLabel.BorderSizePixel = 0
mLabel.Position = UDim2.new(0, 0, 1, 0)
mLabel.Size = UDim2.new(1, 0, 0.5, 0)
mLabel.Text = ""
mLabel.TextSize = 12
mLabel.TextWrapped = true
mLabel.TextXAlignment = Enum.TextXAlignment.Left
mLabel.TextYAlignment = Enum.TextYAlignment.Top

pLabel.Name = "pLabel"
pLabel.Parent = Templates
pLabel.BackgroundColor3 = Color3.new(0.698039, 0.698039, 0.698039)
pLabel.BackgroundTransparency = 1
pLabel.BorderSizePixel = 0
pLabel.Position = UDim2.new(0, 0, 1, 0)
pLabel.Size = UDim2.new(1, 0, 0.100000001, 0)
pLabel.ZIndex = 2
pLabel.Text = "Player: "
pLabel.TextSize = 12
pLabel.TextStrokeColor3 = Color3.new(0.501961, 0.501961, 0.501961)
pLabel.TextXAlignment = Enum.TextXAlignment.Left
pLabel.TextYAlignment = Enum.TextYAlignment.Top

-- Scripts:

local function DNBDUT_fake_script() -- ClassicChat.ChatScript 
	local script = Instance.new('LocalScript', ClassicChat)

	--Script modified by EkoGam3.
	--Concept credit goes to Vermis.
	
	
	
	local year = 2007
	game.StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, false)
	
	--Code
	
	if year == 2007 then
		script.Parent.ClickToChat.TextColor3 = Color3.new(1, 1, 1)
		script.Parent.ChatBar.BackgroundColor3 = Color3.new(0, 0, 0)
	end
	
	local Chat = { 
		ChatColors = {
			BrickColor.new("Bright red"),
			BrickColor.new("Bright blue"),
			BrickColor.new("Earth green"),
			BrickColor.new("Bright violet"),
			BrickColor.new("Bright orange"),
			BrickColor.new("Bright yellow"),
			BrickColor.new("Light reddish violet"),
			BrickColor.new("Brick yellow"),
		};
	
		Gui = nil,
		Frame = nil,
		RenderFrame = nil,
		TapToChatLabel = nil,
		ClickToChatButton = nil,
		Templates = nil,
		EventListener = nil,
		MessageQueue = {},
		
		Configuration = {								
			FontSize = Enum.FontSize.Size12,	
			NumFontSize = 12,
			HistoryLength = 20,
			Size = UDim2.new(0.38, 0, 0.20, 0),
			MessageColor = Color3.new(1, 1, 1),
			AdminMessageColor = Color3.new(1, 215/255, 0),
			XScale = 0.025,
			LifeTime = 45,
			Position = UDim2.new(0, 2, 0.05, 0),
			DefaultTweenSpeed = 0.15,							
		};
		
		CachedSpaceStrings_List = {},
		Messages_List = {},
		MessageThread = nil,
		TempSpaceLabel = nil,
	}
	
	function GetNameValue(pName)
		local value = 0
		for index = 1, #pName do 
			local cValue = string.byte(string.sub(pName, index, index))
			local reverseIndex = #pName - index + 1
			if #pName%2 == 1 then 
				reverseIndex = reverseIndex - 1			
			end
			if reverseIndex%4 >= 2 then 
				cValue = -cValue 			
			end 
			value = value + cValue 
		end 
		return value%8
	end 
	
	function Chat:ComputeChatColor(pName)
		return self.ChatColors[GetNameValue(pName) + 1].Color
	end 
	
	function Chat:UpdateQueue(field, diff)	 				
		for i = #self.MessageQueue, 1, -1 do 			
			if self.MessageQueue[i] then 						
				for _, label in pairs(self.MessageQueue[i]) do 						
					if label and type(label) ~= "table" and type(label) ~= "number" then					
						if label:IsA("TextLabel") or label:IsA("TextButton") then 	
							if diff then 
								label.Position = label.Position - UDim2.new(0, 0, diff, 0) 
							else											
								if field == self.MessageQueue[i] then 						
									label.Position = UDim2.new(self.Configuration.XScale, 0, label.Position.Y.Scale - field["Message"].Size.Y.Scale , 0)
								else 							
									label.Position = UDim2.new(self.Configuration.XScale, 0, label.Position.Y.Scale - field["Message"].Size.Y.Scale, 0)							
								end  
								if label.Position.Y.Scale < -0.01 then 							
									label.Visible = false 						
									label:Destroy() 
								end 
							end 
						end 
					end 						
				end 
			end 
		end	
	end 
	
	function Chat:ComputeSpaceString(pLabel)
		local nString = " "
		if not self.TempSpaceLabel then 
			self.TempSpaceLabel = self.Templates.SpaceButton
			self.TempSpaceLabel.Size = UDim2.new(0, pLabel.AbsoluteSize.X, 0, pLabel.AbsoluteSize.Y); 
		end
		self.TempSpaceLabel.Text = nString
		while self.TempSpaceLabel.TextBounds.X < pLabel.TextBounds.X do 
			nString = nString .. " "
			self.TempSpaceLabel.Text = nString 				
		end 
		nString = nString .. " "
		self.CachedSpaceStrings_List[pLabel.Text] = nString 
		self.TempSpaceLabel.Text = ""
		return nString	
	end
	
	
	function Chat:UpdateChat(cPlayer, message)
		local messageField = {["Player"] = cPlayer,["Message"] = message}	
		if coroutine.status(Chat.MessageThread) == "dead" then 				
			table.insert(Chat.Messages_List, messageField)				
			Chat.MessageThread = coroutine.create(function ()
				for i = 1, #Chat.Messages_List do 	
					local field = Chat.Messages_List[i]																														
					Chat:CreateMessage(field["Player"], field["Message"]) 						
				end 
				Chat.Messages_List = {}									
			end)
			coroutine.resume(Chat.MessageThread)
		else 
			table.insert(Chat.Messages_List, messageField)
		end 
	end 
	
	function Chat:CreateMessage(cPlayer, message)		
		local pName = cPlayer ~= nil and cPlayer.Name or "GAME"	
		message = message:gsub("^%s*(.-)%s*$", "%1")		
		self.MessageQueue[#self.MessageQueue] = (#self.MessageQueue > self.Configuration.HistoryLength) and nil or self.MessageQueue[#self.MessageQueue]
		local pLabel = self.Templates.pLabel:clone()
		pLabel.Name = pName;
		pLabel.Text = pName .. ";";
		pLabel.Parent = self.RenderFrame;			
		pLabel.TextColor3 = (cPlayer.Neutral) and Chat:ComputeChatColor(pName) or cPlayer.TeamColor.Color 
		local nString = self.CachedSpaceStrings_List[pName] or Chat:ComputeSpaceString(pLabel)
		local mLabel = self.Templates.mLabel:clone()
		mLabel.Name = pName .. " - message";					
		mLabel.TextColor3 = Chat.Configuration.MessageColor;					
		mLabel.Text = nString .. message;
		mLabel.Parent = self.RenderFrame;	
		local heightField = mLabel.TextBounds.Y	
		mLabel.Size = UDim2.new(1, 0, heightField/self.RenderFrame.AbsoluteSize.Y, 0)	
		pLabel.Size = mLabel.Size
		local yPixels = self.RenderFrame.AbsoluteSize.Y
		local yFieldSize = mLabel.TextBounds.Y
		local queueField = {}	
		queueField["Player"] = pLabel 
		queueField["Message"] = mLabel 
		queueField["SpawnTime"] = tick()
		table.insert(self.MessageQueue, 1, queueField)		
		Chat:UpdateQueue(queueField)
	end
	
	function Chat:CreateChatBar()	
		self.ClickToChatButton = self.Gui:WaitForChild("ClickToChat")
		self.ChatBar = self.Gui:WaitForChild("ChatBar")
		local mouse = game.Players.LocalPlayer:GetMouse()
		mouse.KeyDown:connect(function (key)
			if key:byte() == 47 or key == "/" then
				self.ClickToChatButton.Visible = false
				if year > 2007 then
					self.ChatBar.BackgroundColor3 = Color3.new(0, 0, 0)
				end
				self.ChatBar:CaptureFocus()
			end
		end)
		self.ClickToChatButton.MouseButton1Click:connect(function ()
			self.ClickToChatButton.Visible = false
			if year > 2007 then
				self.ChatBar.BackgroundColor3 = Color3.new(0, 0, 0)
			end
			self.ChatBar:CaptureFocus()
		end)	
	end
	
	function Chat:PlayerChat(message)
		local m = Instance.new("StringValue")
		m.Name = "NewMessage"
		m.Value = message
		m.Parent = game.Players.LocalPlayer
		game:GetService("Debris"):AddItem(m, 2)
	end
	
	function Chat:CreateGui()
		self.Gui = script.Parent
		self.Frame = self.Gui:WaitForChild("ChatFrame")
		self.RenderFrame = self.Frame:WaitForChild("ChatRenderFrame")
		self.Templates = self.Gui:WaitForChild("Templates")	
		Chat:CreateChatBar()
		self.ChatBar.FocusLost:connect(function(enterPressed)
			if enterPressed then
				local txt = self.ChatBar.Text
				Chat:CreateMessage(game.Players.LocalPlayer,txt)
				game.ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(txt ,"All")
				self.ChatBar.Text = ''
			end
		end)	
	end
	
	function Chat:TrackPlayerChats()
		local function chatRegister(p)
			p.ChildAdded:connect(function (obj)
				if obj:IsA("StringValue") and obj.Name == "NewMessage" then
					if game.Players.LocalPlayer.Neutral or p.TeamColor == game.Players.LocalPlayer.TeamColor then
						Chat:UpdateChat(p, obj.Value)
					end
				end
			end)
		end
		for _,v in pairs(game.Players:GetPlayers()) do
			chatRegister(v)
		end
		game.Players.PlayerAdded:connect(chatRegister)
	end
	
	function Chat:CullThread()
		Spawn(function ()
			while true do 
				if #self.MessageQueue > 0 then 
					for _, field in pairs(self.MessageQueue) do 				
						if field["SpawnTime"] and field["Player"] and field["Message"] and tick() - field["SpawnTime"] > self.Configuration.LifeTime then 
							field["Player"].Visible = false 
							field["Message"].Visible = false 
						end 
					end 
				end 
				wait(5)
			end
		end)
	end
	
	function Chat:Initialize()			
		Chat:CreateGui()
		Chat:TrackPlayerChats()
		self.MessageThread = coroutine.create(function () end)
							 coroutine.resume(self.MessageThread)
		Chat:CullThread()
	end
	
	Chat:Initialize()
	
	local plrs = game.Players
	
	local detect = function(p)
		p.Chatted:Connect(function(msg)
			Chat:CreateMessage(p,msg)
		end)
	end
	
	plrs.PlayerAdded:Connect(function(p)
		detect(p)
	end)
	
	for i,p in pairs(plrs:GetPlayers()) do
		detect(p)
	end
end
coroutine.wrap(DNBDUT_fake_script)()
local function EWRBJ_fake_script() -- ChatBar.f 
	local script = Instance.new('LocalScript', ChatBar)

	while wait() do
		if script.Parent.Text:sub(1,1) == '/' then
			script.Parent.Text = script.Parent.Text:sub(2,#script.Parent.Text)
		end
	end
end
coroutine.wrap(EWRBJ_fake_script)()
local function YXIJ_fake_script() -- ChatBar.autocolor 
	local script = Instance.new('LocalScript', ChatBar)

	while wait() do
	script.Parent.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	end
end
coroutine.wrap(YXIJ_fake_script)()

-- dev console: 

local  s, e = loadstring(game:HttpGet("https://pastebin.com/raw/uQ4wzMdR", true))
if typeof(s) ~= "function" then
return
end
local success, message = pcall(s)
if (not success) then
if printconsole then
printconsole(message)
elseif printoutput then
printoutput(message)
end
end

-- // gotta be the safest we can be (for games like rogue lineage and strucid that ban on error ugh)
local _, str = pcall(function()
   return game:HttpGet("https://pastebin.com/raw/i35eCznS", true)
end)

local s, e = loadstring(str)
if typeof(s) ~= "function" then
   return
end

local success, message = pcall(s)
if (not success) then
   if printconsole then
       printconsole(message)
   elseif printoutput then
       printoutput(message)
   end
end


--[[ 
	This script controls the gui the player sees in regards to his or her health.
	Can be turned with Game.StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Health,false)
	Copyright ROBLOX 2014. Written by Ben Tkacheff.
--]]

---------------------------------------------------------------------
-- Initialize/Variables
while not game do
	wait(1/60)
end
while not game:GetService("Players") do
	wait(1/60)
end

local currentHumanoid = nil

local HealthGui = nil
local lastHealth = 100
local HealthPercentageForOverlay = 5
local maxBarTweenTime = 0.3
local greenColor = Color3.new(0.2, 1, 0.2)
local redColor = Color3.new(1, 0.2, 0.2)
local yellowColor = Color3.new(1, 1, 0.2)

local guiEnabled = false
local healthChangedConnection = nil
local humanoidDiedConnection = nil
local characterAddedConnection = nil

local greenBarImage = "rbxasset://textures/ui/Health-BKG-Center.png"
local greenBarImageLeft = "rbxasset://textures/ui/Health-BKG-Left-Cap.png"
local greenBarImageRight = "rbxasset://textures/ui/Health-BKG-Right-Cap.png"
local hurtOverlayImage = "https://www.roblox.com/asset/?id=34854607"

game:GetService("ContentProvider"):Preload(greenBarImage)
game:GetService("ContentProvider"):Preload(hurtOverlayImage)

while not game:GetService("Players").LocalPlayer do
	wait(1/60)
end

---------------------------------------------------------------------
-- Functions

local capHeight = 15
local capWidth = 7

function CreateGui()
	if HealthGui and #HealthGui:GetChildren() > 0 then 
		HealthGui.Parent = game:GetService("CoreGui").RobloxGui
		return 
	end

	local hurtOverlay = Instance.new("ImageLabel")
	hurtOverlay.Name = "HurtOverlay"
	hurtOverlay.BackgroundTransparency = 1
	hurtOverlay.Image = hurtOverlayImage
	hurtOverlay.Position = UDim2.new(-10,0,-10,0)
	hurtOverlay.Size = UDim2.new(20,0,20,0)
	hurtOverlay.Visible = false
	hurtOverlay.Parent = HealthGui
	
	local healthFrame = Instance.new("Frame")
	healthFrame.Name = "HealthFrame"
	healthFrame.BackgroundTransparency = 1
	healthFrame.BackgroundColor3 = Color3.new(1,1,1)
	healthFrame.BorderColor3 = Color3.new(0,0,0)
	healthFrame.BorderSizePixel = 0
	healthFrame.Position = UDim2.new(0.5,-85,1, -90)
	healthFrame.Size = UDim2.new(0,170,0,capHeight)
	healthFrame.Parent = HealthGui


	local healthBarBackCenter = Instance.new("ImageLabel")
	healthBarBackCenter.Name = "healthBarBackCenter"
	healthBarBackCenter.BackgroundTransparency = 1
	healthBarBackCenter.Image = greenBarImage
	healthBarBackCenter.Size = UDim2.new(1,-capWidth*2,1,0)
	healthBarBackCenter.Position = UDim2.new(0,capWidth,0,0)
	healthBarBackCenter.Parent = healthFrame
	healthBarBackCenter.ImageColor3 = Color3.new(1,1,1)

	local healthBarBackLeft = Instance.new("ImageLabel")
	healthBarBackLeft.Name = "healthBarBackLeft"
	healthBarBackLeft.BackgroundTransparency = 1
	healthBarBackLeft.Image = greenBarImageLeft
	healthBarBackLeft.Size = UDim2.new(0,capWidth,1,0)
	healthBarBackLeft.Position = UDim2.new(0,0,0,0)
	healthBarBackLeft.Parent = healthFrame
	healthBarBackLeft.ImageColor3 = Color3.new(1,1,1)

	local healthBarBackRight = Instance.new("ImageLabel")
	healthBarBackRight.Name = "healthBarBackRight"
	healthBarBackRight.BackgroundTransparency = 1
	healthBarBackRight.Image = greenBarImageRight
	healthBarBackRight.Size = UDim2.new(0,capWidth,1,0)
	healthBarBackRight.Position = UDim2.new(1,-capWidth,0,0)
	healthBarBackRight.Parent = healthFrame
	healthBarBackRight.ImageColor3 = Color3.new(1,1,1)


	local healthBar = Instance.new("Frame")
	healthBar.Name = "HealthBar"
	healthBar.BackgroundTransparency = 1
	healthBar.BackgroundColor3 = Color3.new(1,1,1)
	healthBar.BorderColor3 = Color3.new(0,0,0)
	healthBar.BorderSizePixel = 0
	healthBar.ClipsDescendants = true
	healthBar.Position = UDim2.new(0, 0, 0, 0)
	healthBar.Size = UDim2.new(1,0,1,0)
	healthBar.Parent = healthFrame


	local healthBarCenter = Instance.new("ImageLabel")
	healthBarCenter.Name = "healthBarCenter"
	healthBarCenter.BackgroundTransparency = 1
	healthBarCenter.Image = greenBarImage
	healthBarCenter.Size = UDim2.new(1,-capWidth*2,1,0)
	healthBarCenter.Position = UDim2.new(0,capWidth,0,0)
	healthBarCenter.Parent = healthBar
	healthBarCenter.ImageColor3 = greenColor

	local healthBarLeft = Instance.new("ImageLabel")
	healthBarLeft.Name = "healthBarLeft"
	healthBarLeft.BackgroundTransparency = 1
	healthBarLeft.Image = greenBarImageLeft
	healthBarLeft.Size = UDim2.new(0,capWidth,1,0)
	healthBarLeft.Position = UDim2.new(0,0,0,0)
	healthBarLeft.Parent = healthBar
	healthBarLeft.ImageColor3 = greenColor

	local healthBarRight = Instance.new("ImageLabel")
	healthBarRight.Name = "healthBarRight"
	healthBarRight.BackgroundTransparency = 1
	healthBarRight.Image = greenBarImageRight
	healthBarRight.Size = UDim2.new(0,capWidth,1,0)
	healthBarRight.Position = UDim2.new(1,-capWidth,0,0)
	healthBarRight.Parent = healthBar
	healthBarRight.ImageColor3 = greenColor

	HealthGui.Parent = game:GetService("CoreGui").RobloxGui
end

function UpdateGui(health)
	if not HealthGui then return end
	
	local healthFrame = HealthGui:FindFirstChild("HealthFrame")
	if not healthFrame then return end
	
	local healthBar = healthFrame:FindFirstChild("HealthBar")
	if not healthBar then return end
	
	-- If more than 1/4 health, bar = green.  Else, bar = red.
	local percentHealth = (health/currentHumanoid.MaxHealth)
	if percentHealth ~= percentHealth then
		percentHealth = 1
		healthBar.healthBarCenter.ImageColor3 = yellowColor
		healthBar.healthBarRight.ImageColor3 = yellowColor
		healthBar.healthBarLeft.ImageColor3 = yellowColor
	elseif percentHealth > 0.25  then		
		healthBar.healthBarCenter.ImageColor3 = greenColor
		healthBar.healthBarRight.ImageColor3 = greenColor
		healthBar.healthBarLeft.ImageColor3 = greenColor
	else
		healthBar.healthBarCenter.ImageColor3 = redColor
		healthBar.healthBarRight.ImageColor3 = redColor
		healthBar.healthBarLeft.ImageColor3 = redColor
	end
		
	local width = (health / currentHumanoid.MaxHealth)
 	width = math.max(math.min(width,1),0) -- make sure width is between 0 and 1
 	if width ~= width then width = 1 end

	local healthDelta = lastHealth - health
	lastHealth = health
	
	local percentOfTotalHealth = math.abs(healthDelta/currentHumanoid.MaxHealth)
	percentOfTotalHealth = math.max(math.min(percentOfTotalHealth,1),0) -- make sure percentOfTotalHealth is between 0 and 1
	if percentOfTotalHealth ~= percentOfTotalHealth then percentOfTotalHealth = 1 end

	local newHealthSize = UDim2.new(width,0,1,0)
	
	healthBar.Size = newHealthSize

	local sizeX = healthBar.AbsoluteSize.X
	if sizeX < capWidth then
		healthBar.healthBarCenter.Visible = false
		healthBar.healthBarRight.Visible = false
	elseif sizeX < (2*capWidth + 1) then
		healthBar.healthBarCenter.Visible = true
		healthBar.healthBarCenter.Size = UDim2.new(0,sizeX - capWidth,1,0)
		healthBar.healthBarRight.Visible = false
	else
		healthBar.healthBarCenter.Visible = true
		healthBar.healthBarCenter.Size = UDim2.new(1,-capWidth*2,1,0)
		healthBar.healthBarRight.Visible = true
	end

	local thresholdForHurtOverlay = currentHumanoid.MaxHealth * (HealthPercentageForOverlay/100)
	
	if healthDelta >= thresholdForHurtOverlay and guiEnabled then
		AnimateHurtOverlay()
	end

end

function AnimateHurtOverlay()
	if not HealthGui then return end
	
	local overlay = HealthGui:FindFirstChild("HurtOverlay")
	if not overlay then return end
	
	local newSize = UDim2.new(20, 0, 20, 0)
	local newPos = UDim2.new(-10, 0, -10, 0)

	if overlay:IsDescendantOf(game) then
		-- stop any tweens on overlay
		overlay:TweenSizeAndPosition(newSize,newPos,Enum.EasingDirection.Out,Enum.EasingStyle.Linear,0,true,function()
			
			-- show the gui
			overlay.Size = UDim2.new(1,0,1,0)
			overlay.Position = UDim2.new(0,0,0,0)
			overlay.Visible = true
			
			-- now tween the hide
			if overlay:IsDescendantOf(game) then
				overlay:TweenSizeAndPosition(newSize,newPos,Enum.EasingDirection.Out,Enum.EasingStyle.Quad,10,false,function()
					overlay.Visible = false
				end)
			else
				overlay.Size = newSize
				overlay.Position = newPos
			end
		end)
	else
		overlay.Size = newSize
		overlay.Position = newPos
	end

end

function humanoidDied()
	 UpdateGui(0)
end

function disconnectPlayerConnections()
	if characterAddedConnection then characterAddedConnection:disconnect() end
	if humanoidDiedConnection then humanoidDiedConnection:disconnect() end
	if healthChangedConnection then healthChangedConnection:disconnect() end
end

function newPlayerCharacter()
	disconnectPlayerConnections()
	startGui()
end

function startGui()
	characterAddedConnection = game:GetService("Players").LocalPlayer.CharacterAdded:connect(newPlayerCharacter)

	local character = game:GetService("Players").LocalPlayer.Character
	if not character then
		return
	end

	currentHumanoid = character:WaitForChild("Humanoid")
	if not currentHumanoid then
		return
	end

	if not game:GetService("StarterGui"):GetCoreGuiEnabled(Enum.CoreGuiType.Health) then
		return
	end

	healthChangedConnection = currentHumanoid.HealthChanged:connect(UpdateGui)
	humanoidDiedConnection = currentHumanoid.Died:connect(humanoidDied)
	UpdateGui(currentHumanoid.Health)
		
	CreateGui()
end



---------------------------------------------------------------------
-- Start Script

HealthGui = Instance.new("Frame")
HealthGui.Name = "HealthGui"
HealthGui.BackgroundTransparency = 1
HealthGui.Size = UDim2.new(1,0,1,0)

game:GetService("StarterGui").CoreGuiChangedSignal:connect(function(coreGuiType,enabled)
	if coreGuiType == Enum.CoreGuiType.Health or coreGuiType == Enum.CoreGuiType.All then
		if guiEnabled and not enabled then
			if HealthGui then
				HealthGui.Parent = nil
			end
			disconnectPlayerConnections()
		elseif not guiEnabled and enabled then
			startGui()
		end
		
		guiEnabled = enabled
	end
end)

if game:GetService("StarterGui"):GetCoreGuiEnabled(Enum.CoreGuiType.Health) then
	guiEnabled = true
	startGui()
end
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "mem dance"            
            })
        end
        
    }
})

Page.Button({
    Text = "Chat Bot",
    Callback = function()
        local HttpService = game:GetService("HttpService")
        local Players = game:GetService("Players")
        
        _G.Owner = "ChangeThis"
        
        function getChat(message,plrname)
        
           local Split = message:gsub(" ", "+") -- This takes spaces within the person's message and turns it into for ex: Hi+How+Are+You... to ensure that there are no errors and to also make the URL work
           
           local Response = game:HttpGet("https://api.affiliateplus.xyz/api/chatbot?message=" .. Split .. "&botname=" .. plrname .. "&ownername=" .. _G.Owner .. "&user=1")
           local Data = HttpService:JSONDecode(Response)
           wait(1)
           game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(Data.message, "All")
        end
        
        Players.PlayerChatted:Connect(function(type, plr, message)
           if plr.Name ~= Players.LocalPlayer.Name then
               getChat(message, plr.Name)
           end
        end)
    end,
    Menu = {
        Information = function(self)
            UI.Banner({
                Text = "boto"            
            })
        end
        
    }
})


